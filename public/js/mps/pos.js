/*! For license information please see pos.js.LICENSE.txt */
(self.webpackChunkMPS=self.webpackChunkMPS||[]).push([[97],{42184:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(6151),o=r(22254);function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const u=function(t,e,r,a){return{components:{InputNumberComponent:n.Z,SelectVariationComponent:o.Z},data:function(){return{item:{},variantModal:!1}},watch:{variantModal:function(t){t||(this.item={},this.$refs.selectVarMod.$refs.form.resetFields())}},methods:{variationSubmitted:function(t){var e=t.quantity?t.quantity:1;this.item.selected={modifiers:[],variations:[],portions:[],serials:[]},t.serials&&t.serials.length&&(this.item.selected.serials=t.serials),t.modifiers&&t.modifiers.length&&(this.item.selected.modifiers=t.modifiers),t.selected_variation&&this.item.selected.variations.push(t.selected_variation),t.selected_portion&&this.item.selected.portions.push(t.selected_portion),this.addToOrder(this.item,e,!1,!1,!0),this.variantModal=!1},calculateItemDiscountAmount:function(t){var e=this,r=0;return t.selected.modifiers.length&&t.selected.modifiers.length&&(t.selected.modifiers=t.selected.modifiers.map((function(n){var o=e.formatDecimal(parseFloat(n[e.field])*parseFloat(t.discount)/100);return e.applicablePromotions(t).map((function(t){o+=e.formatDecimal(parseFloat(n[e.field]-o)*parseFloat(t.discount)/100)})),r+=o,n.discount_amount=o,n}))),t.selected.variations.length||t.selected.portions.length?(t.selected.variations.length&&(t.selected.variations=t.selected.variations.map((function(n){var o=e.formatDecimal(parseFloat(n[e.field])*parseFloat(t.discount)/100);return e.applicablePromotions(t).map((function(t){o+=e.formatDecimal(parseFloat(n[e.field]-o)*parseFloat(t.discount)/100)})),r+=o,n.discount_amount=o,n}))),t.selected.portions.length&&(t.selected.portions=t.selected.portions.map((function(n){var o=e.formatDecimal(parseFloat(n[e.field])*parseFloat(t.discount)/100);return e.applicablePromotions(t).map((function(t){o+=e.formatDecimal(parseFloat(n[e.field]-o)*parseFloat(t.discount)/100)})),r+=o,n.discount_amount=o,n}))),t.discount_amount=parseFloat(this.formatDecimal(r)),t):(r=this.formatDecimal(parseFloat(t[this.field])*parseFloat(t.discount)/100),this.applicablePromotions(t).map((function(n){r+=e.formatDecimal(parseFloat(t[e.field]-r)*parseFloat(n.discount)/100)})),t.discount_amount=r,t)},applySXGD:function(t){var r=this;this[e].items=this[e].items.map((function(t){t.promotions&&t.promotions.length&&t.promotions.map((function(e,n){t=r.calculateItemDiscountAmount(t)}))}))},applicablePromotions:function(t){return t.allPromotions?t.allPromotions.filter((function(e){return t.promotions.includes(e.id)})):[]},applyPromotions:function(t,e){var r=this;return!t.allPromotions||t.allPromotions.length<1?[]:t.allPromotions.filter((function(e){return r.applyPromoDiscount(e,t)})).map((function(t){return t.id}))},addPromoDiscount:function(t,e){return t.id||(t=e.allPromotions.find((function(e){return e.id==t}))),e.allPromotions.find((function(e){return e.id==t.id}))||e.allPromotions.push(t),e},applyPromoDiscount:function(t,e){if("simple"==t.type)return!0;if("advance"==t.type){if(e.quantity>=parseFloat(t.quantity_to_buy))return!0}else if("BXGY"==t.type){if(e.quantity>=parseFloat(t.quantity_to_buy))return this.addOrderRowByItemID(t.item_id_to_get,e.id),!0}else if("SXGD"==t.type&&this.orderTotalAmount>=parseFloat(t.amount_to_spend))return!0;return!1},checkCustomerGroup:function(t){var r=this;this.$nextTick((function(){var t=r.customers.find((function(t){return t.value==r[e].customer_id}));t&&t.customer_group&&r[e].items.map((function(e){e.discount=(e.discount?parseFloat(e.discount):0)+parseFloat(t.customer_group.discount),r.addToOrder(e,e.quantity,!0,!0)}))}))},checkPromos:function(t){var e=this;return t.promotions=t.valid_promotions,delete t.valid_promotions,t.promotions&&t.promotions.length&&t.promotions.map((function(r){t=e.addPromoDiscount(r,t)})),t.categories&&t.categories[0].valid_promotions&&t.categories[0].valid_promotions.length&&t.categories[0].valid_promotions.map((function(r){t=e.addPromoDiscount(r,t)})),t.promotions=this.applyPromotions(t),t=this.calculateItemDiscountAmount(t),t=this.doTaxCalculation(t)},calcItemTax:function(t){return t.taxes&&t.taxes.length?t.taxes.reduce((function(t,e){return t+parseFloat(e.amount)}),0):0},doTaxCalculation:function(t,e){var r=this,n=t[this.field]-(!e&&t.discount_amount?parseFloat(t.discount_amount):0);return t.taxes=this.calculateTaxes(t.allTaxes,n,t.tax_included),t.selected.modifiers.length&&(t.selected.modifiers=t.selected.modifiers.map((function(n){var o=n[r.field]-(!e&&n.discount_amount?parseFloat(n.discount_amount):0);return n.taxes=r.calculateTaxes(t.allTaxes,o),n.total_tax_amount=r.calcItemTax(n),n}))),t.selected.variations.length&&(t.selected.variations=t.selected.variations.map((function(n){var o=n[r.field]-(!e&&n.discount_amount?parseFloat(n.discount_amount):0);return n.taxes=r.calculateTaxes(t.allTaxes,o),n.total_tax_amount=r.calcItemTax(n),n}))),t.selected.portions.length&&(t.selected.portions=t.selected.portions.map((function(n){var o=n[r.field]-(!e&&n.discount_amount?parseFloat(n.discount_amount):0);return n.taxes=r.calculateTaxes(t.allTaxes,o),n.total_tax_amount=r.calcItemTax(n),n}))),t},calculateTaxes:function(t,e,r){var n=this,o=(t=this.applicableTaxes(t)).filter((function(t){return 1==t.compound})),a=t.filter((function(t){return 0==t.compound})).map((function(t){return c(c({},t),{},{value:t.id,on:parseFloat(e),amount:n.calculateTaxOn(t.rate,e,r)})})),s=a.reduce((function(t,e){return t+parseFloat(e.amount)}),0),l=o.map((function(t){return c(c({},t),{},{value:t.id,on:parseFloat(e)+parseFloat(s),amount:n.calculateTaxOn(t.rate,parseFloat(e)+parseFloat(s),r)})}));return[].concat(i(a),i(l))},calculateTaxOn:function(t,e,r){return 1==r?this.calculateInclusiveTax(t,e):this.calculateExclusiveTax(t,e)},calculateInclusiveTax:function(t,e){return this.formatDecimal(parseFloat(e)*parseFloat(t)/(100+parseFloat(t)),4)},calculateExclusiveTax:function(t,e){return this.formatDecimal(parseFloat(e)*parseFloat(t)/100,4)},applicableTaxes:function(r){var n=this;return r.filter((function(r){var o=n.$store.getters.location;if("cost"==t){if(a)return!r.same;var i=n.suppliers.find((function(t){return t.value==n[e].supplier_id}));if(r.state&&i&&o){var s=i.state==o.state;return r.same?s:!s}}else{var c=n.customers?n.customers.find((function(t){return t.value==n[e].customer_id})):null;if(r.state&&c&&o){var l=c.state==o.state;return r.same?l:!l}}return!0}))},playSound:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];1==this.$store.getters.play_sound&&this.$event.fire(t?"okSound":"errorSound")},addOrderRowByItemID:function(t,e){var r=this;this.$http.get("app/items/"+t).then((function(t){t.data[r.field]=0,t.data.promo=1,t.data.promotions=null,t.data.promo_item_id=e,t.data.categories[0].promotions=null,r.addToOrder(t.data)}))},selectItem:function(t){this.query="",this.addToOrder(JSON.parse(t))},selectSaleItem:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r?this.cloading=!0:this.loading=!0,n?(this.addToOrder(n),this.loading=!1):this.$http.get("app/sale_order_items/"+t).then((function(t){return e.addToOrder(t.data)})).catch((function(t){return console.log(t)})).finally((function(){r?(e.query="",e.cloading=!1):e.loading=!1}))},addToOrder:function(n,o,s,l,u){var d=this;if(!n)return!1;if(!this[e]||!n.code||!n.name)return!1;if(n.selected||(n.selected={modifiers:[],portions:[],variations:[],serials:[]},a||"cost"!=t||(n.selected.serials=[{number:"",till:""}])),l)s||(n=this.checkPromos(n)),r?this.$store.commit("setOrderRow",n):this[e].items=this[e].items.map((function(t){return t.item_id==n.id?n:t}));else{if(this.cloading=!0,!u&&(n.serials&&n.serials.length||n.modifiers&&n.modifiers.length>0||n.portions&&n.portions.length>0||n.variants&&n.variants.length>0&&n.variations&&n.variations.length>0))return"recipe"!=n.type||1!=n.portions.length||n.modifiers&&n.modifiers.length?(this.cloading=!1,this.item=JSON.parse(JSON.stringify(n)),this.variantModal=!0,!1):(n.selected.portions=i(n.portions),this.addToOrder(n,1,!1,!1,!0),!0);var p={},m=!!(this[e].items&&this[e].items.length>0)&&this[e].items.find((function(t){return t.id==n.id&&t.promo==n.promo&&(!t.variation||t.variation&&n.variation&&t.variation.id==n.variation.id)}));m?(m.quantity=s?parseFloat(o):parseFloat(m.quantity)+(o?parseFloat(o):n.barcode_qty?n.barcode_qty:1),n.selected.portions.length&&(n.selected.portions=n.selected.portions.map((function(t){return t.quantity=t.quantity?t.quantity:1,t})),m.selected.portions.push(n.selected.portions[0])),n.selected.variations.length&&m.selected.variations.push(n.selected.variations[0]),n.selected.modifiers.length&&(m.selected.modifiers.length?n.selected.modifiers.map((function(t){m.selected.modifiers=m.selected.modifiers.map((function(e){return e.id==t.id&&(e.quantity=parseFloat(e.quantity)+1),e})),m.selected.modifiers.find((function(e){return e.id==t.id}))||m.selected.modifiers.push(t)})):m.selected.modifiers=n.selected.modifiers),m=this.doTaxCalculation(m),"price"==t&&(m=this.checkPromos(m)),r?this.$store.commit("setOrderRow",m):this[e].items=this[e].items.map((function(t){return t.item_id==m.id?m:t})),this.alert(this.$root.$t("cart_item_updated",{item:n.name})),this.playSound(!0)):("price"==t&&this.customer&&this.customer.customer_group&&(n.discount=parseFloat(n.discount?n.discount:0)+(this.customer.customer_group?parseFloat(this.customer.customer_group.discount):0)),n.unit&&(n.allUnits=[c(c({},n.unit),{},{subunits:null})].concat(i(n.unit.subunits))),(p=c(c({},n),{},{comment:"",item_id:n.id,item_unit_id:n.unit_id,unit_id:"price"==t?n.sale_unit_id?n.sale_unit_id:n.unit_id:n.purchase_unit_id?n.purchase_unit_id:n.unit_id,guid:this.guid(),allTaxes:i(n.taxes),selected:c({},n.selected),discount:n.discount?n.discount:null,quantity:o?parseFloat(o):n.barcode_qty?n.barcode_qty:1})).selected.portions=p.selected.portions.map((function(t){return t.quantity=t.quantity?t.quantity:1,t})),p.price=p.location_stock.length>0&&p.location_stock[0].price?parseFloat(p.location_stock[0].price):parseFloat(p.price),p.cost=p.location_stock.length>0&&p.location_stock[0].cost?parseFloat(p.location_stock[0].cost):parseFloat(p.cost),(p=this.doTaxCalculation(p)).total_tax_amount=this.calcItemTax(p),"price"==t&&(p.promotions=n.promotions?n.promotions:[],p.allPromotions=n.allPromotions?n.allPromotions:[],p=this.checkPromos(p)),r?this.$store.commit("addOrderRow",p):this[e].items.push(p),this.alert(this.$root.$t("added_to_cart",{item:p.name})),this.playSound(!0)),r&&window&&document.documentElement.clientWidth>768&&this.$event.fire("order:scroll"),this.cloading=!1}this.$nextTick((function(){d.query="",d.isMobile()||document.querySelector("#scan_barcode").focus()}))}}}}},61402:(t,e,r)=>{"use strict";r.d(e,{Z:()=>d});r(18446);var n=r(23279),o=r.n(n),i=r(42184);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const d=function(t,e,n,a){return{mixins:[(0,i.Z)(t,e,n,a)],data:function(){var e=this,r=function(t,r,n){r&&r>e.edit_item.max_discount?n(new Error(e.$t("max_discount_error",{percent:parseFloat(e.edit_item.max_discount)}))):n()},n=function(t,r,n){r&&(r>e.edit_item.max_price||r<e.edit_item.min_price)?n(new Error(e.$t("mm_price_error",{min:parseFloat(e.edit_item.min_price),max:parseFloat(e.edit_item.max_price)}))):n()};return{show:!1,field:t,gift_cards:[],gift_card:null,cloading:!1,itemPrice:n,itemDiscount:r,itemRules:{cost:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("cost")}),trigger:["change","blur"]}],price:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("price")}),trigger:["change","blur"]},{validator:n,trigger:["change","blur"]}],quantity:[{required:!0,type:"number",message:this.$t("field_is_required",{field:this.$t("quantity")}),trigger:["change","blur"]}],discount:[{validator:r,trigger:["change","blur"]}]}}},computed:{customer:function(){var t=this;return this.customers.find((function(r){return r.value==t[e].customer_id}))},orderTotalItems:function(){return this[e]&&this[e].items?this[e].items.length:0},orderOriginalTotal:function(){var t=this;if(this[e]&&"order"!=this[e].discount_method){var r=l(this[e].items).map((function(e){var r={tax_included:e.tax_included,allTaxes:l(e.allTaxes),quantity:e.quantity,selected:{}};return r[t.field]=e[t.field],r.selected.variations=e.selected.variations.map((function(t){return s({},t)})),r.selected.portions=e.selected.portions.map((function(t){return s({},t)})),r.selected.modifiers=e.selected.modifiers.map((function(t){return s({},t)})),parseFloat(t.calcRowOriginalTotal(r))})).reduce((function(t,e){return t+e}),0);return this.formatDecimal(r)}return 0},orderDiscount:function(){return this[e]&&"order"==this[e].discount_method?this.formatDecimal(this.orderTotalAmount*this[e].discount/100):0},orderTotalQuantity:function(){return this[e]?this[e].items.map((function(t){return t.quantity})).reduce((function(t,e){return t+e}),0):0},orderPayableAmount:function(){return this[e]?this.formatDecimal(this.orderTotalAmount-this.orderDiscount):0},paymentChange:function(){return this.paymentForm.amount>this.orderTotalAmount?this.paymentForm.amount-this.orderTotalAmount:0},totalItemTax:function(){var t=this,r=this[e].items.reduce((function(e,r){var n=(r=t.doTaxCalculation(r)).taxes.reduce((function(t,e){return t+parseFloat(e.amount)*parseFloat(r.quantity)}),0);return parseFloat(e+n)}),0);return this.formatDecimal(r)},orderTotalAmount:function(){var t=this;l(this[e].items);return this.formatDecimal(this[e].items.reduce((function(e,r){return e+(r?t.calcRowTotal(r):0)}),0))}},methods:{giftCardSelected:function(t){this.gift_card=this.gift_cards.find((function(e){return e.number==t}))},searchGiftCard:function(t){this.getGiftCard(t,this)},getGiftCard:o()((function(t,e){e.searching=!0,e.$http.get("app/gift_cards/search?q="+t).then((function(t){1==t.data.length?(e.gift_card=t.data[0],e.paymentForm.gift_card_number=t.data[0].number):e.gift_cards=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),getPortionById:function(t,e){return t.find((function(t){return t.id==e}))},getPortionChoosable:function(t,e,r){return t.choosables.find((function(t){return t.id==e})).selected==r},changeSelectedPortion:function(t,e){var r=t?this.edit_item.portions.find((function(t,r){return r==e})):{},n=t?this.edit_item.portions.find((function(e){return e.id==t})):{},o={id:n.id,name:n.name,choosables:[],quantity:r.quantity?r.quantity:1};n.choosables.map((function(t){o.choosables.push({id:t.id,selected:t.items[0].item_id})})),this.edit_item.selected.portions[e]=s({},o)},modOptLabel:function(t){return t.item.name+" (+"+this.formatDecimal(t.item[this.field])+")"},itemQuantityChanged:function(t){n?this.$event.fire("pos:order:update",{item:t,qty:t.quantity,set:!0,force:!1,vCheck:!1}):this.addToOrder(t,t.quantity,!0)},itemUnitChanged:function(){var t=this.calculateUnitPrice(this.edit_item,this.field);this.edit_item=this.doTaxCalculation(t)},itemVariationQuantityChanged:function(t){t.quantity=t.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),n?this.$event.fire("pos:order:update",{item:t,qty:t.quantity,set:!0,force:!0,vCheck:!0}):this.addToOrder(t,t.quantity,!0,!0,!0)},itemPortionQuantityChanged:function(t){t.quantity=t.selected.portions.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),n?this.$event.fire("pos:order:update",{item:t,qty:t.quantity,set:!0,force:!0,vCheck:!0}):this.addToOrder(t,t.quantity,!0,!0,!0)},itemModifierQuantityChanged:function(t){n?this.$event.fire("pos:order:update",{item:t,qty:t.quantity,set:!0,force:!0,vCheck:!0}):this.addToOrder(t,t.quantity,!0,!0,!0)},checkDisc:function(t,e){if(t){if(-1!==t.toString().indexOf("%")){var r=t.split("%"),n=this.formatDecimal(parseFloat(e)*parseFloat(r[0])/100);return{discount:t,discount_amount:isNaN(parseFloat(n))?0:parseFloat(n)}}return{discount:t,discount_amount:isNaN(parseFloat(t))?0:parseFloat(t)}}return{discount:"",discount_amount:0}},calcRowOriginalTotal:function(t){var e=this,r=0;return t.selected.modifiers.length&&(r+=t.selected.modifiers.reduce((function(r,n){var o=parseFloat(n[e.field]);return n.taxes=e.calculateTaxes(t.allTaxes,o,t.tax_included),n.total_tax_amount=e.calcItemTax(n),r+parseFloat(n.quantity)*(o+(1==t.tax_included?0:parseFloat(n.total_tax_amount)))}),0)),t.selected.variations.length||t.selected.portions.length?(t.selected.variations.length&&(r+=t.selected.variations.reduce((function(r,n){var o=parseFloat(n[e.field]?n[e.field]:t[e.field]);return n.taxes=e.calculateTaxes(t.allTaxes,o,t.tax_included),n.total_tax_amount=e.calcItemTax(n),r+parseFloat(n.quantity)*(o+(1==t.tax_included?0:parseFloat(n.total_tax_amount)))}),0)),t.selected.portions.length&&(r+=t.selected.portions.reduce((function(r,n){var o=parseFloat(n[e.field]);return n.taxes=e.calculateTaxes(t.allTaxes,o,t.tax_included),n.total_tax_amount=e.calcItemTax(n),r+parseFloat(n.quantity)*(o+(1==t.tax_included?0:parseFloat(n.total_tax_amount)))}),0)),r):(t.taxes=this.calculateTaxes(t.allTaxes,t[this.field],t.tax_included),t.total_tax_amount=this.calcItemTax(t),r+parseFloat(t.quantity)*(parseFloat(t[this.field])+(1==t.tax_included?0:t.total_tax_amount)))},doTotal:function(t,e,r){return parseFloat(t.quantity)*(parseFloat(t[this.field])-parseFloat(t[this.field]&&!r&&t.discount_amount?t.discount_amount:0)+(1==e?0:parseFloat(t[this.field]?t.total_tax_amount:0)))},calcRowTotal:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r&&r.taxes&&r.taxes.length&&!r.total_tax_amount&&0!=r.total_tax_amount?(r.taxes=this.calculateTaxes(r.allTaxes,r[this.field],r.tax_included),r.total_tax_amount=this.calcItemTax(r)):t.taxes&&t.taxes.length&&!t.total_tax_amount&&0!=t.total_tax_amount&&(t.taxes=this.calculateTaxes(t.allTaxes,t[this.field],t.tax_included),t.total_tax_amount=this.calcItemTax(t));var n=0;return t.selected.modifiers&&t.selected.modifiers.length&&(n+=t.selected.modifiers.reduce((function(r,n){return r+e.doTotal(n,t.tax_included)}),0)),r||!t.selected.variations.length&&!t.selected.portions.length?n+this.formatDecimal(parseFloat(r?r.quantity:t.quantity)*(parseFloat(r?r[this.field]:t[this.field])-parseFloat(r?r.discount_amount:t.discount_amount?t.discount_amount:0)+(1==t.tax_included?0:r?r.total_tax_amount:t.total_tax_amount))):(t.selected.variations.length&&(n+=t.selected.variations.reduce((function(r,n){return r+e.doTotal(n,t.tax_included)}),0)),t.selected.portions.length&&(n+=t.selected.portions.reduce((function(r,n){return r+e.doTotal(n,t.tax_included)}),0)),n)},guid:function(){return r(18738)(this.uuid()+Date.now().toString()+Math.random().toString())},uuid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},portionChanged:function(t){var e=t?this.edit_item.portions.find((function(e){return e.id==t})):{};this.edit_item.portion=s({},e)},addPortionToEditItem:function(){var t={quantity:1,choosables:[],essentials:[],portion_items:[],id:this.edit_item.portions[0].id,name:this.edit_item.portions[0].name};this.edit_item.portions[0].portion_items.map((function(e){t.portion_items.push(e)})),this.edit_item.portions[0].essentials.map((function(e){t.essentials.push(e)})),this.edit_item.portions[0].choosables.map((function(e){t.choosables.push({id:e.id,selected:e.items[0].item_id})})),this.edit_item.selected.portions.push(t)},editItem:function(t){var r=this;this[e].items[t].guid||(this[e].items[t].guid=this.guid()),this.edit_item=JSON.parse(JSON.stringify(this[e].items[t]));var n=this.edit_item.selected.portions.length;if(n){var o=this.edit_item.quantity-n;if(o&&o>0)if(1==this.edit_item.portions.length)this.edit_item.selected.portions[0].quantity=this.edit_item.quantity;else for(var i=function(t){var e={quantity:1,choosables:[],id:r.edit_item.portions[0].id,name:r.edit_item.portions[0].name};r.edit_item.portions[0].choosables.map((function(t){e.choosables.push({id:t.id,selected:t.items[0].item_id})})),r.edit_item.selected.portions.push(e)},a=1;a<=o;a++)i();else if(o&&o<0)for(var s=o;s<0;s++)this.edit_item.selected.portions.pop()}this.edit_item.discount=this.edit_item.discount?parseFloat(this.edit_item.discount):null,this.edit_item.allTaxes=this.edit_item.allTaxes.map((function(t){return t.id})),this.show_item_edit=!0},updateItem:function(){var r=this;this.$refs.editItemForm.validate((function(o){if(o){if("price"==t){if(r.edit_item.serials&&r.edit_item.has_serials&&r.edit_item.serials.length&&r.edit_item.selected.serials.length!=r.edit_item.quantity)return r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10}),!1}else if(r.edit_item.serials&&r.edit_item.selected.serials.length!=r.edit_item.quantity)return r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10}),!1;if(r.edit_item.selected.modifiers=[],r.edit_item.modifiers&&r.edit_item.modifiers.length&&r.edit_item.modifiers.map((function(t){t.selected&&("checkbox"==t.show_as||"select_multiple"==t.show_as?t.selected.map((function(e){t.options.map((function(n){e==n.id&&r.edit_item.selected.modifiers.push({id:n.id,mId:t.id,quantity:1,cost:n.item.cost,option:n.item.name,price:n.item.price,title:t.title})}))})):t.options.map((function(e){t.selected==e.id&&r.edit_item.selected.modifiers.push({id:e.id,mId:t.id,quantity:1,cost:e.item.cost,option:e.item.name,price:e.item.price,title:t.title})})))})),r.edit_item.portions&&r.edit_item.portions.length&&(r.edit_item.quantity=r.edit_item.selected.portions.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)),r.edit_item.variations&&r.edit_item.variations.length&&(r.edit_item.quantity=r.edit_item.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0)),r.edit_item.allTaxes=r.taxes.filter((function(t){return r.edit_item.allTaxes.includes(t.id)})),r.edit_item=r.calculateItemDiscountAmount(r.edit_item),"price"==t)r[e].items.find((function(t){return t.id==r.edit_item.id})).promotions!=r.edit_item.promotions&&r.edit_item.allPromotions.map((function(t){r.edit_item.promotions.includes(t.id)&&"BXGY"==t.type&&(r[e].items=r[e].items.filter((function(e){return e.id!=t.item_id_to_get&&e.promo_item_id!=r.edit_item.id})))})),r.applicablePromotions(r.edit_item).map((function(t){"BXGY"==t.type&&r.edit_item.quantity>=t.quantity_to_buy&&r.addOrderRowByItemID(t.item_id_to_get,r.edit_item.id)}));r.edit_item=r.doTaxCalculation(r.edit_item);var i=JSON.parse(JSON.stringify(r.edit_item));r[e].items=r[e].items.map((function(t){return t.guid==i.guid?i:t})),n?r.$event.fire("pos:order:update",{item:i,qty:i.quantity,set:!0,force:!0,vCheck:!1}):r.addToOrder(i,i.quantity,!0,!0),r.edit_item=null,r.show_item_edit=!1}else r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10})}))},deleteItem:function(t,r,o){var i=this;t.promotions&&t.promotions.length&&(t.promotions=t.allPromotions?t.allPromotions.filter((function(e){return t.promotions.includes(e.id)})):[],t.promotions.map((function(e){"BXGY"==e.type&&t.quantity>=e.quantity_to_buy&&i.$store.commit("delPromotionItem",{id:e.item_id_to_get,promo_item_id:t.id})}))),n?this.$store.commit("delOrderRow",t):this[e].items=this[e].items.filter((function(e){return e.guid!=t.guid})),this.edit_item=null,this.show_item_edit=!1},deleteItemVariation:function(t,r,o){var i=this[e].items.find((function(e){return e.guid==t.guid}));i.selected_variation=null,i.selected.variations=i.selected.variations.filter((function(t){return t.id!==r.id})),i.quantity=i.selected.variations.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),i.selected.variations.length<=0?this.deleteItem(i):n&&this.$store.commit("setOrderRow",i)},deleteItemPortion:function(t,r,o){var i=this[e].items.find((function(e){return e.guid==t.guid}));i.selected_portion=null,i.selected.portions=i.selected.portions.filter((function(t,e){return e!==o})),i.quantity=i.selected.portions.reduce((function(t,e){return t+parseFloat(e.quantity)}),0),i.selected.portions.length<=0?this.deleteItem(i):n&&this.$store.commit("setOrderRow",i)},deleteItemModifier:function(t,r,o){var i=this[e].items.find((function(e){return e.guid==t.guid}));i.selected.modifiers=i.selected.modifiers.filter((function(t){return t.id!==r.id})),i.modifiers=i.modifiers.map((function(t){return t.id==r.mId&&(Array.isArray(t.selected)?t.selected=t.options.filter((function(t){return t.id==r.id})):t.selected=null),t})),n&&this.$store.commit("setOrderRow",i)},remove:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!n||this.$store.getters.superAdmin)this["deleteItem"+r](t,o,i);else{var a=null;this.$Modal.confirm({width:260,okText:this.$t("ok"),cancelText:this.$t("cancel"),title:this.$t("pin_required"),render:function(t){return t("Input",{props:{value:a,autofocus:!0,placeholder:e.$t("type_pin")},on:{input:function(t){return a=t}}})},onOk:function(){e.$Message.info("Check POS pin "+a+" then perform delete!"),e["deleteItem"+r](t,o,i)}})}}}}}},32979:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={data:function(){return{result:0,formula:""}},mounted:function(){this.setFocus()},methods:{keymonitor:function(t){var e=this.getKey(t);isNaN(e)&&"*"!=e&&"+"!=e&&"-"!=e&&"="!=e&&"/"!=e&&"Shift"!=e?"Backspace"==e?this.drop():this.$refs.input.value=this.formula:this.formula=this.$refs.input.value,"Enter"==e&&this.equal()},getKey:function(t){if(t.key)return t.key;var e=String.fromCharCode(t.keyCode);return e||(13===t.keyCode?"Enter":16===t.keyCode?"Shift":void 0)},setFocus:function(){this.$refs.input.value=this.formula,this.$refs.input.focus()},operate:function(t){this.formula+=t,this.setFocus()},equal:function equal(){this.result=eval(this.formula),this.setFocus()},cleanResult:function(){this.result=0,this.setFocus()},cleanAll:function(){this.formula="",this.result=0,this.$refs.input.value="",this.setFocus()},drop:function(){this.formula=this.formula.slice(0,-1),this.setFocus()},percent:function percent(){this.result=Math.round(eval(this.formula)/100),this.setFocus()},square:function square(){eval(this.formula)<0?this.formula="Can not square the negative value":this.result=Math.sqrt(eval(this.formula)),this.setFocus()},devided:function(){""===this.formula||this.formula.endsWith("+")||(this.formula="1/("+this.formula+")"),this.equal()},toggle:function toggle(){""===this.formula||this.formula.endsWith("+")||(this.formula.startsWith("-")?this.formula=Math.abs(eval(this.formula)).toString():this.formula="-("+this.formula+")"),this.equal()}}}},19679:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'/*!\n * \n *   simple-keyboard v3.3.7\n *   https://github.com/hodgef/simple-keyboard\n *\n *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.\n *\n *   This source code is licensed under the MIT license found in the\n *   LICENSE file in the root directory of this source tree.\n *\n */.hg-theme-default{background-color:#ececec;border-radius:5px;box-sizing:border-box;font-family:HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;overflow:hidden;padding:5px;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.hg-theme-default .hg-button span{pointer-events:none}.hg-theme-default button.hg-button{border-width:0;font-size:inherit;outline:0}.hg-theme-default .hg-button{display:inline-block;flex-grow:1}.hg-theme-default .hg-row{display:flex}.hg-theme-default .hg-row:not(:last-child){margin-bottom:5px}.hg-theme-default .hg-row .hg-button-container,.hg-theme-default .hg-row .hg-button:not(:last-child){margin-right:5px}.hg-theme-default .hg-row>div:last-child{margin-right:0}.hg-theme-default .hg-row .hg-button-container{display:flex}.hg-theme-default .hg-button{-webkit-tap-highlight-color:rgba(0,0,0,0);align-items:center;background:#fff;border-bottom:1px solid #b5b5b5;border-radius:5px;box-shadow:0 0 3px -1px rgba(0,0,0,.3);box-sizing:border-box;cursor:pointer;display:flex;height:40px;justify-content:center;padding:5px}.hg-theme-default .hg-button.hg-standardBtn{width:20px}.hg-theme-default .hg-button.hg-activeButton{background:#efefef}.hg-theme-default.hg-layout-numeric .hg-button{align-items:center;display:flex;height:60px;justify-content:center;width:33.3%}.hg-theme-default .hg-button.hg-button-numpadadd,.hg-theme-default .hg-button.hg-button-numpadenter{height:85px}.hg-theme-default .hg-button.hg-button-numpad0{width:105px}.hg-theme-default .hg-button.hg-button-com{max-width:85px}.hg-theme-default .hg-button.hg-standardBtn.hg-button-at{max-width:45px}.hg-theme-default .hg-button.hg-selectedButton{background:rgba(5,25,70,.53);color:#fff}.hg-theme-default .hg-button.hg-standardBtn[data-skbtn=".com"]{max-width:82px}.hg-theme-default .hg-button.hg-standardBtn[data-skbtn="@"]{max-width:60px}.hg-candidate-box{background:#ececec;border-bottom:2px solid #b5b5b5;border-radius:5px;display:inline-flex;margin-top:-10px;max-width:272px;position:absolute;transform:translateY(-100%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ul.hg-candidate-box-list{display:flex;flex:1;list-style:none;margin:0;padding:0}li.hg-candidate-box-list-item{align-items:center;display:flex;height:40px;justify-content:center;width:40px}li.hg-candidate-box-list-item:hover{background:rgba(0,0,0,.03);cursor:pointer}li.hg-candidate-box-list-item:active{background:rgba(0,0,0,.1)}.hg-candidate-box-prev:before{content:"◄"}.hg-candidate-box-next:before{content:"►"}.hg-candidate-box-next,.hg-candidate-box-prev{align-items:center;background:#d0d0d0;color:#969696;cursor:pointer;display:flex;padding:0 10px}.hg-candidate-box-next{border-bottom-right-radius:5px;border-top-right-radius:5px}.hg-candidate-box-prev{border-bottom-left-radius:5px;border-top-left-radius:5px}.hg-candidate-box-btn-active{color:#444}',""]);const i=o},71620:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".key{font-family:Lucida Console,Monaco,Courier New,Courier,monospace;font-weight:700;letter-spacing:1px;margin-right:10px;text-transform:uppercase}",""]);const i=o},28682:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".register{min-width:100%!important;width:auto!important}.register .table-wrapper{padding:0!important;width:100%}.register .table td,.register .table th{border-bottom:1px solid #e8eaec;padding:5px 10px}",""]);const i=o},23218:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".touch-keyboard{bottom:0;font-weight:700;max-width:998px;position:fixed;width:100%;z-index:9999}@media only screen and (min-width:999px){.touch-keyboard{left:50%;margin-left:-499px}}@media only screen and (max-width:998px){.touch-keyboard{display:none}}.touch-keyboard-inner{background-color:#cdcdcd;border-radius:5px 5px 0 0;box-shadow:0 -1px 4px rgba(0,0,0,.1);margin:0 auto;max-width:998px;padding:6px}.simple-keyboard{background-color:#cdcdcd;border-radius:0;margin:0;padding:6px 0 0}.hg-theme-default{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji!important}.hg-theme-default .hg-button{border-radius:4px!important}.simple-keyboard .hg-highlight{background:#515a6e!important;color:#fff!important}.simple-keyboard .hg-highlight2{background:#363e4f!important;color:#fff!important}.simple-keyboard .hg-button-accept{background:#19be6b!important;color:#fff!important;max-width:25%}.simple-keyboard .hg-button-close{background:#f90!important;color:#fff!important;max-width:50px}.simple-keyboard .hg-extra{max-width:75px!important;min-width:20px!important;width:7%!important}",""]);const i=o},49862:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".calculator .calculator-display[data-v-64c4c32d]{background-color:#f5f5f6;border:1px solid #dddee1;border-radius:4px;height:70px;margin:10px}.calculator .calculator-formula[data-v-64c4c32d]{color:#80848f;font-family:Lucida Console,Monaco,monospace;font-size:12px;height:40%;overflow:hidden;padding:5px 10px;text-align:right;text-overflow:ellipsis;white-space:nowrap;width:100%}.calculator-formula-input[data-v-64c4c32d]{background:transparent;border:0;color:transparent;height:0;position:absolute}.calculator-formula-input[data-v-64c4c32d]:focus{box-shadow:none;outline:none}.calculator .calculator-result[data-v-64c4c32d]{box-sizing:border-box;color:#495060;font-size:1.5rem;height:60%;overflow:hidden;padding:5px 10px;text-align:right;text-overflow:ellipsis;white-space:nowrap;width:100%}.calculator .calculator-items[data-v-64c4c32d]{font-size:16px;height:auto;margin:0 -10px 0 10px;text-align:left}.calculator .calculator-items .calculator-row[data-v-64c4c32d]{width:100%}.calculator-btn[data-v-64c4c32d]{display:inline-block;font-size:14px;height:3rem;line-height:3rem;margin:0 0 8px;padding:0;text-align:center;width:calc(20% - 8px)}.calculator-btn-big[data-v-64c4c32d]{width:calc(40% - 12px)}",""]);const i=o},45991:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".input-number[data-v-a81d4f58]{align-items:center;background-color:#fff;border:1px solid #dcdee2;border-radius:4px;display:flex;flex-direction:row;justify-content:space-between;margin:0 auto;max-width:300px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:50%}.input-number .field-container[data-v-a81d4f58]{flex:1}.input-number .field-container input[data-v-a81d4f58]{border:none;font-size:15px;padding:3px;text-align:center;width:100px}.input-number .field-container input[data-v-a81d4f58]:focus{outline:none}.input-number .input-button[data-v-a81d4f58]{background-color:#f5f5f5;cursor:pointer;padding:4px 10px;width:50px}.input-number .input-button.first[data-v-a81d4f58]{border-radius:3px 0 0 3px;border-right:1px solid #dcdee2}.input-number .input-button.last[data-v-a81d4f58]{border-left:1px solid #dcdee2;border-radius:0 3px 3px 0}.input-number .input-button[data-v-a81d4f58]:active,.input-number .input-button[data-v-a81d4f58]:hover{background-color:#ddd}",""]);const i=o},19270:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".cardp{margin-bottom:16px}.cardp .ivu-card-body{padding-bottom:0}.ivu-radio-group-button .ivu-radio-wrapper{border-radius:0!important;height:auto!important;padding:5px 20px}.ivu-form .ivu-form-item-label{font-size:14px;font-weight:700}",""]);const i=o},17411:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".cv-main[data-v-a637bae6]{background:#f5f7f9;min-width:450px;position:relative}.promo-contents[data-v-a637bae6]{align-items:center;display:flex;flex-direction:column;justify-content:center;left:0;max-width:calc(100vw - 450px);min-height:100vh;min-width:calc(100vw - 450px);padding:0 10px;position:absolute;text-align:center;top:0}@media (max-width:650px){.promo-contents[data-v-a637bae6]{display:none}}.content[data-v-a637bae6]{min-height:100vh;min-width:450px;width:100%}.logo[data-v-a637bae6]{color:#fff;font-size:16px;font-weight:700}.pos-order[data-v-a637bae6]{box-shadow:0 4px 12px rgba(0,0,0,.15);height:calc(100vh - 50px);position:relative}.pos-order-items[data-v-a637bae6]{overflow:hidden;position:relative}.pos-order-scroll[data-v-a637bae6]{height:calc(100vh - 224px);margin-bottom:-4px;margin-top:-1px}.above-order-items[data-v-a637bae6]{background-color:#f5f5f6;display:block;height:65px}.above-order-items .order-info[data-v-a637bae6],.above-order-items .order-sub-details[data-v-a637bae6]{border-bottom:1px solid #dddee1;display:flex;padding:0 10px}.above-order-items .order-info .ivu-dropdown[data-v-a637bae6],.above-order-items .order-sub-details .ivu-dropdown[data-v-a637bae6]{font-weight:700}.above-order-items .order-info .details[data-v-a637bae6],.above-order-items .order-sub-details .details[data-v-a637bae6]{flex:1}.above-order-items .order-info button[data-v-a637bae6],.above-order-items .order-sub-details button[data-v-a637bae6]{font-weight:700}.above-order-items .order-info[data-v-a637bae6]{height:40px;line-height:40px}.above-order-items .order-sub-details[data-v-a637bae6]{height:25px;line-height:25px}.pos-order-items .order-items[data-v-a637bae6]{border:0}.pos-order-items .order-items .header[data-v-a637bae6]{align-items:center;background:#515a6e;border:none;border-bottom:1px solid #dddee1;color:#fff;display:flex;font-weight:700;justify-content:center;padding:6px 10px}.pos-order-items .order-items .header .index[data-v-a637bae6]{margin-right:10px;text-align:center;width:20px}.pos-order-items .order-items .header .details[data-v-a637bae6]{flex:1}.pos-order-items .order-items .header .quantity[data-v-a637bae6]{text-align:center;width:70px}.pos-order-items .order-items .header .subtotal[data-v-a637bae6]{padding-right:10px;text-align:right;width:100px}.pos-order-items .order-items .order-item[data-v-a637bae6]{border-bottom:1px solid #dddee1;padding:5px 10px}.pos-order-items .order-items .order-item[data-v-a637bae6]:nth-child(2n){background:#f8f8f9}.pos-order-items .order-items .order-item[data-v-a637bae6]:last-child{border-bottom:0}.pos-order-items .order-items .order-item .combo[data-v-a637bae6]{padding-bottom:5px}.pos-order-items .order-items .order-item .combo[data-v-a637bae6]:last-child{padding-bottom:0}.pos-order-items .order-items .order-item .combo-item[data-v-a637bae6],.pos-order-items .order-items .order-item .item[data-v-a637bae6]{align-items:center;display:flex;justify-content:center}.pos-order-items .order-items .order-item .combo-item .index[data-v-a637bae6],.pos-order-items .order-items .order-item .item .index[data-v-a637bae6]{font-weight:700;margin-right:10px;width:20px}.pos-order-items .order-items .order-item .combo-item .details[data-v-a637bae6],.pos-order-items .order-items .order-item .item .details[data-v-a637bae6]{flex:1}.pos-order-items .order-items .order-item .combo-item .quantity[data-v-a637bae6],.pos-order-items .order-items .order-item .item .quantity[data-v-a637bae6]{width:70px}.pos-order-items .order-items .order-item .combo-item .quantity .ivu-input-number[data-v-a637bae6],.pos-order-items .order-items .order-item .item .quantity .ivu-input-number[data-v-a637bae6]{width:100%!important}.pos-order-items .order-items .order-item .combo-item .subtotal[data-v-a637bae6],.pos-order-items .order-items .order-item .item .subtotal[data-v-a637bae6]{font-weight:700;padding-right:10px;text-align:right;width:100px}.pos-order-items .order-items .order-item .item[data-v-a637bae6]{margin-bottom:5px}.pos-order-items .order-items .order-item .combo-item[data-v-a637bae6]{border-top:1px dotted #dddee1;line-height:24px}.pos-order-items .order-items .order-item .combo-item .input[data-v-a637bae6]{background-color:#f5f7f9;border:1px solid #dcdee2;border-radius:4px;height:24px;padding:0 7px}.pos-order-items .order-items .order-item .bg[data-v-a637bae6]{background:#fcfcfc}.pos-order-items .order-items .order-item .bt0[data-v-a637bae6]{border-top:0}.pos-order-items .order-items .order-item .bb[data-v-a637bae6]{border-bottom:1px dotted #dddee1}.pos-order-items .order-items .order-item .variation[data-v-a637bae6]{border-top:1px dotted #dddee1;padding-bottom:4px;padding-top:4px}.pos-order-items .order-items .order-item .variation[data-v-a637bae6]:last-child{padding-bottom:0}.quick-cash.ivu-btn-group[data-v-a637bae6]{display:flex;width:100%}.quick-cash.ivu-btn-group .ivu-btn[data-v-a637bae6]{flex-grow:1}.quick-cash.ivu-btn-group .ivu-btn.total[data-v-a637bae6]{flex-grow:3}.pos-order-actions[data-v-a637bae6]{bottom:0;display:flex;position:absolute;width:100%}.pos-order-actions.ivu-btn-group[data-v-a637bae6]{width:100%}.pos-order-actions.ivu-btn-group .ivu-btn[data-v-a637bae6]{border-radius:0!important}.pos-order-actions.ivu-btn-group .ivu-btn.ivu-btn-success[data-v-a637bae6]{border-color:#19be6b}.pos-order-actions .ivu-btn-group[data-v-a637bae6]{display:flex;width:100%}.pos-order-actions .ivu-btn-group .btn.btn-payment[data-v-a637bae6]{flex-grow:3}.pos-order-actions .ivu-btn[data-v-a637bae6]{border-radius:0!important}.ivu-btn-large[data-v-a637bae6]{padding:8px 15px}.btn[data-v-a637bae6],.btn-actions[data-v-a637bae6]{border-bottom:0}.btn-actions[data-v-a637bae6]{border-left:0;border-right:0}.btn-actions[data-v-a637bae6]:hover{border-color:#dddee1}.below-order-items[data-v-a637bae6]{background-color:#f5f5f6;height:40px}.below-order-items .order-total[data-v-a637bae6]{border-bottom:1px solid #dddee1;border-top:1px solid #dddee1;line-height:38px}.below-order-items .order-total .total[data-v-a637bae6]{font-weight:700;padding:0 10px}.below-order-items .order-total .total .amount[data-v-a637bae6]{float:right;padding-right:5px}.ivu-drawer[data-v-a637bae6]{width:400px!important}.ivu-drawer .drawer-footer[data-v-a637bae6]{background:#fff;border-top:1px solid #e8e8e8;bottom:0;left:0;padding:10px 16px;position:absolute;text-align:right;width:100%}.payment-table[data-v-a637bae6]{font-size:16px;letter-spacing:1px}.payment-table .table[data-v-a637bae6],.payment-table.table-wrapper[data-v-a637bae6]{border-color:#fff;border-radius:4px}.payment-table .table td[data-v-a637bae6],.payment-table .table th[data-v-a637bae6]{background:transparent;border:0;font-weight:700;height:36px}.payment-table .table tr:first-child td[data-v-a637bae6]:first-child{border-top-left-radius:4px}.payment-table .table tr:first-child td[data-v-a637bae6]:last-child{border-top-right-radius:4px}.payment-table .table tr:last-child td[data-v-a637bae6]:first-child{border-bottom-left-radius:4px}.payment-table .table tr:last-child td[data-v-a637bae6]:last-child{border-bottom-right-radius:4px}.ivu-btn-text[data-v-a637bae6]:focus{box-shadow:none}.pos-order[data-v-a637bae6]{box-shadow:0 0 20px rgba(0,0,0,.2);margin-left:auto;min-height:100vh;top:0;width:450px;z-index:10}@media (max-width:650px){.pos-order[data-v-a637bae6]{margin-left:0;max-width:100%;width:100%}}.pos-order .index.align-top[data-v-a637bae6]{align-self:flex-start}.pos-order .detail[data-v-a637bae6]{flex:1}.pos-order-scroll[data-v-a637bae6]{height:calc(100vh - 134px)}.quantity[data-v-a637bae6]{text-align:center}",""]);const i=o},24936:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,"body[data-v-17a8978f],html[data-v-17a8978f]{height:100%;margin:0;overflow:hidden;padding:0;width:100%}.pos-contents[data-v-17a8978f]{height:calc(100vh - 50px);overflow:hidden}.categories[data-v-17a8978f]{height:calc(100vh - 50px)!important;overflow-x:hidden!important;overflow-y:auto!important}.scan[data-v-17a8978f]{float:left;height:49px;line-height:49px;margin-left:10px;width:175px}.top-menu[data-v-17a8978f]{float:right}.layout-pos[data-v-17a8978f]{height:calc(100vh - 46px)}.order-items[data-v-17a8978f]{background:#fff;border:0;height:100%;z-index:6}.content[data-v-17a8978f]{height:calc(100vh - 50px);overflow:hidden;position:relative}.pos-grid[data-v-17a8978f]{background:#f8f8f9;display:block}.pos-grid-scroll[data-v-17a8978f]{height:calc(100vh - 130px)}@media (max-width:767px){.pos-grid-scroll[data-v-17a8978f]{height:calc(100vh - 140px)}}.pos-grid a[data-v-17a8978f]{color:#495060;display:inline-block;height:160px;margin:15px 0 0 15px;transition:all .1s ease-in-out;width:150px}.pos-grid a[data-v-17a8978f]:hover{color:#2d8cf0}.above-grid[data-v-17a8978f]{background-color:#f5f5f6;border-bottom:1px solid #dddee1;display:block;font-weight:700;height:40px;line-height:40px;overflow:hidden;padding:0 16px;width:100%}.above-grid .category-cascader[data-v-17a8978f]{display:inline-block;width:auto}.below-grid[data-v-17a8978f]{background:#f5f5f6;border-top:1px solid #dddee1;bottom:0;height:40px;line-height:40px;overflow:hidden;padding:0;position:absolute;width:100%}@media (max-width:767px){.below-grid[data-v-17a8978f]{height:50px;line-height:50px}}.ivu-spin-fix[data-v-17a8978f]{z-index:1100}.ivu-table-wrapper[data-v-17a8978f],.ivu-table .ivu-table-header table[data-v-17a8978f]{border:0!important}.ivu-table[data-v-17a8978f]:after,.ivu-table[data-v-17a8978f]:before{display:none}textarea.ivu-input[data-v-17a8978f]{font-size:12px!important}.sidebar-light .btn-settings[data-v-17a8978f]{background:#f5f5f6;border-color:#dddee1;color:#495060}.close[data-v-17a8978f]{color:#fff;display:inline-block;float:left;height:50px;line-height:50px;margin-left:-20px;text-align:center;width:50px}.close.order-icon[data-v-17a8978f]{float:right;font-size:18px}.header-light .close[data-v-17a8978f]{color:#495060}.category-name[data-v-17a8978f]{position:absolute;top:0;z-index:5}.other-buttons[data-v-17a8978f]{align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between}.other-buttons button[data-v-17a8978f]{margin-right:10px;margin-top:10px}.other-buttons button[data-v-17a8978f]:last-child{margin-right:0}@media (max-width:480px){.other-buttons div[data-v-17a8978f]{width:100%}.other-buttons button[data-v-17a8978f]{margin-right:0;width:100%}}@media (max-width:992px){.ivu-select-dropdown[data-v-17a8978f]{left:auto!important;right:2px!important}}@media (max-width:768px){.visible-sm[data-v-17a8978f]{display:inline-block!important}.layout-logo .logo[data-v-17a8978f]{padding-left:0}.top-menu[data-v-17a8978f]{float:left}.close[data-v-17a8978f]{display:inline-block;height:50px;line-height:50px;text-align:center;width:50px}.ivu-layout-sider.ivu-layout-sider-zero-width.ivu-layout-sider-collapsed[data-v-17a8978f]{height:0}.ivu-layout.ivu-layout-has-sider .ivu-layout-sider[data-v-17a8978f]{height:calc(100% - 50px)!important}}@media (max-width:575px){.ivu-layout-sider[data-v-17a8978f]{top:50px}}@media (max-width:480px){.order-items[data-v-17a8978f]{border-left:0}}.table[data-v-17a8978f]{border:1px solid #e8eaec;border-radius:4px;padding:16px}.table[data-v-17a8978f]:hover{background:#495060;border-color:#495060}.table.active[data-v-17a8978f],.table[data-v-17a8978f]:hover{box-shadow:0 4px 12px rgba(0,0,0,.15);color:#fff}.table.active[data-v-17a8978f]{background:#19be6b;border-color:#16a75e}",""]);const i=o},1218:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".pos-grid-item{border-radius:4px;box-shadow:0 1px 1px 0 rgba(0,0,0,.1);float:left;position:relative;text-align:center;width:150px}.pos-grid-item .ivu-card{border:0}.pos-grid-item .ivu-card-body{border-radius:4px;height:160px;overflow:hidden;padding:0!important}.pos-grid-item img{max-height:120px;max-width:100%;transition:all .2s ease-in-out}.pos-grid-item .pos-grid-item-name{align-content:center;background:#fff;border-radius:0 0 4px 4px;bottom:0;display:flex;justify-content:center;max-height:80px;min-height:60px;padding:10px;position:absolute;text-align:center;width:150px}.pos-grid-item .pos-grid-item-name h4{font-weight:400;margin:0 auto}.pos-grid-item:hover{box-shadow:0 1px 6px rgba(0,0,0,.2)}.pos-grid-item:hover img{transform:scale(1.2)!important}@media (max-width:992px){.pos-grid-item{margin:5px;width:140px}.pos-grid-item .ivu-card-body{height:160px}.pos-grid-item .pos-grid-item-name{width:140px}}",""]);const i=o},59501:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".pos-order[data-v-48adf80b]{box-shadow:0 4px 12px rgba(0,0,0,.15);height:calc(100vh - 50px);position:relative}.pos-order-items[data-v-48adf80b]{overflow:hidden;position:relative}.pos-order-scroll[data-v-48adf80b]{height:calc(100vh - 224px);margin-bottom:-4px;margin-top:-1px}.above-order-items[data-v-48adf80b]{background-color:#f5f5f6;display:block;height:65px}.above-order-items .order-info[data-v-48adf80b],.above-order-items .order-sub-details[data-v-48adf80b]{border-bottom:1px solid #dddee1;display:flex;padding:0 10px}.above-order-items .order-info .ivu-dropdown[data-v-48adf80b],.above-order-items .order-sub-details .ivu-dropdown[data-v-48adf80b]{font-weight:700}.above-order-items .order-info .details[data-v-48adf80b],.above-order-items .order-sub-details .details[data-v-48adf80b]{flex:1}.above-order-items .order-info button[data-v-48adf80b],.above-order-items .order-sub-details button[data-v-48adf80b]{font-weight:700}.above-order-items .order-info[data-v-48adf80b]{height:40px;line-height:40px}.above-order-items .order-sub-details[data-v-48adf80b]{height:25px;line-height:25px}.pos-order-items .order-items[data-v-48adf80b]{border:0}.pos-order-items .order-items .header[data-v-48adf80b]{align-items:center;background:#515a6e;border:none;border-bottom:1px solid #dddee1;color:#fff;display:flex;font-weight:700;justify-content:center;padding:6px 10px}.pos-order-items .order-items .header .index[data-v-48adf80b]{margin-right:10px;text-align:center;width:20px}.pos-order-items .order-items .header .details[data-v-48adf80b]{flex:1}.pos-order-items .order-items .header .quantity[data-v-48adf80b]{text-align:center;width:70px}.pos-order-items .order-items .header .subtotal[data-v-48adf80b]{padding-right:10px;text-align:right;width:100px}.pos-order-items .order-items .order-item[data-v-48adf80b]{border-bottom:1px solid #dddee1;padding:5px 10px}.pos-order-items .order-items .order-item[data-v-48adf80b]:nth-child(2n){background:#f8f8f9}.pos-order-items .order-items .order-item[data-v-48adf80b]:last-child{border-bottom:0}.pos-order-items .order-items .order-item .combo[data-v-48adf80b]{padding-bottom:5px}.pos-order-items .order-items .order-item .combo[data-v-48adf80b]:last-child{padding-bottom:0}.pos-order-items .order-items .order-item .combo-item[data-v-48adf80b],.pos-order-items .order-items .order-item .item[data-v-48adf80b]{align-items:center;display:flex;justify-content:center}.pos-order-items .order-items .order-item .combo-item .index[data-v-48adf80b],.pos-order-items .order-items .order-item .item .index[data-v-48adf80b]{font-weight:700;margin-right:10px;width:20px}.pos-order-items .order-items .order-item .combo-item .details[data-v-48adf80b],.pos-order-items .order-items .order-item .item .details[data-v-48adf80b]{flex:1}.pos-order-items .order-items .order-item .combo-item .quantity[data-v-48adf80b],.pos-order-items .order-items .order-item .item .quantity[data-v-48adf80b]{width:70px}.pos-order-items .order-items .order-item .combo-item .quantity .ivu-input-number[data-v-48adf80b],.pos-order-items .order-items .order-item .item .quantity .ivu-input-number[data-v-48adf80b]{width:100%!important}.pos-order-items .order-items .order-item .combo-item .subtotal[data-v-48adf80b],.pos-order-items .order-items .order-item .item .subtotal[data-v-48adf80b]{font-weight:700;padding-right:10px;text-align:right;width:100px}.pos-order-items .order-items .order-item .item[data-v-48adf80b]{margin-bottom:5px}.pos-order-items .order-items .order-item .combo-item[data-v-48adf80b]{border-top:1px dotted #dddee1;line-height:24px}.pos-order-items .order-items .order-item .combo-item .input[data-v-48adf80b]{background-color:#f5f7f9;border:1px solid #dcdee2;border-radius:4px;height:24px;padding:0 7px}.pos-order-items .order-items .order-item .bg[data-v-48adf80b]{background:#fcfcfc}.pos-order-items .order-items .order-item .bt0[data-v-48adf80b]{border-top:0}.pos-order-items .order-items .order-item .bb[data-v-48adf80b]{border-bottom:1px dotted #dddee1}.pos-order-items .order-items .order-item .variation[data-v-48adf80b]{border-top:1px dotted #dddee1;padding-bottom:4px;padding-top:4px}.pos-order-items .order-items .order-item .variation[data-v-48adf80b]:last-child{padding-bottom:0}.quick-cash.ivu-btn-group[data-v-48adf80b]{display:flex;width:100%}.quick-cash.ivu-btn-group .ivu-btn[data-v-48adf80b]{flex-grow:1}.quick-cash.ivu-btn-group .ivu-btn.total[data-v-48adf80b]{flex-grow:3}.pos-order-actions[data-v-48adf80b]{bottom:0;display:flex;position:absolute;width:100%}.pos-order-actions.ivu-btn-group[data-v-48adf80b]{width:100%}.pos-order-actions.ivu-btn-group .ivu-btn[data-v-48adf80b]{border-radius:0!important}.pos-order-actions.ivu-btn-group .ivu-btn.ivu-btn-success[data-v-48adf80b]{border-color:#19be6b}.pos-order-actions .ivu-btn-group[data-v-48adf80b]{display:flex;width:100%}.pos-order-actions .ivu-btn-group .btn.btn-payment[data-v-48adf80b]{flex-grow:3}.pos-order-actions .ivu-btn[data-v-48adf80b]{border-radius:0!important}.ivu-btn-large[data-v-48adf80b]{padding:8px 15px}.btn[data-v-48adf80b],.btn-actions[data-v-48adf80b]{border-bottom:0}.btn-actions[data-v-48adf80b]{border-left:0;border-right:0}.btn-actions[data-v-48adf80b]:hover{border-color:#dddee1}.below-order-items[data-v-48adf80b]{background-color:#f5f5f6;height:40px}.below-order-items .order-total[data-v-48adf80b]{border-bottom:1px solid #dddee1;border-top:1px solid #dddee1;line-height:38px}.below-order-items .order-total .total[data-v-48adf80b]{font-weight:700;padding:0 10px}.below-order-items .order-total .total .amount[data-v-48adf80b]{float:right;padding-right:5px}.ivu-drawer[data-v-48adf80b]{width:400px!important}.ivu-drawer .drawer-footer[data-v-48adf80b]{background:#fff;border-top:1px solid #e8e8e8;bottom:0;left:0;padding:10px 16px;position:absolute;text-align:right;width:100%}.payment-table[data-v-48adf80b]{font-size:16px;letter-spacing:1px}.payment-table .table[data-v-48adf80b],.payment-table.table-wrapper[data-v-48adf80b]{border-color:#fff;border-radius:4px}.payment-table .table td[data-v-48adf80b],.payment-table .table th[data-v-48adf80b]{background:transparent;border:0;font-weight:700;height:36px}.payment-table .table tr:first-child td[data-v-48adf80b]:first-child{border-top-left-radius:4px}.payment-table .table tr:first-child td[data-v-48adf80b]:last-child{border-top-right-radius:4px}.payment-table .table tr:last-child td[data-v-48adf80b]:first-child{border-bottom-left-radius:4px}.payment-table .table tr:last-child td[data-v-48adf80b]:last-child{border-bottom-right-radius:4px}.ivu-btn-text[data-v-48adf80b]:focus{box-shadow:none}",""]);const i=o},77613:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ivu-menu-vertical .ivu-menu-item-group-title,.ivu-menu-vertical .ivu-menu-submenu-title{padding-left:16px!important}.ivu-menu-vertical .ivu-menu{background:rgba(0,0,0,.05)!important;margin-left:-8px}.ivu-menu-vertical .ivu-menu-submenu .ivu-menu-item{padding-left:24px!important}.ivu-menu-vertical .ivu-menu-submenu .ivu-menu-submenu{padding-left:8px!important}.ivu-menu-vertical .ivu-menu-item-group-title{height:30px;line-height:30px}.ps__scrollbar-y-rail{z-index:999}",""]);const i=o},18552:(t,e,r)=>{var n=r(10852)(r(55639),"DataView");t.exports=n},1989:(t,e,r)=>{var n=r(51789),o=r(80401),i=r(57667),a=r(21327),s=r(81866);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},38407:(t,e,r)=>{var n=r(27040),o=r(14125),i=r(82117),a=r(67518),s=r(54705);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},57071:(t,e,r)=>{var n=r(10852)(r(55639),"Map");t.exports=n},83369:(t,e,r)=>{var n=r(24785),o=r(11285),i=r(96e3),a=r(49916),s=r(95265);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},53818:(t,e,r)=>{var n=r(10852)(r(55639),"Promise");t.exports=n},58525:(t,e,r)=>{var n=r(10852)(r(55639),"Set");t.exports=n},88668:(t,e,r)=>{var n=r(83369),o=r(90619),i=r(72385);function a(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},46384:(t,e,r)=>{var n=r(38407),o=r(37465),i=r(63779),a=r(67599),s=r(44758),c=r(34309);function l(t){var e=this.__data__=new n(t);this.size=e.size}l.prototype.clear=o,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=c,t.exports=l},11149:(t,e,r)=>{var n=r(55639).Uint8Array;t.exports=n},70577:(t,e,r)=>{var n=r(10852)(r(55639),"WeakMap");t.exports=n},34963:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}},14636:(t,e,r)=>{var n=r(22545),o=r(35694),i=r(1469),a=r(44144),s=r(65776),c=r(36719),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=i(t),u=!r&&o(t),d=!r&&!u&&a(t),p=!r&&!u&&!d&&c(t),m=r||u||d||p,f=m?n(t.length,String):[],h=f.length;for(var v in t)!e&&!l.call(t,v)||m&&("length"==v||d&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,h))||f.push(v);return f}},62488:t=>{t.exports=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}},82908:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}},18470:(t,e,r)=>{var n=r(77813);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},68866:(t,e,r)=>{var n=r(62488),o=r(1469);t.exports=function(t,e,r){var i=e(t);return o(t)?i:n(i,r(t))}},9454:(t,e,r)=>{var n=r(44239),o=r(37005);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},90939:(t,e,r)=>{var n=r(2492),o=r(37005);t.exports=function t(e,r,i,a,s){return e===r||(null==e||null==r||!o(e)&&!o(r)?e!=e&&r!=r:n(e,r,i,a,t,s))}},2492:(t,e,r)=>{var n=r(46384),o=r(67114),i=r(18351),a=r(16096),s=r(64160),c=r(1469),l=r(44144),u=r(36719),d="[object Arguments]",p="[object Array]",m="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,h,v,_){var g=c(t),b=c(e),y=g?p:s(t),x=b?p:s(e),$=(y=y==d?m:y)==m,w=(x=x==d?m:x)==m,C=y==x;if(C&&l(t)){if(!l(e))return!1;g=!0,$=!1}if(C&&!$)return _||(_=new n),g||u(t)?o(t,e,r,h,v,_):i(t,e,y,r,h,v,_);if(!(1&r)){var k=$&&f.call(t,"__wrapped__"),O=w&&f.call(e,"__wrapped__");if(k||O){var I=k?t.value():t,S=O?e.value():e;return _||(_=new n),v(I,S,r,h,_)}}return!!C&&(_||(_=new n),a(t,e,r,h,v,_))}},79190:(t,e,r)=>{var n=r(23560),o=r(15346),i=r(13218),a=r(80346),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(n(t)?p:s).test(a(t))}},38749:(t,e,r)=>{var n=r(44239),o=r(41780),i=r(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[n(t)]}},280:(t,e,r)=>{var n=r(25726),o=r(86916),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=[];for(var r in Object(t))i.call(t,r)&&"constructor"!=r&&e.push(r);return e}},22545:t=>{t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},7518:t=>{t.exports=function(t){return function(e){return t(e)}}},74757:t=>{t.exports=function(t,e){return t.has(e)}},14429:(t,e,r)=>{var n=r(55639)["__core-js_shared__"];t.exports=n},67114:(t,e,r)=>{var n=r(88668),o=r(82908),i=r(74757);t.exports=function(t,e,r,a,s,c){var l=1&r,u=t.length,d=e.length;if(u!=d&&!(l&&d>u))return!1;var p=c.get(t),m=c.get(e);if(p&&m)return p==e&&m==t;var f=-1,h=!0,v=2&r?new n:void 0;for(c.set(t,e),c.set(e,t);++f<u;){var _=t[f],g=e[f];if(a)var b=l?a(g,_,f,e,t,c):a(_,g,f,t,e,c);if(void 0!==b){if(b)continue;h=!1;break}if(v){if(!o(e,(function(t,e){if(!i(v,e)&&(_===t||s(_,t,r,a,c)))return v.push(e)}))){h=!1;break}}else if(_!==g&&!s(_,g,r,a,c)){h=!1;break}}return c.delete(t),c.delete(e),h}},18351:(t,e,r)=>{var n=r(62705),o=r(11149),i=r(77813),a=r(67114),s=r(68776),c=r(21814),l=n?n.prototype:void 0,u=l?l.valueOf:void 0;t.exports=function(t,e,r,n,l,d,p){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!d(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var m=s;case"[object Set]":var f=1&n;if(m||(m=c),t.size!=e.size&&!f)return!1;var h=p.get(t);if(h)return h==e;n|=2,p.set(t,e);var v=a(m(t),m(e),n,l,d,p);return p.delete(t),v;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},16096:(t,e,r)=>{var n=r(58234),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,i,a,s){var c=1&r,l=n(t),u=l.length;if(u!=n(e).length&&!c)return!1;for(var d=u;d--;){var p=l[d];if(!(c?p in e:o.call(e,p)))return!1}var m=s.get(t),f=s.get(e);if(m&&f)return m==e&&f==t;var h=!0;s.set(t,e),s.set(e,t);for(var v=c;++d<u;){var _=t[p=l[d]],g=e[p];if(i)var b=c?i(g,_,p,e,t,s):i(_,g,p,t,e,s);if(!(void 0===b?_===g||a(_,g,r,i,s):b)){h=!1;break}v||(v="constructor"==p)}if(h&&!v){var y=t.constructor,x=e.constructor;y==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x||(h=!1)}return s.delete(t),s.delete(e),h}},58234:(t,e,r)=>{var n=r(68866),o=r(99551),i=r(3674);t.exports=function(t){return n(t,i,o)}},45050:(t,e,r)=>{var n=r(37019);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},10852:(t,e,r)=>{var n=r(79190),o=r(47801);t.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},99551:(t,e,r)=>{var n=r(34963),o=r(70479),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),n(a(t),(function(e){return i.call(t,e)})))}:o;t.exports=s},64160:(t,e,r)=>{var n=r(18552),o=r(57071),i=r(53818),a=r(58525),s=r(70577),c=r(44239),l=r(80346),u="[object Map]",d="[object Promise]",p="[object Set]",m="[object WeakMap]",f="[object DataView]",h=l(n),v=l(o),_=l(i),g=l(a),b=l(s),y=c;(n&&y(new n(new ArrayBuffer(1)))!=f||o&&y(new o)!=u||i&&y(i.resolve())!=d||a&&y(new a)!=p||s&&y(new s)!=m)&&(y=function(t){var e=c(t),r="[object Object]"==e?t.constructor:void 0,n=r?l(r):"";if(n)switch(n){case h:return f;case v:return u;case _:return d;case g:return p;case b:return m}return e}),t.exports=y},47801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},51789:(t,e,r)=>{var n=r(94536);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},80401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},57667:(t,e,r)=>{var n=r(94536),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(e,t)?e[t]:void 0}},21327:(t,e,r)=>{var n=r(94536),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},81866:(t,e,r)=>{var n=r(94536);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},65776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}},37019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},15346:(t,e,r)=>{var n,o=r(14429),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!i&&i in t}},25726:t=>{var e=Object.prototype;t.exports=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}},27040:t=>{t.exports=function(){this.__data__=[],this.size=0}},14125:(t,e,r)=>{var n=r(18470),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0)&&(r==e.length-1?e.pop():o.call(e,r,1),--this.size,!0)}},82117:(t,e,r)=>{var n=r(18470);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},67518:(t,e,r)=>{var n=r(18470);t.exports=function(t){return n(this.__data__,t)>-1}},54705:(t,e,r)=>{var n=r(18470);t.exports=function(t,e){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}},24785:(t,e,r)=>{var n=r(1989),o=r(38407),i=r(57071);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},11285:(t,e,r)=>{var n=r(45050);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},96e3:(t,e,r)=>{var n=r(45050);t.exports=function(t){return n(this,t).get(t)}},49916:(t,e,r)=>{var n=r(45050);t.exports=function(t){return n(this,t).has(t)}},95265:(t,e,r)=>{var n=r(45050);t.exports=function(t,e){var r=n(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}},68776:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}},94536:(t,e,r)=>{var n=r(10852)(Object,"create");t.exports=n},86916:(t,e,r)=>{var n=r(5569)(Object.keys,Object);t.exports=n},31167:(t,e,r)=>{t=r.nmd(t);var n=r(31957),o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,a=i&&i.exports===o&&n.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},5569:t=>{t.exports=function(t,e){return function(r){return t(e(r))}}},90619:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},72385:t=>{t.exports=function(t){return this.__data__.has(t)}},21814:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}},37465:(t,e,r)=>{var n=r(38407);t.exports=function(){this.__data__=new n,this.size=0}},63779:t=>{t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},67599:t=>{t.exports=function(t){return this.__data__.get(t)}},44758:t=>{t.exports=function(t){return this.__data__.has(t)}},34309:(t,e,r)=>{var n=r(38407),o=r(57071),i=r(83369);t.exports=function(t,e){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(t,e),this.size=r.size,this}},80346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},77813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},35694:(t,e,r)=>{var n=r(9454),o=r(37005),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=c},1469:t=>{var e=Array.isArray;t.exports=e},98612:(t,e,r)=>{var n=r(23560),o=r(41780);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},44144:(t,e,r)=>{t=r.nmd(t);var n=r(55639),o=r(95062),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;t.exports=c},18446:(t,e,r)=>{var n=r(90939);t.exports=function(t,e){return n(t,e)}},23560:(t,e,r)=>{var n=r(44239),o=r(13218);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},41780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},36719:(t,e,r)=>{var n=r(38749),o=r(7518),i=r(31167),a=i&&i.isTypedArray,s=a?o(a):n;t.exports=s},3674:(t,e,r)=>{var n=r(14636),o=r(280),i=r(98612);t.exports=function(t){return i(t)?n(t):o(t)}},70479:t=>{t.exports=function(){return[]}},95062:t=>{t.exports=function(){return!1}},32086:function(t){t.exports=function(){var t={9662:function(t,e,r){var n=r(614),o=r(6330);t.exports=function(t){if(n(t))return t;throw TypeError(o(t)+" is not a function")}},9483:function(t,e,r){var n=r(4411),o=r(6330);t.exports=function(t){if(n(t))return t;throw TypeError(o(t)+" is not a constructor")}},6077:function(t,e,r){var n=r(614);t.exports=function(t){if("object"==typeof t||n(t))return t;throw TypeError("Can't set "+String(t)+" as a prototype")}},1223:function(t,e,r){var n=r(5112),o=r(30),i=r(3070),a=n("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},1530:function(t,e,r){"use strict";var n=r(8710).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},9670:function(t,e,r){var n=r(111);t.exports=function(t){if(n(t))return t;throw TypeError(String(t)+" is not an object")}},8533:function(t,e,r){"use strict";var n=r(2092).forEach,o=r(9341)("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},8457:function(t,e,r){"use strict";var n=r(9974),o=r(7908),i=r(3411),a=r(7659),s=r(4411),c=r(6244),l=r(6135),u=r(8554),d=r(1246);t.exports=function(t){var e=o(t),r=s(this),p=arguments.length,m=p>1?arguments[1]:void 0,f=void 0!==m;f&&(m=n(m,p>2?arguments[2]:void 0,2));var h,v,_,g,b,y,x=d(e),$=0;if(!x||this==Array&&a(x))for(h=c(e),v=r?new this(h):Array(h);h>$;$++)y=f?m(e[$],$):e[$],l(v,$,y);else for(b=(g=u(e,x)).next,v=r?new this:[];!(_=b.call(g)).done;$++)y=f?i(g,m,[_.value,$],!0):_.value,l(v,$,y);return v.length=$,v}},1318:function(t,e,r){var n=r(5656),o=r(1400),i=r(6244),a=function(t){return function(e,r,a){var s,c=n(e),l=i(c),u=o(a,l);if(t&&r!=r){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===r)return t||u||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},2092:function(t,e,r){var n=r(9974),o=r(8361),i=r(7908),a=r(6244),s=r(5417),c=[].push,l=function(t){var e=1==t,r=2==t,l=3==t,u=4==t,d=6==t,p=7==t,m=5==t||d;return function(f,h,v,_){for(var g,b,y=i(f),x=o(y),$=n(h,v,3),w=a(x),C=0,k=_||s,O=e?k(f,w):r||p?k(f,0):void 0;w>C;C++)if((m||C in x)&&(b=$(g=x[C],C,y),t))if(e)O[C]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return C;case 2:c.call(O,g)}else switch(t){case 4:return!1;case 7:c.call(O,g)}return d?-1:l||u?u:O}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},1194:function(t,e,r){var n=r(7293),o=r(5112),i=r(7392),a=o("species");t.exports=function(t){return i>=51||!n((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:function(t,e,r){"use strict";var n=r(7293);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},3671:function(t,e,r){var n=r(9662),o=r(7908),i=r(8361),a=r(6244),s=function(t){return function(e,r,s,c){n(r);var l=o(e),u=i(l),d=a(l),p=t?d-1:0,m=t?-1:1;if(s<2)for(;;){if(p in u){c=u[p],p+=m;break}if(p+=m,t?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=m)p in u&&(c=r(c,u[p],p,l));return c}};t.exports={left:s(!1),right:s(!0)}},4362:function(t){var e=Math.floor,r=function(t,i){var a=t.length,s=e(a/2);return a<8?n(t,i):o(r(t.slice(0,s),i),r(t.slice(s),i),i)},n=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},o=function(t,e,r){for(var n=t.length,o=e.length,i=0,a=0,s=[];i<n||a<o;)i<n&&a<o?s.push(r(t[i],e[a])<=0?t[i++]:e[a++]):s.push(i<n?t[i++]:e[a++]);return s};t.exports=r},7475:function(t,e,r){var n=r(3157),o=r(4411),i=r(111),a=r(5112)("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,(o(e)&&(e===Array||n(e.prototype))||i(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?Array:e}},5417:function(t,e,r){var n=r(7475);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},3411:function(t,e,r){var n=r(9670),o=r(9212);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){o(t,"throw",e)}}},7072:function(t,e,r){var n=r(5112)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},4326:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},648:function(t,e,r){var n=r(1694),o=r(614),i=r(4326),a=r(5112)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),a))?r:s?i(e):"Object"==(n=i(e))&&o(e.callee)?"Arguments":n}},9920:function(t,e,r){var n=r(2597),o=r(3887),i=r(1236),a=r(3070);t.exports=function(t,e){for(var r=o(e),s=a.f,c=i.f,l=0;l<r.length;l++){var u=r[l];n(t,u)||s(t,u,c(e,u))}}},4964:function(t,e,r){var n=r(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},8544:function(t,e,r){var n=r(7293);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4994:function(t,e,r){"use strict";var n=r(3383).IteratorPrototype,o=r(30),i=r(9114),a=r(8003),s=r(7497),c=function(){return this};t.exports=function(t,e,r){var l=e+" Iterator";return t.prototype=o(n,{next:i(1,r)}),a(t,l,!1,!0),s[l]=c,t}},8880:function(t,e,r){var n=r(9781),o=r(3070),i=r(9114);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,r){"use strict";var n=r(4948),o=r(3070),i=r(9114);t.exports=function(t,e,r){var a=n(e);a in t?o.f(t,a,i(0,r)):t[a]=r}},654:function(t,e,r){"use strict";var n=r(2109),o=r(1913),i=r(6530),a=r(614),s=r(4994),c=r(9518),l=r(7674),u=r(8003),d=r(8880),p=r(1320),m=r(5112),f=r(7497),h=r(3383),v=i.PROPER,_=i.CONFIGURABLE,g=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,y=m("iterator"),x="keys",$="values",w="entries",C=function(){return this};t.exports=function(t,e,r,i,m,h,k){s(r,e,i);var O,I,S,F=function(t){if(t===m&&j)return j;if(!b&&t in E)return E[t];switch(t){case x:case $:case w:return function(){return new r(this,t)}}return function(){return new r(this)}},T=e+" Iterator",q=!1,E=t.prototype,P=E[y]||E["@@iterator"]||m&&E[m],j=!b&&P||F(m),A="Array"==e&&E.entries||P;if(A&&(O=c(A.call(new t)))!==Object.prototype&&O.next&&(o||c(O)===g||(l?l(O,g):a(O[y])||p(O,y,C)),u(O,T,!0,!0),o&&(f[T]=C)),v&&m==$&&P&&P.name!==$&&(!o&&_?d(E,"name",$):(q=!0,j=function(){return P.call(this)})),m)if(I={values:F($),keys:h?j:F(x),entries:F(w)},k)for(S in I)(b||q||!(S in E))&&p(E,S,I[S]);else n({target:e,proto:!0,forced:b||q},I);return o&&!k||E[y]===j||p(E,y,j,{name:m}),f[e]=j,I}},7235:function(t,e,r){var n=r(857),o=r(2597),i=r(6061),a=r(3070).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},9781:function(t,e,r){var n=r(7293);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,r){var n=r(7854),o=r(111),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(t,e,r){var n=r(317)("span").classList,o=n&&n.constructor&&n.constructor.prototype;t.exports=o===Object.prototype?void 0:o},8886:function(t,e,r){var n=r(8113).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},256:function(t,e,r){var n=r(8113);t.exports=/MSIE|Trident/.test(n)},5268:function(t,e,r){var n=r(4326),o=r(7854);t.exports="process"==n(o.process)},8113:function(t,e,r){var n=r(5005);t.exports=n("navigator","userAgent")||""},7392:function(t,e,r){var n,o,i=r(7854),a=r(8113),s=i.process,c=i.Deno,l=s&&s.versions||c&&c.version,u=l&&l.v8;u?o=(n=u.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=n[1]),t.exports=o&&+o},8008:function(t,e,r){var n=r(8113).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,r){var n=r(7854),o=r(1236).f,i=r(8880),a=r(1320),s=r(3505),c=r(9920),l=r(4705);t.exports=function(t,e){var r,u,d,p,m,f=t.target,h=t.global,v=t.stat;if(r=h?n:v?n[f]||s(f,{}):(n[f]||{}).prototype)for(u in e){if(p=e[u],d=t.noTargetGet?(m=o(r,u))&&m.value:r[u],!l(h?u:f+(v?".":"#")+u,t.forced)&&void 0!==d){if(typeof p==typeof d)continue;c(p,d)}(t.sham||d&&d.sham)&&i(p,"sham",!0),a(r,u,p,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:function(t,e,r){"use strict";r(4916);var n=r(1320),o=r(2261),i=r(7293),a=r(5112),s=r(8880),c=a("species"),l=RegExp.prototype;t.exports=function(t,e,r,u){var d=a(t),p=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),m=p&&!i((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[c]=function(){return r},r.flags="",r[d]=/./[d]),r.exec=function(){return e=!0,null},r[d](""),!e}));if(!p||!m||r){var f=/./[d],h=e(d,""[t],(function(t,e,r,n,i){var a=e.exec;return a===o||a===l.exec?p&&!i?{done:!0,value:f.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}));n(String.prototype,t,h[0]),n(l,d,h[1])}u&&s(l[d],"sham",!0)}},9974:function(t,e,r){var n=r(9662);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},6530:function(t,e,r){var n=r(9781),o=r(2597),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),c=s&&"something"===function(){}.name,l=s&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},5005:function(t,e,r){var n=r(7854),o=r(614),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t]):n[t]&&n[t][e]}},1246:function(t,e,r){var n=r(648),o=r(8173),i=r(7497),a=r(5112)("iterator");t.exports=function(t){if(null!=t)return o(t,a)||o(t,"@@iterator")||i[n(t)]}},8554:function(t,e,r){var n=r(9662),o=r(9670),i=r(1246);t.exports=function(t,e){var r=arguments.length<2?i(t):e;if(n(r))return o(r.call(t));throw TypeError(String(t)+" is not iterable")}},8173:function(t,e,r){var n=r(9662);t.exports=function(t,e){var r=t[e];return null==r?void 0:n(r)}},647:function(t,e,r){var n=r(7908),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,c,l,u){var d=r+t.length,p=c.length,m=s;return void 0!==l&&(l=n(l),m=a),i.call(u,m,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(d);case"<":a=l[i.slice(1,-1)];break;default:var s=+i;if(0===s)return n;if(s>p){var u=o(s/10);return 0===u?n:u<=p?void 0===c[u-1]?i.charAt(1):c[u-1]+i.charAt(1):n}a=c[s-1]}return void 0===a?"":a}))}},7854:function(t,e,r){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2597:function(t,e,r){var n=r(7908),o={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return o.call(n(t),e)}},3501:function(t){t.exports={}},490:function(t,e,r){var n=r(5005);t.exports=n("document","documentElement")},4664:function(t,e,r){var n=r(9781),o=r(7293),i=r(317);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,r){var n=r(7293),o=r(4326),i="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},9587:function(t,e,r){var n=r(614),o=r(111),i=r(7674);t.exports=function(t,e,r){var a,s;return i&&n(a=e.constructor)&&a!==r&&o(s=a.prototype)&&s!==r.prototype&&i(t,s),t}},2788:function(t,e,r){var n=r(614),o=r(5465),i=Function.toString;n(o.inspectSource)||(o.inspectSource=function(t){return i.call(t)}),t.exports=o.inspectSource},9909:function(t,e,r){var n,o,i,a=r(8536),s=r(7854),c=r(111),l=r(8880),u=r(2597),d=r(5465),p=r(6200),m=r(3501),f="Object already initialized",h=s.WeakMap;if(a||d.state){var v=d.state||(d.state=new h),_=v.get,g=v.has,b=v.set;n=function(t,e){if(g.call(v,t))throw new TypeError(f);return e.facade=t,b.call(v,t,e),e},o=function(t){return _.call(v,t)||{}},i=function(t){return g.call(v,t)}}else{var y=p("state");m[y]=!0,n=function(t,e){if(u(t,y))throw new TypeError(f);return e.facade=t,l(t,y,e),e},o=function(t){return u(t,y)?t[y]:{}},i=function(t){return u(t,y)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},7659:function(t,e,r){var n=r(5112),o=r(7497),i=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},3157:function(t,e,r){var n=r(4326);t.exports=Array.isArray||function(t){return"Array"==n(t)}},614:function(t){t.exports=function(t){return"function"==typeof t}},4411:function(t,e,r){var n=r(7293),o=r(614),i=r(648),a=r(5005),s=r(2788),c=[],l=a("Reflect","construct"),u=/^\s*(?:class|function)\b/,d=u.exec,p=!u.exec((function(){})),m=function(t){if(!o(t))return!1;try{return l(Object,c,t),!0}catch(t){return!1}};t.exports=!l||n((function(){var t;return m(m.call)||!m(Object)||!m((function(){t=!0}))||t}))?function(t){if(!o(t))return!1;switch(i(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return p||!!d.call(u,s(t))}:m},4705:function(t,e,r){var n=r(7293),o=r(614),i=/#|\.prototype\./,a=function(t,e){var r=c[s(t)];return r==u||r!=l&&(o(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=a.data={},l=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a},5988:function(t,e,r){var n=r(111),o=Math.floor;t.exports=Number.isInteger||function(t){return!n(t)&&isFinite(t)&&o(t)===t}},111:function(t,e,r){var n=r(614);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},1913:function(t){t.exports=!1},7850:function(t,e,r){var n=r(111),o=r(4326),i=r(5112)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},2190:function(t,e,r){var n=r(614),o=r(5005),i=r(3307);t.exports=i?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return n(e)&&Object(t)instanceof e}},9212:function(t,e,r){var n=r(9670),o=r(8173);t.exports=function(t,e,r){var i,a;n(t);try{if(!(i=o(t,"return"))){if("throw"===e)throw r;return r}i=i.call(t)}catch(t){a=!0,i=t}if("throw"===e)throw r;if(a)throw i;return n(i),r}},3383:function(t,e,r){"use strict";var n,o,i,a=r(7293),s=r(614),c=r(30),l=r(9518),u=r(1320),d=r(5112),p=r(1913),m=d("iterator"),f=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(n=o):f=!0),null==n||a((function(){var t={};return n[m].call(t)!==t}))?n={}:p&&(n=c(n)),s(n[m])||u(n,m,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},7497:function(t){t.exports={}},6244:function(t,e,r){var n=r(7466);t.exports=function(t){return n(t.length)}},133:function(t,e,r){var n=r(7392),o=r(7293);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8536:function(t,e,r){var n=r(7854),o=r(614),i=r(2788),a=n.WeakMap;t.exports=o(a)&&/native code/.test(i(a))},3929:function(t,e,r){var n=r(7850);t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},1574:function(t,e,r){"use strict";var n=r(9781),o=r(7293),i=r(1956),a=r(5181),s=r(5296),c=r(7908),l=r(8361),u=Object.assign,d=Object.defineProperty;t.exports=!u||o((function(){if(n&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),o="abcdefghijklmnopqrst";return t[r]=7,o.split("").forEach((function(t){e[t]=t})),7!=u({},t)[r]||i(u({},e)).join("")!=o}))?function(t,e){for(var r=c(t),o=arguments.length,u=1,d=a.f,p=s.f;o>u;)for(var m,f=l(arguments[u++]),h=d?i(f).concat(d(f)):i(f),v=h.length,_=0;v>_;)m=h[_++],n&&!p.call(f,m)||(r[m]=f[m]);return r}:u},30:function(t,e,r){var n,o=r(9670),i=r(6048),a=r(748),s=r(3501),c=r(490),l=r(317),u=r(6200)("IE_PROTO"),d=function(){},p=function(t){return"<script>"+t+"<\/script>"},m=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},f=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;f="undefined"!=typeof document?document.domain&&n?m(n):((e=l("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):m(n);for(var r=a.length;r--;)delete f.prototype[a[r]];return f()};s[u]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(d.prototype=o(t),r=new d,d.prototype=null,r[u]=t):r=f(),void 0===e?r:i(r,e)}},6048:function(t,e,r){var n=r(9781),o=r(3070),i=r(9670),a=r(1956);t.exports=n?Object.defineProperties:function(t,e){i(t);for(var r,n=a(e),s=n.length,c=0;s>c;)o.f(t,r=n[c++],e[r]);return t}},3070:function(t,e,r){var n=r(9781),o=r(4664),i=r(9670),a=r(4948),s=Object.defineProperty;e.f=n?s:function(t,e,r){if(i(t),e=a(e),i(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1236:function(t,e,r){var n=r(9781),o=r(5296),i=r(9114),a=r(5656),s=r(4948),c=r(2597),l=r(4664),u=Object.getOwnPropertyDescriptor;e.f=n?u:function(t,e){if(t=a(t),e=s(e),l)try{return u(t,e)}catch(t){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},1156:function(t,e,r){var n=r(5656),o=r(8006).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(n(t))}},8006:function(t,e,r){var n=r(6324),o=r(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,r){var n=r(2597),o=r(614),i=r(7908),a=r(6200),s=r(8544),c=a("IE_PROTO"),l=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){var e=i(t);if(n(e,c))return e[c];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof Object?l:null}},6324:function(t,e,r){var n=r(2597),o=r(5656),i=r(1318).indexOf,a=r(3501);t.exports=function(t,e){var r,s=o(t),c=0,l=[];for(r in s)!n(a,r)&&n(s,r)&&l.push(r);for(;e.length>c;)n(s,r=e[c++])&&(~i(l,r)||l.push(r));return l}},1956:function(t,e,r){var n=r(6324),o=r(748);t.exports=Object.keys||function(t){return n(t,o)}},5296:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},9026:function(t,e,r){"use strict";var n=r(1913),o=r(7854),i=r(7293),a=r(8008);t.exports=n||!i((function(){if(!(a&&a<535)){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete o[t]}}))},7674:function(t,e,r){var n=r(9670),o=r(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,i){return n(r),o(i),e?t.call(r,i):r.__proto__=i,r}}():void 0)},288:function(t,e,r){"use strict";var n=r(1694),o=r(648);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},2140:function(t,e,r){var n=r(614),o=r(111);t.exports=function(t,e){var r,i;if("string"===e&&n(r=t.toString)&&!o(i=r.call(t)))return i;if(n(r=t.valueOf)&&!o(i=r.call(t)))return i;if("string"!==e&&n(r=t.toString)&&!o(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},3887:function(t,e,r){var n=r(5005),o=r(8006),i=r(5181),a=r(9670);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(a(t)),r=i.f;return r?e.concat(r(t)):e}},857:function(t,e,r){var n=r(7854);t.exports=n},1320:function(t,e,r){var n=r(7854),o=r(614),i=r(2597),a=r(8880),s=r(3505),c=r(2788),l=r(9909),u=r(6530).CONFIGURABLE,d=l.get,p=l.enforce,m=String(String).split("String");(t.exports=function(t,e,r,c){var l,d=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,h=!!c&&!!c.noTargetGet,v=c&&void 0!==c.name?c.name:e;o(r)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(r,"name")||u&&r.name!==v)&&a(r,"name",v),(l=p(r)).source||(l.source=m.join("string"==typeof v?v:""))),t!==n?(d?!h&&t[e]&&(f=!0):delete t[e],f?t[e]=r:a(t,e,r)):f?t[e]=r:s(e,r)})(Function.prototype,"toString",(function(){return o(this)&&d(this).source||c(this)}))},7651:function(t,e,r){var n=r(9670),o=r(614),i=r(4326),a=r(2261);t.exports=function(t,e){var r=t.exec;if(o(r)){var s=r.call(t,e);return null!==s&&n(s),s}if("RegExp"===i(t))return a.call(t,e);throw TypeError("RegExp#exec called on incompatible receiver")}},2261:function(t,e,r){"use strict";var n,o,i=r(1340),a=r(7066),s=r(2999),c=r(2309),l=r(30),u=r(9909).get,d=r(9441),p=r(7168),m=RegExp.prototype.exec,f=c("native-string-replace",String.prototype.replace),h=m,v=(n=/a/,o=/b*/g,m.call(n,"a"),m.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),_=s.UNSUPPORTED_Y||s.BROKEN_CARET,g=void 0!==/()??/.exec("")[1];(v||g||_||d||p)&&(h=function(t){var e,r,n,o,s,c,d,p=this,b=u(p),y=i(t),x=b.raw;if(x)return x.lastIndex=p.lastIndex,e=h.call(x,y),p.lastIndex=x.lastIndex,e;var $=b.groups,w=_&&p.sticky,C=a.call(p),k=p.source,O=0,I=y;if(w&&(-1===(C=C.replace("y","")).indexOf("g")&&(C+="g"),I=y.slice(p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==y.charAt(p.lastIndex-1))&&(k="(?: "+k+")",I=" "+I,O++),r=new RegExp("^(?:"+k+")",C)),g&&(r=new RegExp("^"+k+"$(?!\\s)",C)),v&&(n=p.lastIndex),o=m.call(w?r:p,I),w?o?(o.input=o.input.slice(O),o[0]=o[0].slice(O),o.index=p.lastIndex,p.lastIndex+=o[0].length):p.lastIndex=0:v&&o&&(p.lastIndex=p.global?o.index+o[0].length:n),g&&o&&o.length>1&&f.call(o[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(o[s]=void 0)})),o&&$)for(o.groups=c=l(null),s=0;s<$.length;s++)c[(d=$[s])[0]]=o[d[1]];return o}),t.exports=h},7066:function(t,e,r){"use strict";var n=r(9670);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},2999:function(t,e,r){var n=r(7293),o=r(7854).RegExp;e.UNSUPPORTED_Y=n((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},9441:function(t,e,r){var n=r(7293),o=r(7854).RegExp;t.exports=n((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:function(t,e,r){var n=r(7293),o=r(7854).RegExp;t.exports=n((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4488:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},3505:function(t,e,r){var n=r(7854);t.exports=function(t,e){try{Object.defineProperty(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},6340:function(t,e,r){"use strict";var n=r(5005),o=r(3070),i=r(5112),a=r(9781),s=i("species");t.exports=function(t){var e=n(t),r=o.f;a&&e&&!e[s]&&r(e,s,{configurable:!0,get:function(){return this}})}},8003:function(t,e,r){var n=r(3070).f,o=r(2597),i=r(5112)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},6200:function(t,e,r){var n=r(2309),o=r(9711),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:function(t,e,r){var n=r(7854),o=r(3505),i="__core-js_shared__",a=n[i]||o(i,{});t.exports=a},2309:function(t,e,r){var n=r(1913),o=r(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.18.3",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(t,e,r){var n=r(9670),o=r(9483),i=r(5112)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||null==(r=n(a)[i])?e:o(r)}},8710:function(t,e,r){var n=r(9303),o=r(1340),i=r(4488),a=function(t){return function(e,r){var a,s,c=o(i(e)),l=n(r),u=c.length;return l<0||l>=u?t?"":void 0:(a=c.charCodeAt(l))<55296||a>56319||l+1===u||(s=c.charCodeAt(l+1))<56320||s>57343?t?c.charAt(l):a:t?c.slice(l,l+2):s-56320+(a-55296<<10)+65536}};t.exports={codeAt:a(!1),charAt:a(!0)}},6091:function(t,e,r){var n=r(6530).PROPER,o=r(7293),i=r(1361);t.exports=function(t){return o((function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||n&&i[t].name!==t}))}},3111:function(t,e,r){var n=r(4488),o=r(1340),i="["+r(1361)+"]",a=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(t){return function(e){var r=o(n(e));return 1&t&&(r=r.replace(a,"")),2&t&&(r=r.replace(s,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},863:function(t){var e=1..valueOf;t.exports=function(t){return e.call(t)}},1400:function(t,e,r){var n=r(9303),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},5656:function(t,e,r){var n=r(8361),o=r(4488);t.exports=function(t){return n(o(t))}},9303:function(t){var e=Math.ceil,r=Math.floor;t.exports=function(t){var n=+t;return n!=n||0===n?0:(n>0?r:e)(n)}},7466:function(t,e,r){var n=r(9303),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},7908:function(t,e,r){var n=r(4488);t.exports=function(t){return Object(n(t))}},7593:function(t,e,r){var n=r(111),o=r(2190),i=r(8173),a=r(2140),s=r(5112)("toPrimitive");t.exports=function(t,e){if(!n(t)||o(t))return t;var r,c=i(t,s);if(c){if(void 0===e&&(e="default"),r=c.call(t,e),!n(r)||o(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,r){var n=r(7593),o=r(2190);t.exports=function(t){var e=n(t,"string");return o(e)?e:String(e)}},1694:function(t,e,r){var n={};n[r(5112)("toStringTag")]="z",t.exports="[object z]"===String(n)},1340:function(t,e,r){var n=r(648);t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)}},6330:function(t){t.exports=function(t){try{return String(t)}catch(t){return"Object"}}},9711:function(t){var e=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+r).toString(36)}},3307:function(t,e,r){var n=r(133);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},6061:function(t,e,r){var n=r(5112);e.f=n},5112:function(t,e,r){var n=r(7854),o=r(2309),i=r(2597),a=r(9711),s=r(133),c=r(3307),l=o("wks"),u=n.Symbol,d=c?u:u&&u.withoutSetter||a;t.exports=function(t){return i(l,t)&&(s||"string"==typeof l[t])||(s&&i(u,t)?l[t]=u[t]:l[t]=d("Symbol."+t)),l[t]}},1361:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2222:function(t,e,r){"use strict";var n=r(2109),o=r(7293),i=r(3157),a=r(111),s=r(7908),c=r(6244),l=r(6135),u=r(5417),d=r(1194),p=r(5112),m=r(7392),f=p("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",_=m>=51||!o((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),g=d("concat"),b=function(t){if(!a(t))return!1;var e=t[f];return void 0!==e?!!e:i(t)};n({target:"Array",proto:!0,forced:!_||!g},{concat:function(t){var e,r,n,o,i,a=s(this),d=u(a,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(b(i=-1===e?a:arguments[e])){if(p+(o=c(i))>h)throw TypeError(v);for(r=0;r<o;r++,p++)r in i&&l(d,p,i[r])}else{if(p>=h)throw TypeError(v);l(d,p++,i)}return d.length=p,d}})},7327:function(t,e,r){"use strict";var n=r(2109),o=r(2092).filter;n({target:"Array",proto:!0,forced:!r(1194)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},1038:function(t,e,r){var n=r(2109),o=r(8457);n({target:"Array",stat:!0,forced:!r(7072)((function(t){Array.from(t)}))},{from:o})},6699:function(t,e,r){"use strict";var n=r(2109),o=r(1318).includes,i=r(1223);n({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},2772:function(t,e,r){"use strict";var n=r(2109),o=r(1318).indexOf,i=r(9341),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,c=i("indexOf");n({target:"Array",proto:!0,forced:s||!c},{indexOf:function(t){return s?a.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})},6992:function(t,e,r){"use strict";var n=r(5656),o=r(1223),i=r(7497),a=r(9909),s=r(654),c="Array Iterator",l=a.set,u=a.getterFor(c);t.exports=s(Array,"Array",(function(t,e){l(this,{type:c,target:n(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},9600:function(t,e,r){"use strict";var n=r(2109),o=r(8361),i=r(5656),a=r(9341),s=[].join,c=o!=Object,l=a("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},1249:function(t,e,r){"use strict";var n=r(2109),o=r(2092).map;n({target:"Array",proto:!0,forced:!r(1194)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},5827:function(t,e,r){"use strict";var n=r(2109),o=r(3671).left,i=r(9341),a=r(7392),s=r(5268);n({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},7042:function(t,e,r){"use strict";var n=r(2109),o=r(3157),i=r(4411),a=r(111),s=r(1400),c=r(6244),l=r(5656),u=r(6135),d=r(5112),p=r(1194)("slice"),m=d("species"),f=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var r,n,d,p=l(this),v=c(p),_=s(t,v),g=s(void 0===e?v:e,v);if(o(p)&&(r=p.constructor,(i(r)&&(r===Array||o(r.prototype))||a(r)&&null===(r=r[m]))&&(r=void 0),r===Array||void 0===r))return f.call(p,_,g);for(n=new(void 0===r?Array:r)(h(g-_,0)),d=0;_<g;_++,d++)_ in p&&u(n,d,p[_]);return n.length=d,n}})},2707:function(t,e,r){"use strict";var n=r(2109),o=r(9662),i=r(7908),a=r(6244),s=r(1340),c=r(7293),l=r(4362),u=r(9341),d=r(8886),p=r(256),m=r(7392),f=r(8008),h=[],v=h.sort,_=c((function(){h.sort(void 0)})),g=c((function(){h.sort(null)})),b=u("sort"),y=!c((function(){if(m)return m<70;if(!(d&&d>3)){if(p)return!0;if(f)return f<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)h.push({k:e+n,v:r})}for(h.sort((function(t,e){return e.v-t.v})),n=0;n<h.length;n++)e=h[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));n({target:"Array",proto:!0,forced:_||!g||!b||!y},{sort:function(t){void 0!==t&&o(t);var e=i(this);if(y)return void 0===t?v.call(e):v.call(e,t);var r,n,c=[],u=a(e);for(n=0;n<u;n++)n in e&&c.push(e[n]);for(r=(c=l(c,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:s(e)>s(r)?1:-1}}(t))).length,n=0;n<r;)e[n]=c[n++];for(;n<u;)delete e[n++];return e}})},561:function(t,e,r){"use strict";var n=r(2109),o=r(1400),i=r(9303),a=r(6244),s=r(7908),c=r(5417),l=r(6135),u=r(1194)("splice"),d=Math.max,p=Math.min,m=9007199254740991,f="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var r,n,u,h,v,_,g=s(this),b=a(g),y=o(t,b),x=arguments.length;if(0===x?r=n=0:1===x?(r=0,n=b-y):(r=x-2,n=p(d(i(e),0),b-y)),b+r-n>m)throw TypeError(f);for(u=c(g,n),h=0;h<n;h++)(v=y+h)in g&&l(u,h,g[v]);if(u.length=n,r<n){for(h=y;h<b-n;h++)_=h+r,(v=h+n)in g?g[_]=g[v]:delete g[_];for(h=b;h>b-n+r;h--)delete g[h-1]}else if(r>n)for(h=b-n;h>y;h--)_=h+r-1,(v=h+n-1)in g?g[_]=g[v]:delete g[_];for(h=0;h<r;h++)g[h+y]=arguments[h+2];return g.length=b-n+r,u}})},8309:function(t,e,r){var n=r(9781),o=r(6530).EXISTS,i=r(3070).f,a=Function.prototype,s=a.toString,c=/^\s*function ([^ (]*)/;n&&!o&&i(a,"name",{configurable:!0,get:function(){try{return s.call(this).match(c)[1]}catch(t){return""}}})},9653:function(t,e,r){"use strict";var n=r(9781),o=r(7854),i=r(4705),a=r(1320),s=r(2597),c=r(9587),l=r(2190),u=r(7593),d=r(7293),p=r(8006).f,m=r(1236).f,f=r(3070).f,h=r(863),v=r(3111).trim,_="Number",g=o.Number,b=g.prototype,y=function(t){var e=u(t,"number");return"bigint"==typeof e?e:x(e)},x=function(t){var e,r,n,o,i,a,s,c,d=u(t,"number");if(l(d))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof d&&d.length>2)if(43===(e=(d=v(d)).charCodeAt(0))||45===e){if(88===(r=d.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+d}for(a=(i=d.slice(2)).length,s=0;s<a;s++)if((c=i.charCodeAt(s))<48||c>o)return NaN;return parseInt(i,n)}return+d};if(i(_,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var $,w=function(t){var e=arguments.length<1?0:g(y(t)),r=this;return r instanceof w&&d((function(){h(r)}))?c(Object(e),r,w):e},C=n?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),k=0;C.length>k;k++)s(g,$=C[k])&&!s(w,$)&&f(w,$,m(g,$));w.prototype=b,b.constructor=w,a(o,_,w)}},3161:function(t,e,r){r(2109)({target:"Number",stat:!0},{isInteger:r(5988)})},9601:function(t,e,r){var n=r(2109),o=r(1574);n({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},9595:function(t,e,r){"use strict";var n=r(2109),o=r(9781),i=r(9026),a=r(9662),s=r(7908),c=r(3070);o&&n({target:"Object",proto:!0,forced:i},{__defineGetter__:function(t,e){c.f(s(this),t,{get:a(e),enumerable:!0,configurable:!0})}})},5003:function(t,e,r){var n=r(2109),o=r(7293),i=r(5656),a=r(1236).f,s=r(9781),c=o((function(){a(1)}));n({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},9337:function(t,e,r){var n=r(2109),o=r(9781),i=r(3887),a=r(5656),s=r(1236),c=r(6135);n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,r,n=a(t),o=s.f,l=i(n),u={},d=0;l.length>d;)void 0!==(r=o(n,e=l[d++]))&&c(u,e,r);return u}})},6210:function(t,e,r){var n=r(2109),o=r(7293),i=r(1156).f;n({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})},7941:function(t,e,r){var n=r(2109),o=r(7908),i=r(1956);n({target:"Object",stat:!0,forced:r(7293)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},1539:function(t,e,r){var n=r(1694),o=r(1320),i=r(288);n||o(Object.prototype,"toString",i,{unsafe:!0})},4603:function(t,e,r){var n=r(9781),o=r(7854),i=r(4705),a=r(9587),s=r(8880),c=r(3070).f,l=r(8006).f,u=r(7850),d=r(1340),p=r(7066),m=r(2999),f=r(1320),h=r(7293),v=r(2597),_=r(9909).enforce,g=r(6340),b=r(5112),y=r(9441),x=r(7168),$=b("match"),w=o.RegExp,C=w.prototype,k=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,O=/a/g,I=/a/g,S=new w(O)!==O,F=m.UNSUPPORTED_Y;if(i("RegExp",n&&(!S||F||y||x||h((function(){return I[$]=!1,w(O)!=O||w(I)==I||"/a/i"!=w(O,"i")}))))){for(var T=function(t,e){var r,n,o,i,c,l,m=this instanceof T,f=u(t),h=void 0===e,g=[],b=t;if(!m&&f&&h&&t.constructor===T)return t;if((f||t instanceof T)&&(t=t.source,h&&(e="flags"in b?b.flags:p.call(b))),t=void 0===t?"":d(t),e=void 0===e?"":d(e),b=t,y&&"dotAll"in O&&(n=!!e&&e.indexOf("s")>-1)&&(e=e.replace(/s/g,"")),r=e,F&&"sticky"in O&&(o=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,"")),x&&(t=(i=function(t){for(var e,r=t.length,n=0,o="",i=[],a={},s=!1,c=!1,l=0,u="";n<=r;n++){if("\\"===(e=t.charAt(n)))e+=t.charAt(++n);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:k.test(t.slice(n+1))&&(n+=2,c=!0),o+=e,l++;continue;case">"===e&&c:if(""===u||v(a,u))throw new SyntaxError("Invalid capture group name");a[u]=!0,i.push([u,l]),c=!1,u="";continue}c?u+=e:o+=e}return[o,i]}(t))[0],g=i[1]),c=a(w(t,e),m?this:C,T),(n||o||g.length)&&(l=_(c),n&&(l.dotAll=!0,l.raw=T(function(t){for(var e,r=t.length,n=0,o="",i=!1;n<=r;n++)"\\"!==(e=t.charAt(n))?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),o+=e):o+="[\\s\\S]":o+=e+t.charAt(++n);return o}(t),r)),o&&(l.sticky=!0),g.length&&(l.groups=g)),t!==b)try{s(c,"source",""===b?"(?:)":b)}catch(t){}return c},q=function(t){t in T||c(T,t,{configurable:!0,get:function(){return w[t]},set:function(e){w[t]=e}})},E=l(w),P=0;E.length>P;)q(E[P++]);C.constructor=T,T.prototype=C,f(o,"RegExp",T)}g("RegExp")},4916:function(t,e,r){"use strict";var n=r(2109),o=r(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},9714:function(t,e,r){"use strict";var n=r(6530).PROPER,o=r(1320),i=r(9670),a=r(1340),s=r(7293),c=r(7066),l="toString",u=RegExp.prototype,d=u.toString,p=s((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),m=n&&d.name!=l;(p||m)&&o(RegExp.prototype,l,(function(){var t=i(this),e=a(t.source),r=t.flags;return"/"+e+"/"+a(void 0===r&&t instanceof RegExp&&!("flags"in u)?c.call(t):r)}),{unsafe:!0})},2023:function(t,e,r){"use strict";var n=r(2109),o=r(3929),i=r(4488),a=r(1340);n({target:"String",proto:!0,forced:!r(4964)("includes")},{includes:function(t){return!!~a(i(this)).indexOf(a(o(t)),arguments.length>1?arguments[1]:void 0)}})},8783:function(t,e,r){"use strict";var n=r(8710).charAt,o=r(1340),i=r(9909),a=r(654),s="String Iterator",c=i.set,l=i.getterFor(s);a(String,"String",(function(t){c(this,{type:s,string:o(t),index:0})}),(function(){var t,e=l(this),r=e.string,o=e.index;return o>=r.length?{value:void 0,done:!0}:(t=n(r,o),e.index+=t.length,{value:t,done:!1})}))},6373:function(t,e,r){"use strict";var n=r(2109),o=r(4994),i=r(4488),a=r(7466),s=r(1340),c=r(9670),l=r(4326),u=r(7850),d=r(7066),p=r(8173),m=r(1320),f=r(7293),h=r(5112),v=r(6707),_=r(1530),g=r(7651),b=r(9909),y=r(1913),x=h("matchAll"),$="RegExp String",w="RegExp String Iterator",C=b.set,k=b.getterFor(w),O=RegExp.prototype,I="".matchAll,S=!!I&&!f((function(){"a".matchAll(/./)})),F=o((function(t,e,r,n){C(this,{type:w,regexp:t,string:e,global:r,unicode:n,done:!1})}),$,(function(){var t=k(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,r=t.string,n=g(e,r);return null===n?{value:void 0,done:t.done=!0}:t.global?(""===s(n[0])&&(e.lastIndex=_(r,a(e.lastIndex),t.unicode)),{value:n,done:!1}):(t.done=!0,{value:n,done:!1})})),T=function(t){var e,r,n,o,i,l,u=c(this),p=s(t);return e=v(u,RegExp),void 0===(r=u.flags)&&u instanceof RegExp&&!("flags"in O)&&(r=d.call(u)),n=void 0===r?"":s(r),o=new e(e===RegExp?u.source:u,n),i=!!~n.indexOf("g"),l=!!~n.indexOf("u"),o.lastIndex=a(u.lastIndex),new F(o,p,i,l)};n({target:"String",proto:!0,forced:S},{matchAll:function(t){var e,r,n,o=i(this);if(null!=t){if(u(t)&&!~s(i("flags"in O?t.flags:d.call(t))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(S)return I.apply(o,arguments);if(void 0===(r=p(t,x))&&y&&"RegExp"==l(t)&&(r=T),r)return r.call(t,o)}else if(S)return I.apply(o,arguments);return e=s(o),n=new RegExp(t,"g"),y?T.call(n,e):n[x](e)}}),y||x in O||m(O,x,T)},4723:function(t,e,r){"use strict";var n=r(7007),o=r(9670),i=r(7466),a=r(1340),s=r(4488),c=r(8173),l=r(1530),u=r(7651);n("match",(function(t,e,r){return[function(e){var r=s(this),n=null==e?void 0:c(e,t);return n?n.call(e,r):new RegExp(e)[t](a(r))},function(t){var n=o(this),s=a(t),c=r(e,n,s);if(c.done)return c.value;if(!n.global)return u(n,s);var d=n.unicode;n.lastIndex=0;for(var p,m=[],f=0;null!==(p=u(n,s));){var h=a(p[0]);m[f]=h,""===h&&(n.lastIndex=l(s,i(n.lastIndex),d)),f++}return 0===f?null:m}]}))},5306:function(t,e,r){"use strict";var n=r(7007),o=r(7293),i=r(9670),a=r(614),s=r(9303),c=r(7466),l=r(1340),u=r(4488),d=r(1530),p=r(8173),m=r(647),f=r(7651),h=r(5112)("replace"),v=Math.max,_=Math.min,g="$0"==="a".replace(/./,"$0"),b=!!/./[h]&&""===/./[h]("a","$0");n("replace",(function(t,e,r){var n=b?"$":"$0";return[function(t,r){var n=u(this),o=null==t?void 0:p(t,h);return o?o.call(t,n,r):e.call(l(n),t,r)},function(t,o){var u=i(this),p=l(t);if("string"==typeof o&&-1===o.indexOf(n)&&-1===o.indexOf("$<")){var h=r(e,u,p,o);if(h.done)return h.value}var g=a(o);g||(o=l(o));var b=u.global;if(b){var y=u.unicode;u.lastIndex=0}for(var x=[];;){var $=f(u,p);if(null===$)break;if(x.push($),!b)break;""===l($[0])&&(u.lastIndex=d(p,c(u.lastIndex),y))}for(var w,C="",k=0,O=0;O<x.length;O++){$=x[O];for(var I=l($[0]),S=v(_(s($.index),p.length),0),F=[],T=1;T<$.length;T++)F.push(void 0===(w=$[T])?w:String(w));var q=$.groups;if(g){var E=[I].concat(F,S,p);void 0!==q&&E.push(q);var P=l(o.apply(void 0,E))}else P=m(I,p,S,F,q,o);S>=k&&(C+=p.slice(k,S)+P,k=S+I.length)}return C+p.slice(k)}]}),!!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!g||b)},3123:function(t,e,r){"use strict";var n=r(7007),o=r(7850),i=r(9670),a=r(4488),s=r(6707),c=r(1530),l=r(7466),u=r(1340),d=r(8173),p=r(7651),m=r(2261),f=r(2999),h=r(7293),v=f.UNSUPPORTED_Y,_=[].push,g=Math.min,b=4294967295;n("split",(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=u(a(this)),i=void 0===r?b:r>>>0;if(0===i)return[];if(void 0===t)return[n];if(!o(t))return e.call(n,t,i);for(var s,c,l,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,h=new RegExp(t.source,p+"g");(s=m.call(h,n))&&!((c=h.lastIndex)>f&&(d.push(n.slice(f,s.index)),s.length>1&&s.index<n.length&&_.apply(d,s.slice(1)),l=s[0].length,f=c,d.length>=i));)h.lastIndex===s.index&&h.lastIndex++;return f===n.length?!l&&h.test("")||d.push(""):d.push(n.slice(f)),d.length>i?d.slice(0,i):d}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var o=a(this),i=null==e?void 0:d(e,t);return i?i.call(e,o,r):n.call(u(o),e,r)},function(t,o){var a=i(this),d=u(t),m=r(n,a,d,o,n!==e);if(m.done)return m.value;var f=s(a,RegExp),h=a.unicode,_=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(v?"g":"y"),y=new f(v?"^(?:"+a.source+")":a,_),x=void 0===o?b:o>>>0;if(0===x)return[];if(0===d.length)return null===p(y,d)?[d]:[];for(var $=0,w=0,C=[];w<d.length;){y.lastIndex=v?0:w;var k,O=p(y,v?d.slice(w):d);if(null===O||(k=g(l(y.lastIndex+(v?w:0)),d.length))===$)w=c(d,w,h);else{if(C.push(d.slice($,w)),C.length===x)return C;for(var I=1;I<=O.length-1;I++)if(C.push(O[I]),C.length===x)return C;w=$=k}}return C.push(d.slice($)),C}]}),!!h((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),v)},3210:function(t,e,r){"use strict";var n=r(2109),o=r(3111).trim;n({target:"String",proto:!0,forced:r(6091)("trim")},{trim:function(){return o(this)}})},1817:function(t,e,r){"use strict";var n=r(2109),o=r(9781),i=r(7854),a=r(2597),s=r(614),c=r(111),l=r(3070).f,u=r(9920),d=i.Symbol;if(o&&s(d)&&(!("description"in d.prototype)||void 0!==d().description)){var p={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new d(t):void 0===t?d():d(t);return""===t&&(p[e]=!0),e};u(m,d);var f=m.prototype=d.prototype;f.constructor=m;var h=f.toString,v="Symbol(test)"==String(d("test")),_=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=h.call(t);if(a(p,t))return"";var r=v?e.slice(7,-1):e.replace(_,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:m})}},2165:function(t,e,r){r(7235)("iterator")},2526:function(t,e,r){"use strict";var n=r(2109),o=r(7854),i=r(5005),a=r(1913),s=r(9781),c=r(133),l=r(7293),u=r(2597),d=r(3157),p=r(614),m=r(111),f=r(2190),h=r(9670),v=r(7908),_=r(5656),g=r(4948),b=r(1340),y=r(9114),x=r(30),$=r(1956),w=r(8006),C=r(1156),k=r(5181),O=r(1236),I=r(3070),S=r(5296),F=r(1320),T=r(2309),q=r(6200),E=r(3501),P=r(9711),j=r(5112),A=r(6061),N=r(7235),D=r(8003),M=r(9909),R=r(2092).forEach,B=q("hidden"),L="Symbol",z=j("toPrimitive"),K=M.set,U=M.getterFor(L),Z=Object.prototype,H=o.Symbol,V=i("JSON","stringify"),G=O.f,Q=I.f,W=C.f,Y=S.f,X=T("symbols"),J=T("op-symbols"),tt=T("string-to-symbol-registry"),et=T("symbol-to-string-registry"),rt=T("wks"),nt=o.QObject,ot=!nt||!nt.prototype||!nt.prototype.findChild,it=s&&l((function(){return 7!=x(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=G(Z,e);n&&delete Z[e],Q(t,e,r),n&&t!==Z&&Q(Z,e,n)}:Q,at=function(t,e){var r=X[t]=x(H.prototype);return K(r,{type:L,tag:t,description:e}),s||(r.description=e),r},st=function(t,e,r){t===Z&&st(J,e,r),h(t);var n=g(e);return h(r),u(X,n)?(r.enumerable?(u(t,B)&&t[B][n]&&(t[B][n]=!1),r=x(r,{enumerable:y(0,!1)})):(u(t,B)||Q(t,B,y(1,{})),t[B][n]=!0),it(t,n,r)):Q(t,n,r)},ct=function(t,e){h(t);var r=_(e),n=$(r).concat(pt(r));return R(n,(function(e){s&&!lt.call(r,e)||st(t,e,r[e])})),t},lt=function(t){var e=g(t),r=Y.call(this,e);return!(this===Z&&u(X,e)&&!u(J,e))&&(!(r||!u(this,e)||!u(X,e)||u(this,B)&&this[B][e])||r)},ut=function(t,e){var r=_(t),n=g(e);if(r!==Z||!u(X,n)||u(J,n)){var o=G(r,n);return!o||!u(X,n)||u(r,B)&&r[B][n]||(o.enumerable=!0),o}},dt=function(t){var e=W(_(t)),r=[];return R(e,(function(t){u(X,t)||u(E,t)||r.push(t)})),r},pt=function(t){var e=t===Z,r=W(e?J:_(t)),n=[];return R(r,(function(t){!u(X,t)||e&&!u(Z,t)||n.push(X[t])})),n};if(c||(F((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?b(arguments[0]):void 0,e=P(t),r=function(t){this===Z&&r.call(J,t),u(this,B)&&u(this[B],e)&&(this[B][e]=!1),it(this,e,y(1,t))};return s&&ot&&it(Z,e,{configurable:!0,set:r}),at(e,t)}).prototype,"toString",(function(){return U(this).tag})),F(H,"withoutSetter",(function(t){return at(P(t),t)})),S.f=lt,I.f=st,O.f=ut,w.f=C.f=dt,k.f=pt,A.f=function(t){return at(j(t),t)},s&&(Q(H.prototype,"description",{configurable:!0,get:function(){return U(this).description}}),a||F(Z,"propertyIsEnumerable",lt,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:H}),R($(rt),(function(t){N(t)})),n({target:L,stat:!0,forced:!c},{for:function(t){var e=b(t);if(u(tt,e))return tt[e];var r=H(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!f(t))throw TypeError(t+" is not a symbol");if(u(et,t))return et[t]},useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(t,e){return void 0===e?x(t):ct(x(t),e)},defineProperty:st,defineProperties:ct,getOwnPropertyDescriptor:ut}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:dt,getOwnPropertySymbols:pt}),n({target:"Object",stat:!0,forced:l((function(){k.f(1)}))},{getOwnPropertySymbols:function(t){return k.f(v(t))}}),V&&n({target:"JSON",stat:!0,forced:!c||l((function(){var t=H();return"[null]"!=V([t])||"{}"!=V({a:t})||"{}"!=V(Object(t))}))},{stringify:function(t,e,r){for(var n,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);if(n=e,(m(e)||void 0!==t)&&!f(t))return d(e)||(e=function(t,e){if(p(n)&&(e=n.call(this,t,e)),!f(e))return e}),o[1]=e,V.apply(null,o)}}),!H.prototype[z]){var mt=H.prototype.valueOf;F(H.prototype,z,(function(){return mt.apply(this,arguments)}))}D(H,L),E[B]=!0},3728:function(t,e,r){r(6373)},4747:function(t,e,r){var n=r(7854),o=r(8324),i=r(8509),a=r(8533),s=r(8880),c=function(t){if(t&&t.forEach!==a)try{s(t,"forEach",a)}catch(e){t.forEach=a}};for(var l in o)o[l]&&c(n[l]&&n[l].prototype);c(i)},3948:function(t,e,r){var n=r(7854),o=r(8324),i=r(8509),a=r(6992),s=r(8880),c=r(5112),l=c("iterator"),u=c("toStringTag"),d=a.values,p=function(t,e){if(t){if(t[l]!==d)try{s(t,l,d)}catch(e){t[l]=d}if(t[u]||s(t,u,e),o[e])for(var r in a)if(t[r]!==a[r])try{s(t,r,a[r])}catch(e){t[r]=a[r]}}};for(var m in o)p(n[m]&&n[m].prototype,m);p(i,"DOMTokenList")}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return function(){"use strict";function t(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(n),r.d(n,{default:function(){return $}}),r(3210),r(4916),r(5306),r(2772),r(8309),r(3123),r(1539),r(9714),r(561),r(9600),r(9595),r(7042),"undefined"==typeof Element||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"undefined"!=typeof self&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(t){if("Element"in t){var e="classList",r=t.Element.prototype,n=Object,o=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},i=Array.prototype.indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},s=function(t,e){if(""===e)throw new a("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","The token must not contain space characters.");return i.call(t,e)},c=function(t){for(var e=o.call(t.getAttribute("class")||""),r=e?e.split(/\s+/):[],n=0,i=r.length;n<i;n++)this.push(r[n]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},l=c.prototype=[],u=function(){return new c(this)};if(a.prototype=Error.prototype,l.item=function(t){return this[t]||null},l.contains=function(t){return~s(this,t+"")},l.add=function(){var t,e=arguments,r=0,n=e.length,o=!1;do{t=e[r]+"",~s(this,t)||(this.push(t),o=!0)}while(++r<n);o&&this._updateClassName()},l.remove=function(){var t,e,r=arguments,n=0,o=r.length,i=!1;do{for(t=r[n]+"",e=s(this,t);~e;)this.splice(e,1),i=!0,e=s(this,t)}while(++n<o);i&&this._updateClassName()},l.toggle=function(t,e){var r=this.contains(t),n=r?!0!==e&&"remove":!1!==e&&"add";return n&&this[n](t),!0===e||!1===e?e:!r},l.replace=function(t,e){var r=s(t+"");~r&&(this.splice(r,1,e),this._updateClassName())},l.toString=function(){return this.join(" ")},n.defineProperty){var d={get:u,enumerable:!0,configurable:!0};try{n.defineProperty(r,e,d)}catch(t){void 0!==t.number&&-2146823252!==t.number||(d.enumerable=!1,n.defineProperty(r,e,d))}}else n.prototype.__defineGetter__&&r.__defineGetter__(e,u)}}(self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var r,n=arguments.length;for(r=0;r<n;r++)t=arguments[r],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:r.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var r=this.toString().split(" "),n=r.indexOf(t+"");~n&&(r=r.slice(n),this.remove.apply(this,r),this.add(e),this.add.apply(this,r.slice(1)))}),t=null}()),r(7327),r(2222),r(7941),r(4603),r(3728),r(2707),r(6699),r(2023),r(4747),r(9601),r(1249),r(1038),r(8783),r(2526),r(5003),r(9337),r(1817),r(2165),r(6992),r(3948),r(3161),r(9653),r(4723),r(5827),r(6210);var c=function(){function r(t){var e=t.getOptions,n=t.getCaretPosition,o=t.getCaretPositionEnd,i=t.dispatch;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),s(this,"isStandardButton",(function(t){return t&&!("{"===t[0]&&"}"===t[t.length-1])})),this.getOptions=e,this.getCaretPosition=n,this.getCaretPositionEnd=o,this.dispatch=i,r.bindMethods(r,this)}var n,o,c;return n=r,c=[{key:"bindMethods",value:function(t,r){var n,o=function(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=e(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}(Object.getOwnPropertyNames(t.prototype));try{for(o.s();!(n=o.n()).done;){var i=n.value;"constructor"===i||"bindMethods"===i||(r[i]=r[i].bind(r))}}catch(t){o.e(t)}finally{o.f()}}}],(o=[{key:"getButtonType",value:function(t){return t.includes("{")&&t.includes("}")&&"{//}"!==t?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(t){var e=this.getButtonType(t),r=t.replace("{","").replace("}",""),n="";return"standardBtn"!==e&&(n=" hg-button-".concat(r)),"hg-".concat(e).concat(n)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(t,e,r){return(e=r?Object.assign({},this.getDefaultDiplay(),e):e||this.getDefaultDiplay())[t]||t}},{key:"getUpdatedInput",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.getOptions(),a=[r,n,o],s=e;return("{bksp}"===t||"{backspace}"===t)&&s.length>0?s=this.removeAt.apply(this,[s].concat(a)):("{delete}"===t||"{forwarddelete}"===t)&&s.length>0?s=this.removeForwardsAt.apply(this,[s].concat(a)):"{space}"===t?s=this.addStringAt.apply(this,[s," "].concat(a)):"{tab}"!==t||"boolean"==typeof i.tabCharOnTab&&!1===i.tabCharOnTab?"{enter}"!==t&&"{numpadenter}"!==t||!i.newLineOnEnter?t.includes("numpad")&&Number.isInteger(Number(t[t.length-2]))?s=this.addStringAt.apply(this,[s,t[t.length-2]].concat(a)):"{numpaddivide}"===t?s=this.addStringAt.apply(this,[s,"/"].concat(a)):"{numpadmultiply}"===t?s=this.addStringAt.apply(this,[s,"*"].concat(a)):"{numpadsubtract}"===t?s=this.addStringAt.apply(this,[s,"-"].concat(a)):"{numpadadd}"===t?s=this.addStringAt.apply(this,[s,"+"].concat(a)):"{numpaddecimal}"===t?s=this.addStringAt.apply(this,[s,"."].concat(a)):"{"===t||"}"===t?s=this.addStringAt.apply(this,[s,t].concat(a)):t.includes("{")||t.includes("}")||(s=this.addStringAt.apply(this,[s,t].concat(a))):s=this.addStringAt.apply(this,[s,"\n"].concat(a)):s=this.addStringAt.apply(this,[s,"\t"].concat(a)),s}},{key:"updateCaretPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.updateCaretPosAction(t,e);this.dispatch((function(t){t.setCaretPosition(r)}))}},{key:"updateCaretPosAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getOptions(),n=this.getCaretPosition();return null!=n&&(e?n>0&&(n-=t):n+=t),r.debug&&console.log("Caret at:",n),n}},{key:"addStringAt",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n||0===n?(r=[t.slice(0,n),e,t.slice(o)].join(""),this.isMaxLengthReached()||i&&this.updateCaretPos(e.length)):r=t+e,r}},{key:"removeAt",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===r&&0===n)return t;if(r===n){var i=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;r&&r>=0?t.substring(r-2,r).match(i)?(e=t.substr(0,r-2)+t.substr(r),o&&this.updateCaretPos(2,!0)):(e=t.substr(0,r-1)+t.substr(r),o&&this.updateCaretPos(1,!0)):t.slice(-2).match(i)?(e=t.slice(0,-2),o&&this.updateCaretPos(2,!0)):(e=t.slice(0,-1),o&&this.updateCaretPos(1,!0))}else e=t.slice(0,r)+t.slice(n),o&&this.dispatch((function(t){t.setCaretPosition(r)}));return e}},{key:"removeForwardsAt",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==t||!t.length||null===r)return t;if(r===n){var i=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;e=t.substring(r,r+2).match(i)?t.substr(0,r)+t.substr(r+2):t.substr(0,r)+t.substr(r+1)}else e=t.slice(0,r)+t.slice(n),o&&this.dispatch((function(t){t.setCaretPosition(r)}));return e}},{key:"handleMaxLength",value:function(t,e){var r=this.getOptions(),n=r.maxLength,o=t[r.inputName||"default"],a=e.length-1>=n;if(e.length<=o.length)return!1;if(Number.isInteger(n))return r.debug&&console.log("maxLength (num) reached:",a),a?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if("object"===i(n)){var s=e.length-1>=n[r.inputName||"default"];return r.debug&&console.log("maxLength (obj) reached:",s),s?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return Boolean(this.maxLengthReached)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(t){return t?t.toLowerCase().trim().split(/[.\-_\s]/g).reduce((function(t,e){return e.length?t+e[0].toUpperCase()+e.slice(1):t})):""}},{key:"chunkArray",value:function(e,r){return t(Array(Math.ceil(e.length/r))).map((function(t,n){return e.slice(r*n,r+r*n)}))}}])&&a(n.prototype,o),c&&a(n,c),r}();s(c,"noop",(function(){}));var l=c;function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(e){var r=e.dispatch,n=e.getOptions;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dispatch=r,this.getOptions=n,l.bindMethods(t,this)}var e,r,n;return e=t,(r=[{key:"handleHighlightKeyDown",value:function(t){var e=this.getOptions(),r=this.getSimpleKeyboardLayoutKey(t);this.dispatch((function(n){var o,i,a=n.getButtonElement(r),s=n.getButtonElement("{".concat(r,"}"));if(a)o=a,i=r;else{if(!s)return;o=s,i="{".concat(r,"}")}o&&(o.style.backgroundColor=e.physicalKeyboardHighlightBgColor||"#dadce4",o.style.color=e.physicalKeyboardHighlightTextColor||"black",e.physicalKeyboardHighlightPress&&(e.physicalKeyboardHighlightPressUseClick?o.click():n.handleButtonClicked(i,t)))}))}},{key:"handleHighlightKeyUp",value:function(t){var e=this.getSimpleKeyboardLayoutKey(t);this.dispatch((function(t){var r=t.getButtonElement(e)||t.getButtonElement("{".concat(e,"}"));r&&r.removeAttribute&&r.removeAttribute("style")}))}},{key:"getSimpleKeyboardLayoutKey",value:function(t){var e,r="",n=t.code||t.key||this.keyCodeToKey(null==t?void 0:t.keyCode);return(r=null!=n&&n.includes("Numpad")||null!=n&&n.includes("Shift")||null!=n&&n.includes("Space")||null!=n&&n.includes("Backspace")||null!=n&&n.includes("Control")||null!=n&&n.includes("Alt")||null!=n&&n.includes("Meta")?t.code||"":t.key||this.keyCodeToKey(null==t?void 0:t.keyCode)||"").length>1?null===(e=r)||void 0===e?void 0:e.toLowerCase():r}},{key:"keyCodeToKey",value:function(t){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[t]}}])&&u(e.prototype,r),n&&u(e,n),t}();function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var m=function(){function t(e){var r,n,o,i=e.utilities;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=0,(n="pageIndex")in(r=this)?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.utilities=i,l.bindMethods(t,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(t){var e=this,r=t.candidateValue,n=t.targetElement,o=t.onSelect;if(r&&r.length){var i=this.utilities.chunkArray(r.split(" "),this.pageSize);this.renderPage({candidateListPages:i,targetElement:n,pageIndex:this.pageIndex,nbPages:i.length,onItemSelected:function(t,r){o(t,r),e.destroy()}})}}},{key:"renderPage",value:function(t){var e,r=this,n=t.candidateListPages,o=t.targetElement,i=t.pageIndex,a=t.nbPages,s=t.onItemSelected;null===(e=this.candidateBoxElement)||void 0===e||e.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var c=document.createElement("ul");c.className="hg-candidate-box-list",n[i].forEach((function(t){var e=document.createElement("li"),r=function(){var t=new MouseEvent("click");return Object.defineProperty(t,"target",{value:e}),t};e.className="hg-candidate-box-list-item",e.textContent=t,e.onclick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return s(t,e)},c.appendChild(e)}));var l=i>0,u=document.createElement("div");u.classList.add("hg-candidate-box-prev"),l&&u.classList.add("hg-candidate-box-btn-active"),u.onclick=function(){l&&r.renderPage({candidateListPages:n,targetElement:o,pageIndex:i-1,nbPages:a,onItemSelected:s})},this.candidateBoxElement.appendChild(u),this.candidateBoxElement.appendChild(c);var d=i<a-1,p=document.createElement("div");p.classList.add("hg-candidate-box-next"),d&&p.classList.add("hg-candidate-box-btn-active"),p.onclick=function(){d&&r.renderPage({candidateListPages:n,targetElement:o,pageIndex:i+1,nbPages:a,onItemSelected:s})},this.candidateBoxElement.appendChild(p),o.prepend(this.candidateBoxElement)}}])&&p(e.prototype,r),n&&p(e,n),t}();function f(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function x(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $=function(){function t(){var e=this;if(b(this,t),x(this,"defaultName","default"),x(this,"activeInputElement",null),x(this,"handleParams",(function(t){var e,r,n;if("string"==typeof t[0])e=t[0].split(".").join(""),r=document.querySelector(".".concat(e)),n=t[1];else if(t[0]instanceof HTMLDivElement){if(!t[0].className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");e=t[0].className.split(" ")[0],r=t[0],n=t[1]}else e="simple-keyboard",r=document.querySelector(".".concat(e)),n=t[0];return{keyboardDOMClass:e,keyboardDOM:r,options:n}})),x(this,"getOptions",(function(){return e.options})),x(this,"getCaretPosition",(function(){return e.caretPosition})),x(this,"getCaretPositionEnd",(function(){return e.caretPositionEnd})),x(this,"registerModule",(function(t,r){e.modules[t]||(e.modules[t]={}),r(e.modules[t])})),x(this,"getKeyboardClassString",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=[e.keyboardDOMClass].concat(r).filter((function(t){return!!t}));return o.join(" ")})),"undefined"!=typeof window){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=this.handleParams(n),a=i.keyboardDOMClass,s=i.keyboardDOM,c=i.options,u=void 0===c?{}:c;this.utilities=new l({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=s,this.options=g({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},u),this.keyboardPluginClasses="",l.bindMethods(t,this);var p=this.options.inputName,f=void 0===p?this.defaultName:p;if(this.input={},this.input[f]="",this.keyboardDOMClass=a,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new d({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new m({utilities:this.utilities}):null,!this.keyboardDOM)throw console.warn('".'.concat(a,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var e,r,n;return e=t,(r=[{key:"setCaretPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.caretPosition=t,this.caretPositionEnd=e}},{key:"getInputCandidates",value:function(t){var e=this,r=this.options.layoutCandidates;if(!r||"object"!==v(r))return{};var n=Object.keys(r).filter((function(r){var n=t.substring(0,e.getCaretPositionEnd()||0)||t,o=new RegExp("".concat(r,"$"),"g");return!!f(n.matchAll(o)).length}));if(n.length>1){var o=n.sort((function(t,e){return e.length-t.length}))[0];return{candidateKey:o,candidateValue:r[o]}}if(n.length){var i=n[0];return{candidateKey:i,candidateValue:r[i]}}return{}}},{key:"showCandidatesBox",value:function(t,e,r){var n=this;this.candidateBox&&this.candidateBox.show({candidateValue:e,targetElement:r,onSelect:function(e,r){var o=n.getInput(n.options.inputName,!0),i=n.getCaretPositionEnd()||0,a=o.substring(0,i||0)||o,s=new RegExp("".concat(t,"$"),"g"),c=a.replace(s,e),l=o.replace(a,c),u=c.length-a.length,d=(i||o.length)+u;d<0&&(d=0),n.setInput(l,n.options.inputName,!0),n.setCaretPosition(d),"function"==typeof n.options.onChange&&n.options.onChange(n.getInput(n.options.inputName,!0),r),"function"==typeof n.options.onChangeAll&&n.options.onChangeAll(n.getAllInputs(),r)}})}},{key:"handleButtonClicked",value:function(t,e){var r=this.options,n=r.inputName,o=void 0===n?this.defaultName:n,i=r.debug;if("{//}"!==t){this.input[o]||(this.input[o]="");var a=this.utilities.getUpdatedInput(t,this.input[o],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(t)&&this.activeInputElement&&this.input[o]&&this.input[o]===a&&0===this.caretPosition&&this.caretPositionEnd===a.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(t,e);if("function"==typeof this.options.onKeyPress&&this.options.onKeyPress(t,e),this.input[o]!==a&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(a))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,a))return;var s=this.utilities.getUpdatedInput(t,this.input[o],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(s,this.options.inputName,!0),i&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")")),this.options.syncInstanceInputs&&this.syncInstanceInputs(),"function"==typeof this.options.onChange&&this.options.onChange(this.getInput(this.options.inputName,!0),e),"function"==typeof this.options.onChangeAll&&this.options.onChangeAll(this.getAllInputs(),e),null!=e&&e.target&&this.options.enableLayoutCandidates){var c,l=this.getInputCandidates(a),u=l.candidateKey,d=l.candidateValue;u&&d?this.showCandidatesBox(u,d,this.keyboardDOM):null===(c=this.candidateBox)||void 0===c||c.destroy()}}i&&console.log("Key pressed:",t)}}},{key:"handleButtonMouseDown",value:function(t,e){var r=this;e&&(this.options.preventMouseDownDefault&&e.preventDefault(),this.options.stopMouseDownPropagation&&e.stopPropagation(),e.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.isMouseHold=!0,this.options.disableButtonHold||(this.holdTimeout=window.setTimeout((function(){(r.isMouseHold&&(!t.includes("{")&&!t.includes("}")||"{delete}"===t||"{backspace}"===t||"{bksp}"===t||"{space}"===t||"{tab}"===t)||"{arrowright}"===t||"{arrowleft}"===t||"{arrowup}"===t||"{arrowdown}"===t)&&(r.options.debug&&console.log("Button held:",t),r.handleButtonHold(t)),clearTimeout(r.holdTimeout)}),500))}},{key:"handleButtonMouseUp",value:function(t,e){var r=this;e&&(this.options.preventMouseUpDefault&&e.preventDefault&&e.preventDefault(),this.options.stopMouseUpPropagation&&e.stopPropagation&&e.stopPropagation(),!(e.target===this.keyboardDOM||e.target&&this.keyboardDOM.contains(e.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(e.target===this.candidateBox.candidateBoxElement||e.target&&this.candidateBox.candidateBoxElement.contains(e.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons((function(t){t.classList.remove(r.activeButtonClass)})),this.isMouseHold=!1,this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),t&&"function"==typeof this.options.onKeyReleased&&this.options.onKeyReleased(t)}},{key:"handleKeyboardContainerMouseDown",value:function(t){this.options.preventMouseDownDefault&&t.preventDefault()}},{key:"handleButtonHold",value:function(t){var e=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout((function(){e.isMouseHold?(e.handleButtonClicked(t),e.handleButtonHold(t)):clearTimeout(e.holdInteractionTimeout)}),100)}},{key:"syncInstanceInputs",value:function(){var t=this;this.dispatch((function(e){e.replaceInput(t.input),e.setCaretPosition(t.caretPosition,t.caretPositionEnd)}))}},{key:"clearInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName;this.input[t]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.options.syncInstanceInputs&&!e&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[t].replace("‫","").replace("‬","")+"‬":this.input[t]}},{key:"getAllInputs",value:function(){var t=this,e={};return Object.keys(this.input).forEach((function(r){e[r]=t.getInput(r,!0)})),e}},{key:"setInput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.inputName||this.defaultName,r=arguments.length>2?arguments[2]:void 0;this.input[e]=t,!r&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(t){this.input=t}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.changedOptions(t);this.options=Object.assign(this.options,t),e.length&&(this.options.debug&&console.log("changedOptions",e),this.onSetOptions(e),this.render())}},{key:"changedOptions",value:function(t){var e=this;return Object.keys(t).filter((function(r){return JSON.stringify(t[r])!==JSON.stringify(e.options[r])}))}},{key:"onSetOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(t.includes("layoutCandidatesPageSize")||t.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new m({utilities:this.utilities}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.buttonElements={}}},{key:"dispatch",value:function(t){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach((function(e){t(window.SimpleKeyboardInstances[e],e)}))}},{key:"addButtonTheme",value:function(t,e){var r=this;e&&t&&(t.split(" ").forEach((function(n){e.split(" ").forEach((function(e){r.options.buttonTheme||(r.options.buttonTheme=[]);var o=!1;r.options.buttonTheme.map((function(t){if(null!=t&&t.class.split(" ").includes(e)){o=!0;var r=t.buttons.split(" ");r.includes(n)||(o=!0,r.push(n),t.buttons=r.join(" "))}return t})),o||r.options.buttonTheme.push({class:e,buttons:t})}))})),this.render())}},{key:"removeButtonTheme",value:function(t,e){var r=this;if(!t&&!e)return this.options.buttonTheme=[],void this.render();t&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(t.split(" ").forEach((function(t){var n,o;null===(n=r.options)||void 0===n||null===(o=n.buttonTheme)||void 0===o||o.map((function(n,o){if(n&&e&&e.includes(n.class)||!e){var i,a,s=null===(i=n)||void 0===i?void 0:i.buttons.split(" ").filter((function(e){return e!==t}));n&&null!=s&&s.length?n.buttons=s.join(" "):(null===(a=r.options.buttonTheme)||void 0===a||a.splice(o,1),n=null)}return n}))})),this.render())}},{key:"getButtonElement",value:function(t){var e,r=this.buttonElements[t];return r&&(e=r.length>1?r:r[0]),e}},{key:"inputPatternIsValid",value:function(t){var e,r=this.options.inputPattern;if((e=r instanceof RegExp?r:r[this.options.inputName||this.defaultName])&&t){var n=e.test(t);return this.options.debug&&console.log('inputPattern ("'.concat(e,'"): ').concat(n?"passed":"did not pass!")),n}return!0}},{key:"setEventListeners",value:function(){!this.isFirstKeyboardInstance&&this.allKeyboardInstances||(this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")")),document.addEventListener("keyup",this.handleKeyUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("select",this.handleSelect),document.addEventListener("selectionchange",this.handleSelectionChange))}},{key:"handleKeyUp",value:function(t){this.caretEventHandler(t),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(t)}},{key:"handleKeyDown",value:function(t){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(t)}},{key:"handleMouseUp",value:function(t){this.caretEventHandler(t)}},{key:"handleTouchEnd",value:function(t){this.caretEventHandler(t)}},{key:"handleSelect",value:function(t){this.caretEventHandler(t)}},{key:"handleSelectionChange",value:function(t){this.caretEventHandler(t)}},{key:"caretEventHandler",value:function(t){var e,r=this;t.target.tagName&&(e=t.target.tagName.toLowerCase()),this.dispatch((function(n){var o=t.target===n.keyboardDOM||t.target&&n.keyboardDOM.contains(t.target);n.isMouseHold&&(n.isMouseHold=!1),("textarea"===e||"input"===e&&["text","search","url","tel","password"].includes(t.target.type))&&!n.options.disableCaretPositioning?(n.setCaretPosition(t.target.selectionStart,t.target.selectionEnd),r.activeInputElement=t.target,n.options.debug&&console.log("Caret at: ",n.getCaretPosition(),n.getCaretPositionEnd(),t&&t.target.tagName.toLowerCase(),"(".concat(n.keyboardDOMClass,")"))):!n.options.disableCaretPositioning&&o||"selectionchange"===(null==t?void 0:t.type)||(n.setCaretPosition(null),r.activeInputElement=null,n.options.debug&&console.log('Caret position reset due to "'.concat(null==t?void 0:t.type,'" event'),t))}))}},{key:"recurseButtons",value:function(t){var e=this;t&&Object.keys(this.buttonElements).forEach((function(r){return e.buttonElements[r].forEach(t)}))}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName)),document.removeEventListener("keyup",this.handleKeyUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons((function(t){t&&(t.onpointerdown=null,t.onpointerup=null,t.onpointercancel=null,t.ontouchstart=null,t.ontouchend=null,t.ontouchcancel=null,t.onclick=null,t.onmousedown=null,t.onmouseup=null,t.remove(),t=null)})),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(t){var e=this.options.buttonTheme,r=[];return Array.isArray(e)&&e.forEach((function(e){if(e&&e.class&&"string"==typeof e.class&&e.buttons&&"string"==typeof e.buttons){var n=e.class.split(" ");e.buttons.split(" ").includes(t)&&(r=[].concat(f(r),f(n)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',e)})),r}},{key:"setDOMButtonAttributes",value:function(t,e){var r=this.options.buttonAttributes;Array.isArray(r)&&r.forEach((function(r){r.attribute&&"string"==typeof r.attribute&&r.value&&"string"==typeof r.value&&r.buttons&&"string"==typeof r.buttons?r.buttons.split(" ").includes(t)&&e(r.attribute,r.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',r)}))}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(t){if(t.target.classList.contains("hg-button"))return t.preventDefault(),t.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),"function"==typeof this.options.onInit&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),"function"==typeof this.options.beforeFirstRender&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){"function"==typeof this.options.beforeRender&&this.options.beforeRender(this)}},{key:"onRender",value:function(){"function"==typeof this.options.onRender&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){"function"==typeof this.options.onModulesLoaded&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var t=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach((function(e){var r=new e(t);r.init&&r.init(t)})),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(t,e){return!!this.modules[t]&&this.modules[t][e]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(t,e,r,n){var o=this,i=Array.from(t.children),a=0;return i.length&&r.forEach((function(r,s){var c=n[s];if(!(c&&c>r))return!1;var l=r-a,u=c-a,d=document.createElement("div");d.className+="hg-button-container";var p="".concat(o.options.layoutName,"-r").concat(e,"c").concat(s);d.setAttribute("data-skUID",p);var m=i.splice(l,u-l+1);a=u-l,m.forEach((function(t){return d.appendChild(t)})),i.splice(l,0,d),t.innerHTML="",i.forEach((function(e){return t.appendChild(e)})),o.options.debug&&console.log("rowDOMContainer",m,l,u,a+1)})),t}},{key:"render",value:function(){var t=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var e="hg-layout-".concat(this.options.layoutName),r=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},n=this.options.useTouchEvents||!1,o=n?"hg-touch-events":"",i=this.options.useMouseEvents||!1,a=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,e,this.keyboardPluginClasses,o),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",r[this.options.layoutName||this.defaultName].forEach((function(e,r){var o=e.split(" ");t.options.excludeFromLayout&&t.options.excludeFromLayout[t.options.layoutName||t.defaultName]&&(o=o.filter((function(e){return t.options.excludeFromLayout&&!t.options.excludeFromLayout[t.options.layoutName||t.defaultName].includes(e)})));var s=document.createElement("div");s.className+="hg-row";var c=[],l=[];o.forEach((function(e,o){var u,d=!a&&"string"==typeof e&&e.length>1&&0===e.indexOf("["),p=!a&&"string"==typeof e&&e.length>1&&e.indexOf("]")===e.length-1;d&&(c.push(o),e=e.replace(/\[/g,"")),p&&(l.push(o),e=e.replace(/\]/g,""));var m=t.utilities.getButtonClass(e),h=t.utilities.getButtonDisplayName(e,t.options.display,t.options.mergeDisplay),v=t.options.useButtonTag?"button":"div",_=document.createElement(v);_.className+="hg-button ".concat(m),(u=_.classList).add.apply(u,f(t.getButtonThemeClasses(e))),t.setDOMButtonAttributes(e,(function(t,e){_.setAttribute(t,e)})),t.activeButtonClass="hg-activeButton",!t.utilities.pointerEventsSupported()||n||i?n?(_.ontouchstart=function(r){t.handleButtonClicked(e,r),t.handleButtonMouseDown(e,r)},_.ontouchend=function(r){t.handleButtonMouseUp(e,r)},_.ontouchcancel=function(r){t.handleButtonMouseUp(e,r)}):(_.onclick=function(r){t.isMouseHold=!1,t.handleButtonClicked(e,r)},_.onmousedown=function(r){t.handleButtonMouseDown(e,r)},_.onmouseup=function(r){t.handleButtonMouseUp(e,r)}):(_.onpointerdown=function(r){t.handleButtonClicked(e,r),t.handleButtonMouseDown(e,r)},_.onpointerup=function(r){t.handleButtonMouseUp(e,r)},_.onpointercancel=function(r){t.handleButtonMouseUp(e,r)}),_.setAttribute("data-skBtn",e);var g="".concat(t.options.layoutName,"-r").concat(r,"b").concat(o);_.setAttribute("data-skBtnUID",g);var b=document.createElement("span");b.innerHTML=h,_.appendChild(b),t.buttonElements[e]||(t.buttonElements[e]=[]),t.buttonElements[e].push(_),s.appendChild(_)})),s=t.parseRowDOMContainers(s,r,c,l),t.keyboardRowsDOM.appendChild(s)})),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||n||i?n?(document.ontouchend=function(e){return t.handleButtonMouseUp(void 0,e)},document.ontouchcancel=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.ontouchstart=function(e){return t.handleKeyboardContainerMouseDown(e)}):n||(document.onmouseup=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.onmousedown=function(e){return t.handleKeyboardContainerMouseDown(e)}):(document.onpointerup=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.onpointerdown=function(e){return t.handleKeyboardContainerMouseDown(e)}),this.onInit())}}])&&y(e.prototype,r),n&&y(e,n),t}()}(),n}()},6151:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});const n={props:{value:{type:[Number,String],default:0},step:{default:.1},min:{default:0,type:Number},max:{type:Number}},data:function(){return{newValue:0}},methods:{plus:function(){(void 0===this.max||this.newValue<this.max)&&(this.newValue=parseFloat(parseFloat(parseFloat(this.newValue)+parseFloat(this.step)).toFixed(2)),this.$emit("input",this.newValue))},minus:function(){this.newValue>this.min&&(this.newValue=parseFloat(parseFloat(parseFloat(this.newValue)-parseFloat(this.step)).toFixed(2)),this.$emit("input",this.newValue))}},watch:{value:{handler:function(t,e){this.newValue=t}}},created:function(){this.newValue=parseFloat(this.value)}};var o=r(93379),i=r.n(o),a=r(45991),s={insert:"head",singleton:!1};i()(a.Z,s);a.Z.locals;const c=(0,r(51900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-number text-center"},[r("div",{staticClass:"input-button first",on:{click:function(e){return t.minus()}}},[r("Icon",{attrs:{type:"md-remove",size:"16"}})],1),t._v(" "),r("div",{staticClass:"field-container"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newValue,expression:"newValue"}],staticStyle:{width:"100%"},attrs:{step:t.step,type:"number"},domProps:{value:t.newValue},on:{input:[function(e){e.target.composing||(t.newValue=e.target.value)},function(e){return t.$emit("input",t.newValue)}]}})]),t._v(" "),r("div",{staticClass:"input-button last",on:{click:function(e){return t.plus()}}},[r("Icon",{attrs:{type:"md-add",size:"16"}})],1)])}),[],!1,null,"a81d4f58",null).exports},22254:(t,e,r)=>{"use strict";r.d(e,{Z:()=>h});var n=r(18446),o=r.n(n);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const u={components:{InputNumberComponent:r(6151).Z},props:{item:{required:!0},purchase:{type:Boolean,default:!1,required:!1}},data:function(){return{show:!1,form:{quantity:1,portion_id:null,variation_id:null,meta:{},portion:null,modifiers:[],serials:[]}}},watch:{item:function(t){this.setPortion()}},mounted:function(){this.setPortion()},methods:{setPortion:function(){var t=this;this.form={quantity:1,portion_id:null,variation_id:null,meta:{},portion:null,modifiers:[],serials:[]},this.$nextTick((function(){if(t.item.portions&&t.item.portions.length){var e=t.item.portions.find((function(t){return"regular"==t.name}));t.form.portion=c({},e),t.form.portion_id=e.id,t.form.portion.essentials.map((function(t){if(t.variation_id)for(var e=t.item.variations.find((function(e){return e.id==t.variation_id})),r=0,n=Object.entries(e.meta);r<n.length;r++){var o=i(n[r],2),a=o[0],s=o[1];t[a]=s}})),t.form.portion.choosables.map((function(t){t.items.map((function(e){if(e.variation_id)for(var r=e.item.variations.find((function(t){return t.id==e.variation_id})),n=0,o=Object.entries(r.meta);n<o.length;n++){var a=i(o[n],2),s=a[0],c=a[1];t[s]=c}}))}))}}))},modOptLabel:function(t){return t.item.name+" (+"+this.formatDecimal(t.item.price)+")"},selectChoosableVariant:function(t){this.form.portion.choosables=this.form.portion.choosables.map((function(e){return e.selected&&e.id==t&&(e.items=e.items.map((function(t){if(t.item.id==e.selected){var r={};if(t&&t.item.variants){t.item.variants.map((function(e){return t[e.name]?r[e.name]=t[e.name]:""}));var n=t.item.variations.find((function(t){return o()(t.meta,r)}));t.variation_id=n?n.id:null}}return t}))),e}))},selectPortionItemVariant:function(t){this.form.portion.portion_items=this.form.portion.portion_items.map((function(e){if(e.id==t){var r={};e.item.variants.map((function(t){return e[t.name]?r[t.name]=e[t.name]:""}));var n=e.item.variations.find((function(t){return o()(t.meta,r)}));e.variation_id=n?n.id:null}return e}))},selectEssentialVariant:function(t){this.form.portion.essentials=this.form.portion.essentials.map((function(e){if(e.id==t){var r={};e.item.variants.map((function(t){return e[t.name]?r[t.name]=e[t.name]:""}));var n=e.item.variations.find((function(t){return o()(t.meta,r)}));e.variation_id=n?n.id:null}return e}))},selectVariant:function(){var t=this,e=this.item.variations.find((function(e){return o()(e.meta,t.form.meta)}));e&&(this.qty=this.formatDecimal(e.location_stock[0].quantity),this.show=!0,this.form.variation_id=e.id)},portionChanged:function(t){var e=t?this.item.portions.find((function(e){return e.id==t})):{};this.form.portion=c({},e)},submit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(t.item.serials&&t.item.serials.length&&t.form.serials.length!=t.form.quantity)return t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10}),!1;if(t.item.modifiers&&t.item.modifiers.length&&t.item.modifiers.map((function(e){e.selected&&("checkbox"==e.show_as||"select_multiple"==e.show_as?e.selected.map((function(r){e.options.map((function(n){r==n.id&&t.form.modifiers.push({id:n.id,mId:e.id,quantity:1,cost:n.item.cost,option:n.item.name,price:n.item.price,title:e.title})}))})):e.options.map((function(r){e.selected==r.id&&t.form.modifiers.push({id:r.id,mId:e.id,quantity:1,cost:r.item.cost,option:r.item.name,price:r.item.price,title:e.title})})))})),t.form.portion){var r={choosables:[],essentials:[],portion_items:[],id:t.form.portion.id,name:t.form.portion.name,quantity:t.form.quantity,cost:t.form.portion.cost,price:t.form.portion.price};t.form.portion.portion_items.map((function(t){var e=t.item.variations.find((function(e){return e.id==t.variation_id}));r.portion_items.push({id:t.id,item_id:t.item.id,variants:t.item.variants,variation_id:t.variation_id,variations:t.item.variations,meta:e?e.meta:null})})),t.form.portion.essentials.map((function(t){var e=t.item.variations.find((function(e){return e.id==t.variation_id}));r.essentials.push({id:t.id,item_id:t.item.id,variants:t.item.variants,variation_id:t.variation_id,variations:t.item.variations,meta:e?e.meta:null})})),t.form.portion.choosables.map((function(t){var e=t.items.find((function(e){return e.item_id==t.selected})),n=e.item.variations.find((function(t){return t.id==e.variation_id}));r.choosables.push({id:t.id,selected:t.selected,variants:e.item.variants,variation_id:e.variation_id,variations:e.item.variations,meta:n?n.meta:null})})),t.form.selected_portion=r}else t.form.selected_portion=null;if(t.form.variation_id){var n=t.item.variations?t.item.variations.find((function(e){return e.id==t.form.variation_id})):null,o=n?{id:n.id,meta:n.meta,quantity:t.form.quantity,cost:n.location_stock[0].cost,price:n.location_stock[0].price,available:t.formatDecimal(n.location_stock[0].quantity)}:null;t.form.selected_variation=n?o:null}else t.form.selected_variation=null;t.$emit("on-submit",t.form)}else t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10})}))}}};var d=r(93379),p=r.n(d),m=r(19270),f={insert:"head",singleton:!1};p()(m.Z,f);m.Z.locals;const h=(0,r(51900).Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{ref:"form",attrs:{model:t.form,"label-position":"top"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"text-center",attrs:{label:t.$t("quantity")}},[r("InputNumber",{attrs:{size:"large"},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}})],1)],1),t._v(" "),t.item.serials&&t.item.serials.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.item.serials.length?r("FormItem",{attrs:{label:t.$tc("serial_number",2),prop:"serials",rules:[{required:!0,type:"array",size:t.form.quantity,message:t.$t("field_are_required",{field:t.$tc("serial_number",2)}),trigger:"change"}]}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.form.serials,callback:function(e){t.$set(t.form,"serials",e)},expression:"form.serials"}},t._l(t.item.serials,(function(e,n){return r("Option",{key:"serial_"+n,attrs:{value:e.id}},[t._v("\n                "+t._s(e.number)+"\n              ")])})),1)],1):t._e()],1)]:t._e(),t._v(" "),t.item.portions&&t.item.portions.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Card",{staticClass:"cardp",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-option"}}),t._v("\n              "+t._s(t.$tc("portion"))+":\n              "+t._s(t.item&&t.form.portion_id?" ("+("regular"==t.form.portion.name?t.$t("regular"):t.form.portion.name)+")":"")+"\n            ")],1),t._v(" "),r("Row",[t.item.portions.length>1?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("RadioGroup",{staticClass:"mb16",attrs:{type:"button"},on:{"on-change":t.portionChanged},model:{value:t.form.portion_id,callback:function(e){t.$set(t.form,"portion_id",e)},expression:"form.portion_id"}},t._l(t.item.portions,(function(e,n){return r("Radio",{key:"pi_"+n,attrs:{label:e.id}},[t._v("\n                      "+t._s("regular"==e.name?t.$t("regular"):e.name)+"\n                    ")])})),1)],1)]:t._e(),t._v(" "),t.form.portion_id?r("Col",{attrs:{sm:24,md:24,lg:24}},[t.form.portion.portion_items&&t.form.portion.portion_items.length?[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$tc("item",t.form.portion.portion_items.length))+"\n                    ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                    "+t._s(t.form.portion.portion_items.map((function(t){return t.item.name})).join(", "))+"\n                  ")])]:t._e(),t._v(" "),t.form.portion.essentials&&t.form.portion.essentials.length?r("span",[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$t("essential_items"))+"\n                    ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                    "+t._s(t.form.portion.essentials.map((function(t){return t.item.name})).join(", "))+"\n                  ")])],1):t._e(),t._v(" "),t.form.portion.choosables&&t.form.portion.choosables.length?r("span",[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                      "+t._s(t.$t("choosable_items"))+"\n                    ")])]),t._v(" "),t._l(t.form.portion.choosables,(function(e,n){return r("div",{key:"gi_"+n},[r("FormItem",{attrs:{label:e.name,prop:"portion.choosables."+n+".selected",rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("item")})}}},[r("RadioGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"g.selected"}},t._l(e.items,(function(e,n){return r("Radio",{key:"gii_"+n,attrs:{"false-value":"",label:e.item_id,"true-value":e.item_id}},[t._v("\n                          "+t._s(e.item.name)+"\n                        ")])})),1)],1)],1)}))],2):t._e(),t._v(" "),t.form.portion.portion_items&&t.form.portion.portion_items.length?t._l(t.form.portion.portion_items,(function(e,n){return r("div",{key:"eiv_"+n},[e.item.variants&&e.item.variants.length?[r("div",{key:"t_"+n,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(e.item.name)+" ("+t._s(t.$tc("variation"))+")")])]),t._v(" "),r("Row",{key:"r_"+n,attrs:{gutter:16}},t._l(e.item.variants,(function(o,i){return r("Col",{key:"pcsv_"+i,attrs:{xs:24,sm:12}},[r("FormItem",{key:"picsvf_"+o.id,attrs:{label:o.name,prop:"portion.portion_items["+n+"]."+o.name,rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("variant")})}}},[r("Select",{on:{"on-change":function(r){return t.selectPortionItemVariant(e.id)}},model:{value:e[o.name],callback:function(r){t.$set(e,o.name,r)},expression:"e[v.name]"}},t._l(o.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()],2)})):t._e(),t._v(" "),t.form.portion.essentials&&t.form.portion.essentials.length?t._l(t.form.portion.essentials,(function(e,n){return r("div",{key:"eiv_"+n},[e.item.variants&&e.item.variants.length?[r("div",{key:"t_"+n,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(e.item.name)+" ("+t._s(t.$tc("variation"))+")")])]),t._v(" "),r("Row",{key:"r_"+n,attrs:{gutter:16}},t._l(e.item.variants,(function(o,i){return r("Col",{key:"pcsv_"+i,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+o.id,attrs:{label:o.name,prop:"portion.essentials["+n+"]."+o.name,rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("variant")})}}},[r("Select",{on:{"on-change":function(r){return t.selectEssentialVariant(e.id)}},model:{value:e[o.name],callback:function(r){t.$set(e,o.name,r)},expression:"e[v.name]"}},t._l(o.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()],2)})):t._e(),t._v(" "),t.form.portion.choosables&&t.form.portion.choosables.length?t._l(t.form.portion.choosables,(function(e,n){return r("div",{key:"giv_"+n},[t._l(e.items,(function(o,i){return[e.selected&&e.selected==o.item.id&&o.item.variants&&o.item.variants.length?[r("div",{key:"t_"+n,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(e.name))]),t._v(": "+t._s(o.item.name)+" ("+t._s(t.$tc("variation"))+")\n                        ")]),t._v(" "),r("Row",{key:"r_"+n,attrs:{gutter:16}},t._l(o.item.variants,(function(o,a){return r("Col",{key:"pcsv_"+a,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+o.id,attrs:{label:o.name,prop:"portion.choosables["+n+"].items["+i+"]."+o.name,rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("variant")})}}},[r("Select",{on:{"on-change":function(r){return t.selectChoosableVariant(e.id)}},model:{value:e.items[i][o.name],callback:function(r){t.$set(e.items[i],o.name,r)},expression:"g.items[optionI][v.name]"}},t._l(o.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()]}))],2)})):t._e()],2):t._e()],2)],1)],1)]:t._e(),t._v(" "),t.item.variants&&t.item.variants.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n              "+t._s(t.$tc("variant",2))+"\n            ")])])],1),t._v(" "),t._l(t.item.variants,(function(e,n){return r("Col",{key:"sv_"+n,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:e.name,prop:"meta."+e.name,rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("variant")})}}},[r("Select",{on:{"on-change":t.selectVariant},model:{value:t.form.meta[e.name],callback:function(r){t.$set(t.form.meta,e.name,r)},expression:"form.meta[v.name]"}},t._l(e.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),t._v(" "),t.item.variants.length%2==1?r("Col",{attrs:{sm:24,md:12,lg:12}}):t._e(),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[t.show?r("Alert",{staticClass:"mb16",attrs:{type:"info","show-icon":""}},[r("strong",[t.purchase?r("span",[t._v(t._s(this.$t("current_stock")))]):r("span",[t._v(t._s(this.$t("available_x",{x:this.$t("quantity")})))]),t._v(": "+t._s(this.qty))])]):t._e()],1)]:t._e(),t._v(" "),!t.purchase&&t.item.modifiers&&t.item.modifiers.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n              "+t._s(t.$tc("modifier",2))+"\n            ")])])],1),t._v(" "),t._l(t.item.modifiers,(function(e,n){return r("Col",{key:"mi_"+n,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:e.title,prop:"modifiers"}},["radio"==e.show_as?r("span",[r("RadioGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"checkbox"==e.show_as?r("span",[r("CheckboxGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select"==e.show_as?r("span",[r("Select",{model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select_multiple"==e.show_as?r("span",[r("Select",{attrs:{multiple:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):t._e()])],1)}))]:t._e()],2)],1),t._v(" "),r("div",{staticClass:"text-right"},[r("Button",{attrs:{long:"",type:"primary",disabled:t.form.quantity<1},on:{click:t.submit}},[t._v("\n      "+t._s(this.$t("add"))+"\n    ")])],1)],1)}),[],!1,null,null,null).exports},26639:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>h});var n,o=r(14748);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const u=(s(n={components:{FullscreenComponent:r(68835).Z,PosOrderItemsComponent:o.Z},data:function(){return{updated:0,unsub:null,loading:!0,location:null,isFullscreen:!1,order:this.$storage.read("order")}},computed:{isMobile:function(){return window&&document.documentElement.clientWidth<=768},cols:function(){var t=3;return 1==this.$store.getters.settings.show_discount&&t++,1==this.$store.getters.settings.show_tax&&t++,t}},watch:{},created:function(){var t=this;window&&this.$route.meta.title&&(document.title=this.$route.meta.title+" - "+this.$store.getters.settings.name),this.unsub=setInterval((function(){t.updated++,t.order=t.$storage.read("order"),t.$nextTick((function(){t.$refs.orderItems&&t.$refs.orderItems.scrollHeight&&(t.$refs.orderItems.scrollTop=t.$refs.orderItems.scrollHeight)}))}),2e3)},beforeDestory:function(){this.unsub&&clearInterval(this.unsub)}},"computed",{orderTotalItems:function(){return this.order&&this.order.items?this.order.items.length:0},orderOriginalTotal:function(){var t=this;if(this.order&&"order"!=this.order.discount_method){var e=c(this.order.items).map((function(e){var r={allTaxes:c(e.allTaxes),quantity:e.quantity,selected:{}};return r.price=e.price,r.selected.variations=e.selected.variations.map((function(t){return a({},t)})),r.selected.portions=e.selected.portions.map((function(t){return a({},t)})),r.selected.modifiers=e.selected.modifiers.map((function(t){return a({},t)})),parseFloat(t.calcRowOriginalTotal(r))})).reduce((function(t,e){return t+e}),0);return this.formatDecimal(e)}return 0},orderDiscount:function(){return this.order&&"order"==this.order.discount_method?this.formatDecimal(this.orderTotalAmount*this.order.discount/100):0},orderTotalQuantity:function(){return this.order?this.order.items.map((function(t){return t.quantity})).reduce((function(t,e){return t+e}),0):0},orderPayableAmount:function(){return this.order?this.formatDecimal(this.orderTotalAmount-this.orderDiscount):0},paymentChange:function(){return this.paymentForm.amount>this.orderTotalAmount?this.paymentForm.amount-this.orderTotalAmount:0},totalItemTax:function(){var t=this,e=this.order.items.reduce((function(e,r){var n=(r=t.doTaxCalculation(r)).taxes.reduce((function(t,e){return t+parseFloat(e.amount)*parseFloat(r.quantity)}),0);return parseFloat(e+n)}),0);return this.formatDecimal(e)},orderTotalAmount:function(){var t=this;c(this.order.items);return this.formatDecimal(this.order.items.reduce((function(e,r){return e+(r?t.calcRowTotal(r):0)}),0))}}),s(n,"methods",{toggleFullScreen:function(){this.$event.fire("expand:view")},calcRowOriginalTotal:function(t){var e=this,r=0;return t.selected.modifiers.length&&(r+=t.selected.modifiers.reduce((function(r,n){var o=parseFloat(n.price);return n.taxes=e.calculateTaxes(t.allTaxes,o),n.total_tax_amount=e.calcItemTax(n),r+parseFloat(n.quantity)*(o+parseFloat(n.total_tax_amount))}),0)),t.selected.variations.length||t.selected.portions.length?(t.selected.variations.length&&(r+=t.selected.variations.reduce((function(r,n){var o=parseFloat(n.price?n.price:t.price);return n.taxes=e.calculateTaxes(t.allTaxes,o),n.total_tax_amount=e.calcItemTax(n),r+parseFloat(n.quantity)*(o+parseFloat(n.total_tax_amount))}),0)),t.selected.portions.length&&(r+=t.selected.portions.reduce((function(r,n){var o=parseFloat(n.price);return n.taxes=e.calculateTaxes(t.allTaxes,o),n.total_tax_amount=e.calcItemTax(n),r+parseFloat(n.quantity)*(o+parseFloat(n.total_tax_amount))}),0)),r):(t.taxes=this.calculateTaxes(t.allTaxes,t.price),t.total_tax_amount=this.calcItemTax(t),r+parseFloat(t.quantity)*(parseFloat(t.price)+t.total_tax_amount))},calcRowTotal:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0;return t.selected.modifiers.length&&(r+=t.selected.modifiers.reduce((function(t,e){return t+parseFloat(e.quantity)*(parseFloat(e.price)-parseFloat(e.price&&e.discount_amount?e.discount_amount:0)+parseFloat(e.price?e.total_tax_amount:0))}),0)),t.total_tax_amount=t?this.calcItemTax(t):0,e||!t.selected.variations.length&&!t.selected.portions.length?r+this.formatDecimal(parseFloat(e?e.quantity:t.quantity)*(parseFloat(e?e.price:t.price)-parseFloat(e?e.discount_amount:t.discount_amount?t.discount_amount:0)+(e?e.total_tax_amount:t.total_tax_amount))):(t.selected.variations.length&&(r+=t.selected.variations.reduce((function(e,r){return e+parseFloat(r.quantity)*(parseFloat(r.price?r.price:t.price)-parseFloat(r.price&&r.discount_amount?r.discount_amount:0)+parseFloat(r.price?r.total_tax_amount:0))}),0)),t.selected.portions.length&&(r+=t.selected.portions.reduce((function(t,e){return t+parseFloat(e.quantity)*(parseFloat(e.price)-parseFloat(e.price&&e.discount_amount?e.discount_amount:0)+parseFloat(e.price?e.total_tax_amount:0))}),0)),r)},getPortionChoosable:function(t,e,r){return t.choosables.find((function(t){return t.id==e})).selected==r},calcItemTax:function(t){return t.taxes.reduce((function(t,e){return t+parseFloat(e.amount)}),0)},calculateTaxes:function(t,e){var r=this,n=(t=this.applicableTaxes(t)).filter((function(t){return 1==t.compound})),o=t.filter((function(t){return 0==t.compound})).map((function(t){return a(a({},t),{},{value:t.id,on:parseFloat(e),amount:r.formatDecimal(parseFloat(e)*parseFloat(t.rate)/100)})})),i=o.reduce((function(t,e){return t+parseFloat(e.amount)}),0),s=n.map((function(t){return a(a({},t),{},{value:t.id,on:parseFloat(e)+parseFloat(i),amount:r.formatDecimal((parseFloat(e)+parseFloat(i))*parseFloat(t.rate)/100)})}));return[].concat(c(o),c(s))},applicableTaxes:function(t){var e=this;return t.filter((function(t){var r=e.$store.getters.location;if(t.state&&e.order.customer&&r){var n=e.order.customer.state==r.state;return t.same?n:!n}return!0}))}}),n);var d=r(93379),p=r.n(d),m=r(17411),f={insert:"head",singleton:!1};p()(m.Z,f);m.Z.locals;const h=(0,r(51900).Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"layout"},[r("Layout",[r("Content",{staticClass:"cv-main"},[r("Header",{style:{position:"absolute",width:"100%",padding:"0 16px"}},[r("div",{staticClass:"logo"},[t._v(t._s(t.$store.getters.settings.name))])]),t._v(" "),r("div",{staticClass:"promo-contents"},[r("h1",{staticClass:"mt16 mb16"},[t._v(t._s(t.$t("thank_you_for_shopping")))]),t._v(" "),r("h3",{staticClass:"mb16"},[t._v("\n          "+t._s(t.$t("cv_feedback_text"))+"\n        ")]),t._v(" "),r("h1",{staticClass:"mt16 text-muted"},[t._v("Modern Point of Sale Solution")]),t._v(" "),r("h3",{staticClass:"text-muted"},[t._v("by Tecdiary")])]),t._v(" "),t.order?r("Row",{staticClass:"content"},[r("Col",{staticClass:"pos-order"},[r("div",{staticClass:"above-order-items"},[r("div",{staticClass:"order-info"},[r("span",{staticClass:"details customer_selection",staticStyle:{"margin-right":"20px"}},[t._v("\n                "+t._s(t.$t("ref_tab"))+": "),r("strong",[t._v(t._s(t.order.oId))])]),t._v(" "),r("span",{staticClass:"other"},[r("fullscreen-component",{staticClass:"hidden-sm",model:{value:t.isFullscreen,callback:function(e){t.isFullscreen=e},expression:"isFullscreen"}})],1)]),t._v(" "),r("div",{staticClass:"order-sub-details"},[t.order.user?r("span",{staticClass:"details"},[t._v("\n                "+t._s(t.$t("served_by"))+": "),r("strong",[t._v(t._s(t.order.user.name))])]):r("span",{staticClass:"details"},[t._v("\n                "+t._s(t.$t("served_by"))+":\n                "),r("strong",[t._v(t._s(t.$store.getters.user&&t.$store.getters.user.acting_user?t.$store.getters.user.acting_user.name:t.$store.getters.user.name))])]),t._v(" "),r("span",{staticClass:"other"},[r("strong",[t._v(t._s(t.orderTotalItems))]),t._v(" "+t._s(t.$tc("item",t.orderTotalItems))+" "),r("strong",[t._v(t._s(t.orderTotalQuantity))]),t._v("\n                "+t._s(t.$t("quantity"))+"\n              ")])])]),t._v(" "),r("div",{staticClass:"pos-order-items"},[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("decs")))]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(t._s(t.$t("qty")))]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(t._s(t.$t("subtotal")))])]),t._v(" "),r("div",{ref:"orderItems",staticClass:"pos-order-scroll scroll-x"},t._l(t.order.items,(function(e,n){return r("div",{key:n+"_"+e.id,staticClass:"order-item"},[r("span",{staticClass:"item"},[r("span",{staticClass:"index align-top"},[t._v(" #"+t._s(n+1)+" ")]),t._v(" "),r("span",{staticClass:"detail"},[r("strong",[t._v(t._s(e.name))]),t._v(" "),r("br"),t._v(" "),r("span",[t.order.customer&&t.order.customer.customer_group?r("span",{domProps:{innerHTML:t._s(t.order.customer.customer_group.name+" (<small>"+t.$t("discount")+": "+t.order.customer.customer_group.discount+"%</small>)<br />")}}):t._e(),t._v(" "),e.selected.variations&&e.selected.portions&&!e.selected.portions.length&&!e.selected.variations.length?r("span",[0==e.discount_amount?r("span",[t._v("\n                            @"+t._s(t._f("formatNumber")(e.price,t.$store.state.settings.decimals))+"\n                            "),e.total_tax_amount>0?r("span",[t._v("\n                              + "+t._s(t._f("formatNumber")(e.total_tax_amount,t.$store.state.settings.decimals))+"\n                            ")]):t._e()]):r("span",[t._v("\n                            @"),r("del",[t._v(t._s(t._f("formatNumber")(e.price,t.$store.state.settings.decimals)))]),t._v("\n                            "+t._s(t._f("formatNumber")(e.price-e.discount_amount,t.$store.state.settings.decimals))+"\n                            "),e.total_tax_amount>0?r("span",[t._v("\n                              + "+t._s(t._f("formatNumber")(e.total_tax_amount,t.$store.state.settings.decimals))+"\n                            ")]):t._e()])]):t._e()])]),t._v(" "),r("span",{staticClass:"quantity bold"},[t._v("\n                      "+t._s(t._f("formatQtyDecimal")(e.quantity,t.$store.state.settings.quantity_decimals))+"\n                    ")]),t._v(" "),r("span",{staticClass:"subtotal"},[e.selected.portions&&!e.selected.portions.length?r("span",[t._v("\n                        "+t._s(t._f("formatNumber")((e.price+e.total_tax_amount)*e.quantity,t.$store.state.settings.decimals))+"\n                      ")]):t._e()])]),t._v(" "),e.selected.variations&&e.selected.variations.length?t._l(e.selected.variations,(function(e,n){return r("div",{key:"svi_"+n,staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details leading-medium"},[r("small",[t._v("#"+t._s(n+1))]),t._v(" "),r("span",{domProps:{innerHTML:t._s(t.metaString(e.meta))}}),t._v(" "),r("br"),t._v(" "),0==e.discount_amount?r("span",[t._v("\n                          @"+t._s(t._f("formatNumber")(e.price,t.$store.state.settings.decimals))+" +\n                          "+t._s(t._f("formatNumber")(t.calcItemTax(e),t.$store.state.settings.decimals))+"\n                        ")]):r("span",[t._v("\n                          @"),r("del",[t._v(t._s(t._f("formatNumber")(e.price,t.$store.state.settings.decimals)))]),t._v("\n                          "+t._s(t._f("formatNumber")(e.price-e.discount_amount,t.$store.state.settings.decimals))+"\n                          "),t.calcItemTax(e)>0?r("span",[t._v(" + "+t._s(t._f("formatNumber")(t.calcItemTax(e),t.$store.state.settings.decimals))+" ")]):t._e()])]),t._v(" "),r("span",{staticClass:"quantity bold"},[t._v("\n                        "+t._s(t._f("formatQtyDecimal")(e.quantity,t.$store.state.settings.quantity_decimals))+"\n                      ")]),t._v(" "),r("span",{staticClass:"subtotal"})])})):t._e(),t._v(" "),e.selected.portions.length?t._l(e.selected.portions,(function(n,o){return r("div",{key:"spi_"+o,staticClass:"combo"},t._l(e.portions.filter((function(t){return t.id==n.id})),(function(e){return r("div",{key:"pi_"+e.id,staticClass:"combo"},[r("div",{staticClass:"combo-item variation"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details leading-medium"},[r("p",[t._v("\n                              "+t._s(o+1)+". "+t._s(t.$tc("portion"))+":\n                              "),r("strong",[t._v(t._s("regular"==e.name?t.$t("regular"):e.name))]),t._v(" "),r("br"),t._v(" "),0==n.discount_amount?r("span",[t._v("\n                                @"+t._s(t._f("formatNumber")(n.price,t.$store.state.settings.decimals))+" +\n                                "+t._s(t._f("formatNumber")(t.calcItemTax(n),t.$store.state.settings.decimals))+"\n                              ")]):r("span",[t._v("\n                                @"),r("del",[t._v(t._s(t._f("formatNumber")(n.price,t.$store.state.settings.decimals)))]),t._v("\n                                "+t._s(t._f("formatNumber")(n.price-n.discount_amount,t.$store.state.settings.decimals))+"\n                                "),t.calcItemTax(n)>0?r("span",[t._v("\n                                  + "+t._s(t._f("formatNumber")(t.calcItemTax(n),t.$store.state.settings.decimals))+"\n                                ")]):t._e()])])]),t._v(" "),r("span",{staticClass:"quantity bold"},[t._v("\n                            "+t._s(t._f("formatQtyDecimal")(n.quantity,t.$store.state.settings.quantity_decimals))+"\n                          ")]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n                            "+t._s(t.formatNumber((n.price-n.discount_amount+n.total_tax_amount)*n.quantity))+"\n                          ")])]),t._v(" "),t._l(e.essentials,(function(e,o){return r("div",{key:"ei_"+o,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details"},[t._v(" #"+t._s(o+1)+" "+t._s(e.item.name)+" ")]),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n                            "+t._s(parseFloat(e.quantity*n.quantity))+"\n                          ")]),t._v(" "),r("span",{staticClass:"subtotal"})])})),t._v(" "),t._l(e.choosables,(function(o,i){return t._l(o.items,(function(a,s){return r("div",{key:"gii_"+s+"_"+i,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[t.getPortionChoosable(n,o.id,a.item_id)?[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details"},[t._v("\n                                #"+t._s(i+1+e.essentials.length)+"\n                                "+t._s(a.item.name)+"\n                              ")]),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n                                "+t._s(parseFloat(a.quantity*n.quantity))+"\n                                ")]),t._v(" "),r("span",{staticClass:"subtotal"})]:t._e()],2)}))}))],2)})),0)})):t._e(),t._v(" "),e.selected.modifiers.length?[r("div",{staticClass:"combo-item bg"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details"},[r("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.$tc("modifier",2)))])]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(" ")])]),t._v(" "),t._l(e.selected.modifiers,(function(e,n){return r("div",{key:"mi_"+n,attrs:{sm:24,md:12,lg:12}},[r("div",{staticClass:"combo-item",staticStyle:{"padding-top":"5px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n                          "+t._s(n+1)+". "),r("strong",[t._v(t._s(e.option))]),t._v(" "),r("br"),t._v("\n                          "+t._s(e.title)+"\n                          @"+t._s(t.formatNumber(e.price-e.discount_amount))+"\n                        ")]),t._v(" "),r("span",{staticClass:"quantity bold"},[t._v("\n                          "+t._s(t._f("formatQtyDecimal")(e.quantity,t.$store.state.settings.quantity_decimals))+"\n                        ")]),t._v(" "),r("span",{staticClass:"subtotal"})])])}))]:t._e()],2)})),0)])]),t._v(" "),r("div",{staticClass:"below-order-items"},[r("div",{staticClass:"order-total"},[r("h3",{directives:[{name:"show",rawName:"v-show",value:0!=t.orderTotalItems,expression:"orderTotalItems != 0"}],staticClass:"total"},[t._v("\n                "+t._s(t.$t("payable_amount"))+"\n                "),r("span",{staticClass:"amount"},[t.orderOriginalTotal!=t.orderPayableAmount?r("span",[r("del",[t._v("\n                      "+t._s(t._f("formatNumber")(t.orderOriginalTotal,t.$store.state.settings.decimals))+"\n                    ")])]):t._e(),t._v(" "),r("span",[t.orderDiscount?r("span",[r("span",{staticStyle:{"font-weight":"normal"}},[t._v("\n                        ("+t._s(t._f("formatNumber")(t.orderTotalAmount,t.$store.state.settings.decimals))+" -\n                        "+t._s(t._f("formatNumber")(t.orderDiscount,t.$store.state.settings.decimals))+")\n                      ")]),t._v("\n                      "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                    ")]):r("span",[t._v("\n                      "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                    ")])])])])])])])],1):t._e()],1)],1)],1)}),[],!1,null,"a637bae6",null).exports},85840:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>W});function n(t,e,r){this.$children.forEach((function(o){o.$options.name===t?o.$emit.apply(o,[e].concat(r)):n.apply(o,[t,e].concat([r]))}))}const o={methods:{dispatchEvents:function(t,e){["input","on-change"].map((function(e){var r=document.createEvent("HTMLEvents");r.initEvent(e,!0,!0),t.dispatchEvent(r)})),this.broadcast("FormItem","on-form-blur",e)},dispatch:function(t,e,r){for(var n=this.$parent||this.$root,o=n.$options.name;n&&(!o||o!==t);)(n=n.$parent)&&(o=n.$options.name);n&&n.$emit.apply(n,[e].concat(r))},broadcast:function(t,e,r){n.call(this,t,e,r)}}};var i=r(23279),a=r.n(i);const s={name:"menu-component",props:{category:{type:Object,required:!0}},methods:{}};var c=r(93379),l=r.n(c),u=r(77613),d={insert:"head",singleton:!1};l()(u.Z,d);u.Z.locals;var p=r(51900);const m=(0,p.Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.category.children&&t.category.children.length>0?r("Submenu",{key:t.category.id,attrs:{name:t.category.id}},[r("template",{slot:"title"},[t._v("\n      "+t._s(t.category.name)+"\n    ")]),t._v(" "),t._l(t.category.children,(function(t){return r("menu-component",{key:t.id,attrs:{category:t}})}))],2):r("MenuItem",{key:t.category.id,attrs:{name:t.category.id}},[t._v("\n    "+t._s(t.category.label)+"\n  ")])],1)}),[],!1,null,null,null).exports;var f=r(32086),h=r.n(f),v=r(19679),_={insert:"head",singleton:!1};l()(v.Z,_);v.Z.locals;const g={name:"SimpleKeyboard",props:{keyboardClass:{default:"simple-keyboard",type:String},element:{type:HTMLElement},input:{type:String}},data:function(){return{keyboard:null,input_value:null}},mounted:function(){this.keyboard=new(h())(this.keyboardClass,{onChange:this.onChange,onKeyPress:this.onKeyPress,theme:"hg-theme-default hg-layout-default",layout:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","@ % & {space} {accept} {close}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","@ % & {space} {accept} {close}"]},mergeDisplay:!0,display:{"{enter}":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↵&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","{shift}":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇧&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","{tab}":"&nbsp;&nbsp;&nbsp;⇥&nbsp;&nbsp;&nbsp;","{lock}":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇪&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","{space}":"└──────┘","{close}":"✕","{accept}":this.$t("accept_x",{x:""}),"{bksp}":"&nbsp;&nbsp;&nbsp;&nbsp;⌫&nbsp;&nbsp;&nbsp;&nbsp;","{backspace}":"&nbsp;&nbsp;&nbsp;&nbsp;⌫&nbsp;&nbsp;&nbsp;&nbsp;"},buttonTheme:[{class:"hg-extra",buttons:"@ % &"},{class:"hg-highlight",buttons:"{bksp} {backspace} {tab} {shift}"},{class:"hg-highlight2",buttons:"{lock} {enter}"}]}),this.input_value=this.input},methods:{onChange:function(t){this.input_value=t,this.$emit("onChange",t)},onKeyPress:function(t){this.$emit("onKeyPress",t),"{close}"===t&&this.handleClose(),"{accept}"===t&&this.handleAccept(),"{shift}"!==t&&"{lock}"!==t||this.handleShift()},handleAccept:function(){this.$emit("onAccept")},handleClose:function(){this.$emit("onClose")},handleShift:function(){var t="default"===this.keyboard.options.layoutName?"shift":"default";this.keyboard.setOptions({layoutName:t})}},watch:{input:function(t){this.input_value=t,this.keyboard.setInput(t)}}};var b=r(23218),y={insert:"head",singleton:!1};l()(b.Z,y);b.Z.locals;const x=(0,p.Z)(g,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"touch-keyboard",attrs:{id:"touch-keyboard"}},[r("div",{staticClass:"touch-keyboard-inner"},[r("Input",{attrs:{value:t.input_value,readonly:"",size:"large",placeholder:""}}),t._v(" "),r("div",{class:t.keyboardClass})],1)])}),[],!1,null,null,null).exports;var $=r(25763);const w={props:{item:{type:Object,required:!0}}};var C=r(1218),k={insert:"head",singleton:!1};l()(C.Z,k);C.Z.locals;const O=(0,p.Z)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{staticClass:"pos-grid-item",attrs:{bordered:!1}},[r("img",{attrs:{src:t.item.photo?t.item.photo:"/images/default.svg"}}),t._v(" "),r("div",{staticClass:"pos-grid-item-name"},[r("h4",{staticStyle:{"word-break":"break-word"}},[t._v("\n      "+t._s(t._f("trimString")(t.item.name))),r("br"),t._v("\n      @"),r("strong",[t._v(t._s(t._f("formatNumber")(t.item.price,t.$store.state.settings.decimals)))])])])])}),[],!1,null,null,null).exports;var I=r(14748);const S=r(32979).Z;var F=r(49862),T={insert:"head",singleton:!1};l()(F.Z,T);F.Z.locals;const q=(0,p.Z)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"calculator",on:{click:t.setFocus,keyup:t.setFocus}},[r("div",{staticClass:"calculator-display"},[r("div",{staticClass:"calculator-formula"},[t._v(t._s(t.formula))]),t._v(" "),r("input",{ref:"input",staticClass:"calculator-formula-input",attrs:{size:"small",autofocus:!0},on:{keyup:t.keymonitor}}),t._v(" "),r("div",{staticClass:"calculator-result"},[t._v(t._s(t.result))])]),t._v(" "),r("div",{staticClass:"calculator-items"},[r("div",{staticClass:"calculator-row"},[r("Button",{staticClass:"calculator-btn calculator-btn-big",attrs:{type:"warning"},on:{click:function(e){return t.drop()}}},[t._v("←")]),t._v(" "),r("Button",{staticClass:"calculator-btn",attrs:{type:"error"},on:{click:function(e){return t.cleanAll()}}},[t._v("C")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.toggle()}}},[t._v("±")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.square()}}},[t._v("√")])],1),t._v(" "),r("div",{staticClass:"calculator-row"},[r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(7)}}},[t._v("7")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(8)}}},[t._v("8")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(9)}}},[t._v("9")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate("/")}}},[t._v("/")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.percent()}}},[t._v("%")])],1),t._v(" "),r("div",{staticClass:"calculator-row"},[r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(4)}}},[t._v("4")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(5)}}},[t._v("5")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(6)}}},[t._v("6")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate("*")}}},[t._v("*")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.devided()}}},[t._v("1/x")])],1),t._v(" "),r("div",{staticClass:"calculator-row"},[r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(1)}}},[t._v("1")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(2)}}},[t._v("2")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(3)}}},[t._v("3")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate("-")}}},[t._v("-")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate("+")}}},[t._v("+")])],1),t._v(" "),r("div",{staticClass:"calculator-row"},[r("Button",{staticClass:"calculator-btn calculator-btn-big",on:{click:function(e){return t.operate(0)}}},[t._v("0")]),t._v(" "),r("Button",{staticClass:"calculator-btn",on:{click:function(e){return t.operate(".")}}},[t._v(".")]),t._v(" "),r("Button",{staticClass:"calculator-btn calculator-btn-big",attrs:{type:"success"},on:{click:function(e){return t.equal()}}},[t._v("=")])],1)])])}),[],!1,null,"64c4c32d",null).exports;var E=r(42184);const P={props:{close:{required:!0},record:{required:!0}},data:function(){return{users:[],show:!1,saving:!1,loading:!1,errors:{message:"",form:{}},recordForm:{comment:"",transferred_to:"",slips:this.record?parseFloat(this.formatNumber(this.record.total_cc_slips)):null,cheques:this.record?parseFloat(this.formatNumber(this.record.total_cheques)):null,cash:this.record?parseFloat(this.formatNumber(parseFloat(this.record.total_cash_amount)+parseFloat(this.record.cash_in_hand))):null},formRules:{cash:[{required:!0,type:"number",trigger:"blur",message:this.$t("field_is_required",{field:this.$t("total_cash")})}],slips:[{required:!0,type:"number",trigger:"blur",message:this.$t("field_is_required",{field:this.$t("total_slips")})}],cheques:[{required:!0,type:"number",trigger:"blur",message:this.$t("field_is_required",{field:this.$t("total_cheques")})}]}}},computed:{total_cash:function(){return this.record?parseFloat(this.record.total_cash_amount)+parseFloat(this.record.cash_in_hand)-parseFloat(this.record.total_refunds_amount)-parseFloat(this.record.total_expenses_amount):0}},created:function(){var t=this;this.$http.get("app/users/search?roles=admin,staff").then((function(e){return t.users=e.data})).catch((function(t){return console.log(t)}))},methods:{handleSubmit:function(){var t=this;this.$refs.registerRecordForm.validate((function(e){e?(t.loading=!0,t.record.comment=t.recordForm.comment,t.record.total_cash_submitted=t.recordForm.cash,t.record.total_cheques_submitted=t.recordForm.cheques,t.record.total_cc_slips_submitted=t.recordForm.slips,t.record.transferred_to=t.recordForm.transferred_to,t.$http.post("app/pos/register/".concat(t.record.id,"/close"),t.record).then((function(e){e.data.success?(t.$Notice.destroy(),t.$Notice.success({title:t.$t("register_closed_msg")}),t.close()):t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text")})})).catch((function(e){return t.errors=e})).finally((function(){return t.loading=!1}))):t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:10})}))},handleReset:function(){this.$refs.registerRecordForm.resetFields()}}};var j=r(28682),A={insert:"head",singleton:!1};l()(j.Z,A);j.Z.locals;const N=(0,p.Z)(P,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.record?r("div",{staticClass:"order register"},[r("List",{attrs:{border:""}},[r("ListItem",{staticClass:"table-wrapper mt-0"},[r("table",{staticClass:"table"},[r("tr",[r("td",{staticClass:"bold bg-gray",staticStyle:{"border-radius":"5px 0 0 0"}},[t._v(t._s(t.$tc("register")))]),t._v(" "),r("td",{staticClass:"bold bg-gray",staticStyle:{"border-radius":"0 5px 0 0"}},[t._v(t._s(t.record.register.name))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("opened_at")))]),t._v(" "),r("td",{staticClass:"bold"},[t._v(t._s(t._f("datetime")(t.record.created_at)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("total_sales_amount")))]),t._v(" "),r("td",{staticClass:"bold",staticStyle:{"border-radius":"0 0 5px 0"}},[t._v("\n            "+t._s(t._f("formatNumber")(t.record.total_sales_amount,t.$store.state.settings.decimals))+"\n          ")])])])])],1),t._v(" "),r("List",{staticClass:"mt16",attrs:{border:""}},[r("ListItem",{staticClass:"table-wrapper mt-0"},[r("table",{staticClass:"table"},[r("tr",[r("td",[t._v(t._s(t.$t("cash_in_hand")))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.cash_in_hand,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$t("cash")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_cash_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$t("credit_card")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_cc_slips_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$t("cheque")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_cheques_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$t("other")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_other_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$tc("gift_card")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_gift_card_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$tc("return_order",2)})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_return_orders_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$tc("refund")})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_refunds_amount,t.$store.state.settings.decimals)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.$t("x_amount",{x:t.$tc("expense",2)})))]),t._v(" "),r("td",{staticClass:"bold text-right"},[t._v(t._s(t._f("formatNumber")(t.record.total_expenses_amount,t.$store.state.settings.decimals)))])])])])],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},[t.show?r("div",{staticClass:"mt16"},[t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("Form",{ref:"registerRecordForm",attrs:{model:t.recordForm,rules:t.formRules,"label-width":140}},[r("FormItem",{attrs:{label:t.$t("total_cash")}},[r("Row",[r("Col",{attrs:{span:"14"}},[r("FormItem",{attrs:{prop:"cash",error:t._f("a2s")(t.errors.form.total_cash_submitted)}},[r("InputNumber",{attrs:{placeholder:t.$t("total_cash")},model:{value:t.recordForm.cash,callback:function(e){t.$set(t.recordForm,"cash",e)},expression:"recordForm.cash"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v(" ")]),t._v(" "),r("Col",{attrs:{span:"9"}},[r("code",[t._v("=")]),t._v(" "),r("strong",[t._v("\n                "+t._s(t._f("formatNumber")(t.total_cash,t.$store.state.settings.decimals))+"\n              ")])])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("total_slips")}},[r("Row",[r("Col",{attrs:{span:"14"}},[r("FormItem",{attrs:{prop:"slips",error:t._f("a2s")(t.errors.form.total_cc_slips_submitted)}},[r("InputNumber",{attrs:{placeholder:t.$t("total_slips")},model:{value:t.recordForm.slips,callback:function(e){t.$set(t.recordForm,"slips",e)},expression:"recordForm.slips"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v(" ")]),t._v(" "),r("Col",{attrs:{span:"9"}},[r("code",[t._v("=")]),t._v(" "),r("strong",[t._v("\n                "+t._s(t._f("formatNumber")(t.record.total_cc_slips,0))+"\n              ")])])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("total_cheques")}},[r("Row",[r("Col",{attrs:{span:"14"}},[r("FormItem",{attrs:{prop:"cheques",error:t._f("a2s")(t.errors.form.total_cheques_submitted)}},[r("InputNumber",{attrs:{placeholder:t.$t("total_cheques")},model:{value:t.recordForm.cheques,callback:function(e){t.$set(t.recordForm,"cheques",e)},expression:"recordForm.cheques"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v(" ")]),t._v(" "),r("Col",{attrs:{span:"9"}},[r("code",[t._v("=")]),t._v(" "),r("strong",[t._v("\n                "+t._s(t._f("formatNumber")(t.record.total_cheques,0))+"\n              ")])])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("transfer_orders"),error:t._f("a2s")(t.errors.form.transferred_to)}},[r("Select",{attrs:{placeholder:t.$t("select_x",{x:t.$tc("user")})},model:{value:t.recordForm.transferred_to,callback:function(e){t.$set(t.recordForm,"transferred_to",e)},expression:"recordForm.transferred_to"}},[t.users.length>0?t._l(t.users,(function(e,n){return r("Option",{key:n,attrs:{value:e.value}},[t._v("\n                "+t._s(e.label.trim())+"\n              ")])})):t._e()],2)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("comment"),error:t._f("a2s")(t.errors.form.comment)}},[r("Input",{attrs:{type:"textarea",placeholder:t.$t("comment"),autosize:{minRows:2,maxRows:5}},model:{value:t.recordForm.comment,callback:function(e){t.$set(t.recordForm,"comment",e)},expression:"recordForm.comment"}})],1),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.handleSubmit()}}},[t._v(t._s(t.$t("submit")))]),t._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.show=!1}}},[t._v(t._s(t.$t("close_x",{x:t.$tc("form")})))])],1)],1)],1):r("Button",{staticClass:"mt16 np",attrs:{type:"dashed",long:""},on:{click:function(e){t.show=!0}}},[t._v(t._s(t.$t("close_x",{x:t.$tc("register")})))])],1)],1):t._e()}),[],!1,null,null,null).exports;var D=r(68835),M=r(71620),R={insert:"head",singleton:!1};l()(M.Z,R);M.Z.locals;const B=(0,p.Z)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("List",{attrs:{border:"",size:"small"}},[r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+f")]),t._v(" "+t._s(t.$t("focus_scan_barcode")))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+o")]),t._v(" "+t._s(t.$t("new_order")))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+d")]),t._v(" "+t._s(t.$t("delete_x",{x:t.$tc("order")})))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+i")]),t._v(" "+t._s(t.$t("order_form")))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+p")]),t._v(" "+t._s(t.$tc("payment")))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+k")]),t._v(" "+t._s(t.$t("print_x",{x:t.$tc("order")})))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+b")]),t._v(" "+t._s(t.$t("print_x",{x:t.$tc("bill")})))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+l")]),t._v(" "+t._s(t.$t("print_x",{x:t.$tc("last_pos_sale")})))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+s")]),t._v(" "+t._s(t.$t("toggle_x",{x:t.$t("sidebar")})))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+c")]),t._v(" "+t._s(t.$t("toggle_x",{x:t.$t("calculator")})))],1),t._v(" "),r("ListItem",[r("Tag",{staticClass:"key"},[t._v("ctrl+alt+a")]),t._v(" "+t._s(t.$t("alerts_title")))],1)],1)}),[],!1,null,null,null).exports;var L=r(55427);function z(t){return function(t){if(Array.isArray(t))return K(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?U(Object(r),!0).forEach((function(e){H(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function H(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const V={mixins:[(0,E.Z)("price","order",!0),o],components:{MenuComponent:m,SimpleKeyboard:x,AlertsComponent:$.Z,CalculatorComponent:q,FullscreenComponent:D.Z,PosGridItemComponent:O,PosOrderItemsComponent:I.Z,PosShortcutKeysComponent:B,UserImpersonateComponent:L.Z,ClosePosRegisterComponent:N},data:function(){var t=this;return{query:"",halls:[],items:[],result:[],keys:!1,order:null,category:[],search:null,alerts:!1,loading:!0,saving:!1,location:null,attributes:[],categories:[],register:!1,cloading:!1,rloading:!1,openOrder:!1,alerts_data:null,calculator:!1,category_id:null,impersonate:!1,isCollapsed:!1,impersonateCount:1,isFullscreen:!1,openOrderClose:!0,registerDetails:null,active_category:null,selected_category:null,isOrderCollapsed:!1,selected:{hall:null},open:{reference:null},openRules:{reference:[{required:!0,validator:function(e,r,n){r&&""!=r?new RegExp(/^([a-zA-Z0-9]{1,25})$/).test(r)?t.order_nos&&t.order_nos.find((function(t){return t===r}))?n(new Error(t.$t("invalid_ref_error"))):n():n(new Error(t.$t("alpha_num_error"))):n(new Error(t.$t("field_is_required",{field:t.$t("reference_table")})))},trigger:["blur","change"]}]},photos:[],isStoreOpen:!1,input:null,visible:!1,inputAction:null,inputRefocus:null,inputElement:null}},computed:{isSmallScreen:function(){return window&&document.documentElement.clientWidth<=768},orders:function(){return this.$store.getters.orders},order_nos:function(){return Object.keys(this.$store.getters.orders).sort()},register_location:function(){var t=this;return this.$store.getters.location&&this.$store.getters.register?this.$store.getters.locations.find((function(e){return e.value==t.$store.getters.register.location_id})):null},theme:function(){return this.$store.state.settings.theme},rotateIcon:function(){return["ivu-icon",this.isCollapsed?"ivu-icon-ios-folder-outline":"ivu-icon-ios-folder"]},rotateOrderIcon:function(){return["ivu-icon",this.isOrderCollapsed?"ivu-icon-ios-cart":"ivu-icon-md-close pull-right"]},store_location:function(){return this.$store.getters.user&&(!this.$store.getters.location||!this.$store.getters.register||this.$store.getters.location.value!=this.$store.getters.register.location_id)}},watch:{openOrder:function(t){var e=this;t&&this.$nextTick((function(){e.$refs.openOrderInput&&e.$refs.openOrderInput.focus()}))},isStoreOpen:function(t){var e=this;t||this.$nextTick((function(){e.$refs.openOrderInput&&e.$refs.openOrderInput.focus()}))}},created:function(){var t=this;this.$store.getters.staff?(window&&this.$route.meta.title&&(document.title=this.$route.meta.title+" - "+this.$store.getters.settings.name),this.category_id=this.$store.state.settings.default_category,this.$http.get("app/pos?category="+this.$store.state.settings.default_category).then((function(e){var r=e.data;t.$store.commit("setCustomers",r.customers),t.$store.commit("setTaxes",r.taxes);var n={};if(Object.keys(r.orders).length)for(var o in r.orders)n[o]=Z(Z({},r.orders[o]),r.orders[o].extra_attributes);t.$store.commit("setOrders",n),r.items=r.items.map((function(e,r){return e.item_id=e.id,t.$store.getters.demo&&(e.photo=e.photo&&!e.photo.includes("dummy.jpg")?e.photo:t.photos[r]&&!e.photo.includes("dummy.jpg")?t.photos[r]:t.photos[Math.floor(Math.random()*t.photos.length)]),e})),t.halls=r.halls,t.items=r.items,t.location=r.location,t.attributes=r.attributes,r.register&&r.location.id==t.$store.getters.location.value&&t.$store.commit("setRegister",r.register);t.categories=t.mapDeep(r.categories,(function(t){return Z({value:t.id,label:t.name},t)}),"children",!0),t.selected.hall=r.halls&&r.halls.length?r.halls[0].id:null,t.selected_category=t.categories.filter((function(e){return e.value==t.$store.state.settings.default_category}))[0],t.$nextTick((function(){t.active_category=t.$store.state.settings.default_category}))})).then((function(){t.order_nos.length<1?1==t.$store.state.settings.auto_open_order?t.onOrder("Order 1"):(t.openOrder=!0,t.openOrderClose=!1):t.$store.commit("setCurrent",t.order_nos[t.order_nos.length-1]),t.updateOrder()})).then((function(){return t.isStoreOpen=!t.$store.getters.location||!t.$store.getters.register||t.$store.getters.location.value!=t.$store.getters.register.location_id})).finally((function(){return t.loading=!1})),this.$event.listen("register:opened",(function(e){e&&(t.isStoreOpen=!1,t.openOrder&&t.openOrderChange(!0),t.$nextTick((function(){t.order_nos.length&&(t.openOrder=!1,t.openOrderClose=!0,t.$store.commit("setCurrent",t.order_nos[t.order_nos.length-1]),t.updateOrder())})))})),this.$event.listen("order:delete",(function(e){!e&&t.orders[t.$store.getters.current]&&t.orders[t.$store.getters.current].orderId&&t.deleteOpenOrder(t.orders[t.$store.getters.current].orderId),t.$store.commit("delOrder",t.$store.getters.current),t.$nextTick((function(){t.order_nos.length>0?(t.onOrder(t.order_nos[0]),t.$storage.write("order",t.order_nos[0])):(t.$store.commit("setCurrent",t.order_nos[t.order_nos.length-1]),1==t.$store.state.settings.auto_open_order?t.onOrder("Order 1"):(t.openOrder=!0,t.openOrderClose=!1,t.$storage.write("order",null)))})),e||t.$Notice.success({title:t.$root.$tc("order")+" "+t.$t("deleted"),desc:t.$root.$t("record_deleted")})})),this.$event.listen("order:updated",(function(){t.orderDidChange(t.$store.getters.current)})),this.$event.listen("pos:order:update",(function(e){t.addToOrder(e.item,e.qty,e.set,e.force,e.vCheck),t.orderDidChange(t.$store.getters.current)})),this.$event.listen("openAlerts",(function(){return t.alerts=!0})),this.$event.listen("pos:openOrder",(function(){1==t.$store.state.settings.auto_open_order?t.onOrder("Order 1"):t.openOrder=!0})),this.$event.listen("showShortcutKeys",(function(){return t.keys=!t.keys})),this.$event.listen("toggleCalculator",(function(){return t.calculator=!t.calculator})),this.$event.listen("toggleCategories",(function(){return t.isCollapsed=!t.isCollapsed})),this.unsub=this.$store.subscribe((function(e){var r=e.type;"addOrderRow"!==r&&"delOrderRow"!==r||t.updateOrderNow(),"addOrderRow"!==r&&"delOrderRow"!==r&&"setOrderRow"!==r||t.orderDidChange(t.$store.getters.current),"delPromotionItem"===r&&(t.order=t.orders[t.$store.getters.current],t.$storage.write("order",t.order))})),this.photos=["/demo/pasta.jpg","/demo/burger.jpg","/demo/meatball.jpg","/demo/pancake.jpg","/demo/mee.jpg","/demo/sushi.jpg","/demo/cookie.jpg"],this.category.push(this.$store.state.settings.default_category),this.isCollapsed=1==this.$store.getters.settings.categories_sidebar,this.configureDebouncer(),this.updateOrderDebouncer(),this.$event.listen("addOrderRowByItemID",(function(e){t.addOrderRowByItemID(e.id,e.item_id)})),this.$event.fire("pos:order:update",(function(e){var r=e.item,n=e.qty,o=e.set,i=e.force,a=e.vCheck;console.log("pos:order:update"),t.addToOrder(r,n,o,i,a)})),this.$event.listen("pos:print",(function(e){console.log("pos:print"),t.print(e)})),this.unsub=this.$store.subscribe((function(e){var r=e.type;"addOrderRow"!==r&&"setOrderRow"!==r||t.updateOrder()}))):window.location.href="/"},mounted:function(){var t=this;1==this.$store.state.settings.pos_server&&(this.$connect(),this.$socket.addEventListener("error",(function(e){console.error("WebSocket error: ",e),t.$Notice.error({title:t.$t("error"),desc:t.$t("pos_server_error"),duration:10})})),this.$socket.addEventListener("message",(function(e){t.$Notice.info({title:e.data,duration:5})}))),this.$nextTick((function(){t.openOrder?t.$refs.openOrderInput.focus():t.isMobile()||document.querySelector("#scan_barcode").focus()})),1==this.$store.state.settings.onscreen_keyboard&&setTimeout((function(){document.getElementById("pos-order");document.addEventListener("focusin",(function(e){window&&document.documentElement.clientWidth>=998&&"grid-search"!=e.target.id&&"scan_barcode"!=e.target.id&&("INPUT"==e.target.tagName.toUpperCase()||"TEXTAREA"==e.target.tagName.toUpperCase())&&t.showKeyboard(e)}))}),1500)},beforeDestory:function(){this.unsub(),this.$storage.write("order",null),1==this.$store.state.settings.pos_server&&(this.$socket.removeEventListener("error",(function(){console.log("Socket error listener removed.")})),this.$socket.removeEventListener("message",(function(){console.log("Socket message listener removed.")})),this.$disconnect())},beforeRouteLeave:function(t,e,r){this.orderDidChange(this.$store.getters.current),r()},methods:{onKeyboardAccept:function(){var t,e=this;if(this.inputElement.value=this.input,this.inputAction)this.inputAction(this.input);else if(this.inputElement.id&&(t=document.getElementById(this.inputElement.id.split("__")[0])),t&&t.dataset.details){var r=JSON.parse(t.dataset.details);this.$event.fire(r.event,{data:r,qty:this.input})}else this.dispatchEvents(this.inputElement,this.input);this.$nextTick((function(){var t=e.inputElement;e.hideKeyboard(),e.inputRefocus&&setTimeout((function(){t.focus(),t.click()}),500)}))},onKeyboardChange:function(t){this.input=t,this.inputElement.value=t},showKeyboard:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];1==this.$store.state.settings.onscreen_keyboard&&window&&document.documentElement.clientWidth>=998&&(this.inputAction=e,this.input=t.target.value,this.inputRefocus=r,this.inputElement=t.target,this.visible=!0)},hideKeyboard:function(t){var e=this;if(1==this.$store.state.settings.onscreen_keyboard){var r=document.getElementById("touch-keyboard");setTimeout((function(){(!t||t&&t.target!=e.inputElement&&r&&!r.contains(t.target))&&(e.input=null,e.inputAction=null,e.inputElement=null,e.inputRefocus=!1,setTimeout((function(){return e.visible=!1}),50))}),50)}},print:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(1!=this.$socket.readyState)return this.$connect(),this.$socket.addEventListener("error",(function(t){console.error("WebSocket error: ",t),e.$Notice.error({title:e.$t("error"),desc:e.$t("pos_server_error"),duration:10})})),this.$socket.addEventListener("message",(function(t){e.$Notice.info({title:t.data,duration:5})})),0==r&&(this.$Notice.info({desc:this.$t("pos_server_reconnect_text"),duration:5}),setTimeout((function(){return e.print(t,1)}),1e3)),!1;this.$nextTick((function(){1==e.$socket.readyState?e.$socket.send(JSON.stringify(t)):e.$Notice.error({title:e.$t("error"),desc:e.$t("pos_server_connection_error"),duration:10})}))},printLastSale:function(){this.$event.fire("pos:printReceipt")},searchGridItems:function(t){var e=this;this.cloading=!0,this.$http.get("app/items/search?pos=1&category=".concat(this.category_id,"&q=").concat(t)).then((function(t){e.items=t.data.map((function(t,r){return t.item_id=t.id,e.$store.getters.demo&&(t.photo=t.photo&&!t.photo.includes("dummy.jpg")?t.photo:e.photos[r]&&!t.photo.includes("dummy.jpg")?e.photos[r]:e.photos[Math.floor(Math.random()*e.photos.length)]),t}))})).finally((function(){return e.cloading=!1}))},impersonateModal:function(t){t&&this.impersonateCount++},closeImpersonateModal:function(){this.impersonate=!1},showAlerts:function(){var t=this;this.$http.get("app/alerts").then((function(e){return t.alerts_data=e.data})).then((function(){return t.alerts=!0})).finally((function(){return t.loading=!1}))},closeRegister:function(){this.register=!1,this.$store.commit("setRegister",null),this.$router.push("/")},getRegisterDetails:function(){var t=this;this.$store.getters.register&&this.$store.getters.register.id?(this.rloading=!0,this.register=!0,this.$http.get("app/pos/register/"+this.$store.getters.register.id).then((function(e){return t.registerDetails=e.data})).catch((function(t){return console.log(t)})).finally((function(){return t.rloading=!1}))):this.$Notice.error({title:this.$t("failed"),desc:this.$t("failed_error_text"),duration:10})},locationModealChanged:function(t){var e=this;t||(this.openOrder&&this.$store.getters.location?(this.$refs.openOrder.resetFields(),this.$store.getters.restaurant||this.$nextTick((function(){e.$refs.openOrderInput.focus()}))):this.$store.getters.location||this.$router.push("/"))},updateOrderNow:function(){this.$store.getters.current&&this.orders[this.$store.getters.current]&&(this.orders[this.$store.getters.current].date||(this.orders[this.$store.getters.current].date=new Date),this.orders[this.$store.getters.current].type||(this.orders[this.$store.getters.current].type="nett"),this.orders[this.$store.getters.current].discount||(this.orders[this.$store.getters.current].discount=null),this.orders[this.$store.getters.current].promotions||(this.orders[this.$store.getters.current].promotions=[]),this.orders[this.$store.getters.current].taxes||(this.orders[this.$store.getters.current].taxes=[]),this.orders[this.$store.getters.current].total_items||(this.orders[this.$store.getters.current].total_items=0),this.orders[this.$store.getters.current].grand_total||(this.orders[this.$store.getters.current].grand_total=0),this.orders[this.$store.getters.current].total_quantity||(this.orders[this.$store.getters.current].total_quantity=0),this.orders[this.$store.getters.current].customer_id||(this.orders[this.$store.getters.current].customer_id=this.$store.state.settings.default_customer),this.order=Z({},this.orders[this.$store.getters.current]),this.order.total_items=this.orderTotalItems,this.order.grand_total=this.orderPayableAmount,this.order.total_quantity=this.orderTotalQuantity,document&&document.querySelector("#scan_barcode")&&(this.isMobile()||document.querySelector("#scan_barcode").focus()),this.$storage.write("order",this.order))},updateOrderDebouncer:function(){var t=this;this.updateOrder=a()((function(){t.updateOrderNow()}),500)},configureDebouncer:function(){var t=this;this.orderDidChange=a()((function(e){if(t.$store.getters.location&&e&&t.orders[e]){t.saving=!0;var r=Z(Z({},t.orders[e]),{},{oId:e});if(!r.items||r.items.length<1)return void(t.saving=!1);if(r.total_items=r.items.length,r.total_quantity=r.items.map((function(t){return t.quantity})).reduce((function(t,e){return t+e}),0),r.grand_total=r.items.reduce((function(e,r){return e+t.formatDecimal(parseFloat(r.price)*parseFloat(r.quantity)+(1==r.tax_included?0:parseFloat(r.total_tax_amount)))}),0),t.attributes.length>0){var n=t.attributes.map((function(t){var e={};return e[t.slug]=r[t.slug],delete r[t.slug],e}));r.extra_attributes=Object.assign.apply(Object,z(n))}r.date=t.$moment(t.order&&t.order.date?t.order.date:new Date).format(t.$moment.HTML5_FMT.DATE),t.$http.post("app/orders",r).then((function(n){n.data.success?(r.created_at&&r.oId&&r.user&&r.customer||t.$store.commit("setOrder",e,n.data.order),t.$store.commit("updateOrder",{key:"orderId",value:n.data.success,oId:t.$store.getters.current})):t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text"),duration:120})})).finally((function(){return t.saving=!1})),t.$storage.write("order",r)}}),500)},deleteOpenOrder:function(t){var e=this;t&&this.$http.delete("app/orders/"+t).then((function(t){t.data.success||e.$Notice.error({title:e.$t("failed"),desc:e.$t("failed_error_text"),duration:120})})).catch((function(t){return console.error(t)}))},onOrder:function(t){var e=this;t?(this.order_nos.find((function(e){return e==t}))?(this.$store.commit("setCurrent",t),this.$Notice.success({title:this.$t("order_changed"),desc:this.$t("order_changed_text"),duration:1})):(this.$store.commit("addOrder",t),this.order_nos.push(t),this.orderDidChange(t)),this.$nextTick((function(){e.updateOrder()}))):1==this.$store.state.settings.auto_open_order&&this.order_nos.length<1?this.onOrder("Order 1"):this.openOrder=!0},searchItems:function(t){t.includes("(")||this.getItems(t,this)},getItems:a()((function(t,e){if(!(t.length>35)){e.searching=!0;var r=null,n="app/items/search?q="+t,o=(e.$store.getters.search_delay,e.$store.getters.scale_barcode);o&&o.total_digits&&o.total_digits==t.length&&(n="app/items/search?scale=1&q="+(r=e.parseScaleBarcode(t,o)).item_code+"&barcode="+t),e.$http.get(n).then((function(t){if(r&&t.data&&t.data.id){var n=t.data.location_stock.length>0&&t.data.location_stock[0].price?parseFloat(t.data.location_stock[0].price):parseFloat(t.data.price);t.data.barcode_price=e.formatDecimal(r.price),t.data.barcode_qty=e.formatQtyDecimal(r.weight),t.data.barcode_price||(t.data.barcode_price=e.formatDecimal(n/t.data.barcode_qty)),t.data.barcode_qty||(t.data.barcode_qty=e.formatQtyDecimal(r.price/n)),console.log("getItems barcode"),e.addToOrder(t.data),e.query="",e.result=[]}else t.data&&1==t.data.length?(e.query="",e.result=[],console.log("getItems barcode else"),e.addToOrder(t.data[0])):e.result=t.data||[]})).finally((function(){e.cloading=!1,e.searching=!1}))}}),search_delay||250),onLocationChange:function(t){this.$store.commit("setLocation",t)},collapsedSider:function(){this.$refs.side1.toggleCollapse()},collapsedOrder:function(){this.isCollapsed=!0,this.$refs.order.toggleCollapse()},onOrderCollapse:function(t){t||this.$event.fire("order:show")},onSelect:function(t){var e=this;if("impersonate"==t)this.impersonate=!this.impersonate;else if("stop"==t)this.$http.post("app/impersonate/stop").then((function(t){t.data.success&&(e.$store.commit("setActingUser",null),e.$Notice.success({title:e.$t("success"),desc:e.$t("stopped_impersonating_text")}))}));else if("customer_view"==t){var r=this.$router.resolve({name:t});window.open(r.href,"_blank")}else t&&(this.activeMenu=t,this.$router.push({name:t}))},openOrderChange:function(t){var e=this;t&&(this.$refs.openOrder&&this.$refs.openOrder.resetFields(),this.$nextTick((function(){e.$refs.openOrderInput&&e.$refs.openOrderInput.focus()})))},openNewOrder:function(t,e){var r=this;t&&e&&(this.open.reference=t+"-"+e),this.$refs.openOrder.validate((function(t){t?r.order_nos&&r.order_nos.find((function(t){return t==r.open.reference}))?(r.onOrder(r.open.reference),r.openOrder=!1,r.openOrderClose=!0,r.$Notice.warning({title:r.$t("order_exists"),desc:r.$t("order_exists_text"),duration:3})):(r.onOrder(r.open.reference),r.openOrder=!1,r.openOrderClose=!0,r.$Notice.success({title:r.$t("success"),desc:r.$t("new_order_opened"),duration:3})):r.$Notice.error({title:r.$t("invalid_form"),desc:r.$t("invalid_form_error"),duration:10})}))},categoryChanged:function(t,e){var r=this;this.cloading=!0,Array.isArray(t)&&(t=t[t.length-1]);var n=z(this.categories),o=this.flattenDeep(n,"children",!1);this.selected_category=o.filter((function(e){return e.value==t}))[0],this.active_category=this.selected_category.id,this.selected_category.parent_id||(this.category=[]),e&&e.length>0&&(this.category=e.map((function(t){return t.id}))),this.category_id=t,this.$http.get("app/items?category="+t).then((function(t){t.data=t.data.map((function(t){return t.item_id=t.id,t})),t.data=t.data.map((function(t,e){return t.item_id=t.id,r.$store.getters.demo&&(t.photo=t.photo&&!t.photo.includes("dummy.jpg")?t.photo:r.photos[e]&&!t.photo.includes("dummy.jpg")?r.photos[e]:r.photos[Math.floor(Math.random()*r.photos.length)]),t})),r.items=t.data})).finally((function(){return r.cloading=!1})),setTimeout((function(){window&&document.documentElement.clientWidth<=768&&(r.isCollapsed=!0)}),100)},logout:function(){this.$event.fire("logOut")},toggleFullScreen:function(){this.$event.fire("expand:view")},closeOpened:function(){var t=this;this.activeParnetMenu=[],this.$nextTick((function(){t.$refs.sideMenu&&t.$refs.sideMenu.updateOpened()}))},categoryOpenChanged:function(t){this.category=t}}};var G=r(24936),Q={insert:"head",singleton:!1};l()(G.Z,Q);G.Z.locals;const W=(0,p.Z)(V,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"layout pos",on:{click:t.hideKeyboard}},[t.$store.getters.staff?[r("Layout",{style:{height:"100vh"}},[t.loading?r("Loading"):t._e(),t._v(" "),r("Header",{class:{"header-light bg-light":"light"==t.theme,"header-primary bg-primary":"primary"==t.theme},style:{padding:0}},[r("Row",{attrs:{type:"flex",justify:"space-between"}},[r("Col",[r("div",{staticClass:"layout-logo"},[r("i",{staticClass:"close pointer",class:t.rotateIcon,on:{click:t.collapsedSider}}),t._v(" "),r("div",{staticStyle:{display:"flex"}},[r("router-link",{staticClass:"logo",attrs:{to:"/"}},[r("span",{staticClass:"hidden-md"},[t._v(t._s(t.$store.state.settings.name))]),t._v(" "),r("span",{staticClass:"visible-md"},[t._v(t._s(t.$store.state.settings.short_name))])]),t._v(" "),r("span",{staticClass:"hidden-xs"},[t.isOnline?r("Tooltip",{attrs:{placement:"right",content:"Online"}},[r("Icon",{staticClass:"success",staticStyle:{margin:"-3px 10px 0 10px"},attrs:{type:"ios-planet",size:"20"}})],1):r("Tooltip",{attrs:{placement:"right",content:"Offline"}},[r("Icon",{staticClass:"error",staticStyle:{margin:"-3px 10px 0 10px"},attrs:{type:"ios-planet-outline",size:"18"}})],1)],1)],1)]),t._v(" "),t.isSmallScreen?t._e():r("div",{staticClass:"scan hidden-sm"},[r("AutoComplete",{ref:"scanCode",attrs:{icon:"ios-search","element-id":"scan_barcode",placeholder:t.$t("search_scan_barcode")},on:{"on-change":t.searchItems,"on-select":t.selectSaleItem,"on-focus":function(e){return t.showKeyboard(e,t.searchItems,!0)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},t._l(t.result,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ("+t._s(e.code)+") ")])})),1)],1),t._v(" "),r("Menu",{staticStyle:{float:"left","margin-left":"10px"},attrs:{theme:t.theme,mode:"horizontal","active-name":t.$store.getters.current},on:{"on-select":t.onOrder}},[r("div",{staticClass:"layout-nav"},[r("Submenu",{attrs:{name:"4"}},[r("template",{slot:"title"},[r("Icon",{attrs:{type:"ios-desktop",size:"18"}})],1),t._v(" "),t._l(t.order_nos,(function(e,n){return r("MenuItem",{key:"order_"+n,attrs:{name:e}},[r("Icon",{attrs:{type:"ios-desktop"}}),t._v("\n                    "+t._s(t.$tc("ref_tab"))+": "+t._s(e)+"\n                  ")],1)})),t._v(" "),r("MenuItem",{attrs:{name:""}},[r("Icon",{attrs:{type:"md-clipboard"}}),t._v("\n                    "+t._s(t.$t("open_order"))+"\n                  ")],1)],2),t._v(" "),r("MenuItem",{staticClass:"hidden-md",attrs:{name:""}},[r("Tooltip",{attrs:{content:t.$t("open_order")}},[r("Icon",{attrs:{type:"ios-add-circle",size:"18"}})],1)],1),t._v(" "),r("li",{staticClass:"ivu-menu-item",on:{click:function(e){return t.getRegisterDetails()}}},[r("i",{staticClass:"ivu-icon ivu-icon-ios-cash-outline",staticStyle:{"font-size":"18px"}}),t._v(" "),r("span",{staticClass:"hidden-lg"},[t._v(t._s(t.$tc("register")))])]),t._v(" "),t.$store.getters.demo?r("a",{staticClass:"blink hidden-lg ivu-btn ivu-btn-primary",attrs:{href:"/",target:"_blank"}},[t._v("Shop")]):t._e()],1)])],1),t._v(" "),r("Col",[r("Menu",{staticClass:"top-menu",attrs:{mode:"horizontal","i-menu":"",theme:t.theme,"active-name":"pos"},on:{"on-select":t.onSelect}},[r("div",{staticClass:"layout-nav"},[1==t.$store.state.settings.impersonation?[t.$store.getters.user&&t.$store.getters.user.acting_user?r("MenuItem",{staticClass:"hidden-sm",attrs:{name:"stop"}},[r("Tooltip",{attrs:{content:t.$t("x_impersonating",{x:t.$t("stop")})}},[r("Icon",{attrs:{type:"md-log-out",size:"18",color:"red"}})],1)],1):t._e(),t._v(" "),r("MenuItem",{attrs:{name:"impersonate"}},[r("Tooltip",{attrs:{content:t.$t("x_impersonating",{x:t.$t("start")})}},[r("Icon",{attrs:{type:"md-log-in",size:"18"}})],1)],1)]:t._e(),t._v(" "),r("MenuItem",{staticClass:"hidden-md",attrs:{name:"dashboard"}},[r("Tooltip",{attrs:{content:t.$t("dashboard")}},[r("Icon",{attrs:{type:"md-home",size:"18"}})],1)],1),t._v(" "),r("MenuItem",{staticClass:"hidden-md",attrs:{name:"customer_view"}},[r("Tooltip",{attrs:{content:t.$t("customer_view")}},[r("Icon",{attrs:{type:"ios-desktop",size:"18"}})],1)],1),t._v(" "),r("MenuItem",{staticClass:"hidden-md",attrs:{name:"settings"}},[r("Tooltip",{attrs:{content:t.$t("settings")}},[r("Icon",{attrs:{type:"ios-cog",size:"18"}})],1)],1),t._v(" "),r("MenuItem",{staticClass:"hidden-lg",attrs:{name:""},nativeOn:{click:function(e){t.keys=!0}}},[r("Tooltip",{attrs:{content:t.$t("shortcuts")}},[r("Icon",{attrs:{type:"md-key",size:"18"}})],1)],1),t._v(" "),r("MenuItem",{staticClass:"hidden-sm",attrs:{name:""},nativeOn:{click:function(e){t.calculator=!0}}},[r("Tooltip",{attrs:{content:t.$t("calculator")}},[r("Icon",{attrs:{type:"ios-calculator",size:"18"}})],1)],1),t._v(" "),r("li",{staticClass:"ivu-menu-item hidden-sm",on:{click:function(e){return t.showAlerts()}}},[r("Tooltip",{attrs:{content:t.$tc("alert",2)}},[r("span",{staticClass:"topbar-badge ivu-badge"},[r("i",{staticClass:"ivu-icon ivu-icon-md-notifications",staticStyle:{"font-size":"18px"}}),t._v(" "),r("sup",{staticClass:"ivu-badge-dot"})])])],1),t._v(" "),r("Submenu",{attrs:{name:"4"}},[t.$store.state.user&&t.$store.state.user.acting_user?r("template",{slot:"title"},[t.$store.state.user.acting_user&&t.$store.state.user.acting_user.avatar?r("Avatar",{attrs:{size:"small",src:t.$store.state.user.acting_user.avatar}}):r("Avatar",{attrs:{size:"small",icon:"ios-person"}}),t._v(" "),r("span",{staticClass:"hidden-md"},[t._v("\n                      "+t._s(t.$t("hi"))+"\n                      "),r("span",{staticClass:"capitalize"},[t._v(t._s(t.$store.state.user.acting_user.username))])])],1):r("template",{slot:"title"},[t.$store.state.user&&t.$store.state.user.avatar?r("Avatar",{attrs:{size:"small",src:t.$store.state.user.avatar}}):r("Avatar",{attrs:{size:"small",icon:"ios-person"}}),t._v(" "),r("span",{staticClass:"hidden-md"},[t._v("\n                      "+t._s(t.$t("hi"))+"\n                      "),r("span",{staticClass:"capitalize"},[t._v(t._s(t.$store.state.user.username))])])],1),t._v(" "),t.$store.state.user&&t.$store.state.user.acting_user?r("MenuItem",{staticClass:"cursor-default no-hover",attrs:{name:""}},[r("div",{staticClass:"text-center bold",staticStyle:{"line-height":"1.6"}},[r("div",[t._v(t._s(t.$t("impersonating_as")))]),t._v(" "),r("Tag",{attrs:{type:"border",color:"primary"}},[t._v(t._s(t.$store.state.user.acting_user.name))]),t._v(" "),r("div",{staticClass:"mt16"},[t._v(t._s(t.$t("logged_in_as")))])],1)]):t._e(),t._v(" "),t.$store.state.user?r("MenuItem",{staticClass:"cursor-default no-hover",attrs:{name:""}},[r("div",{staticClass:"text-center",staticStyle:{cursor:"default"}},[t.$store.state.user.avatar?r("div",{staticClass:"mb16"},[r("Avatar",{attrs:{size:"100",src:t.$store.state.user.avatar}})],1):t._e(),t._v(" "),r("Tag",{attrs:{type:"border",color:"success"}},[t._v(t._s(t.$store.state.user.name))])],1)]):t._e(),t._v(" "),r("MenuItem",{attrs:{name:"profile"}},[r("Icon",{attrs:{type:"md-person",size:"16"}}),t._v("\n                    "+t._s(t.$t("profile"))+"\n                  ")],1),t._v(" "),r("MenuItem",{attrs:{name:"change_password"}},[r("Icon",{attrs:{type:"md-key",size:"16"}}),t._v("\n                    "+t._s(t.$t("change_password"))+"\n                  ")],1),t._v(" "),r("MenuGroup",{attrs:{title:"Logout"}},[r("MenuItem",{attrs:{name:""},nativeOn:{click:function(e){return t.logout()}}},[r("Icon",{attrs:{type:"md-log-out",size:"16"}}),t._v("\n                      "+t._s(t.$t("logout"))+"\n                    ")],1)],1)],2),t._v(" "),r("fullscreen-component",{staticClass:"hidden-sm",model:{value:t.isFullscreen,callback:function(e){t.isFullscreen=e},expression:"isFullscreen"}})],2)]),t._v(" "),r("i",{staticClass:"close order-icon visible-sm",class:t.rotateOrderIcon,on:{click:t.collapsedOrder}})],1)],1)],1),t._v(" "),r("Layout",{staticClass:"pos-contents"},[r("Content",[r("Layout",{staticClass:"layout-pos"},[r("Sider",{ref:"side1",staticClass:"categories categories-scroll scroll-x shadow",class:{"sidebar-light bg-light":"dark"!=t.theme},attrs:{collapsible:"",width:200,"hide-trigger":"",breakpoint:"lg","collapsed-width":0},model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}},[t.categories?r("Menu",{attrs:{accordion:"",width:"auto",theme:t.theme,"open-names":t.category,"active-name":t.active_category},on:{"on-select":t.categoryChanged,"on-open-change":t.categoryOpenChanged}},[t._l(t.categories,(function(t){return[r("menu-component",{key:t.id,attrs:{category:t}})]}))],2):t._e()],1),t._v(" "),r("Content",{staticClass:"content"},[t.cloading?r("Loading"):t._e(),t._v(" "),r("div",{staticClass:"above-grid"},[r("Cascader",{staticClass:"category-cascader",attrs:{transfer:"",trigger:"hover",data:t.categories},on:{"on-change":t.categoryChanged},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[r("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.selected_category&&t.selected_category.name))])]),t._v(" "),t.register_location?r("span",{staticStyle:{float:"right"}},[r("Icon",{staticStyle:{"margin-top":"-4px"},attrs:{size:"18",type:"ios-navigate",color:t.$store.getters.location.color}}),t._v(" "),r("span",{staticClass:"name"},[t._v(t._s(t.register_location.label))])],1):t._e()],1),t._v(" "),t.items.length>0?r("div",{staticClass:"pos-grid scroll-x"},[r("div",{staticClass:"pos-grid-scroll"},[t._l(t.items,(function(e){return r("a",{key:e.id,on:{click:function(r){return t.addToOrder(e)}}},[r("pos-grid-item-component",{attrs:{item:e}})],1)})),t._v(" "),r("div",{staticStyle:{clear:"both",height:"16px"}})],2)]):r("div",{staticClass:"contents-middle",staticStyle:{"flex-direction":"column",height:"100%"}},[r("svg",{staticStyle:{width:"80px",height:"80px",opacity:"0.25","margin-bottom":"2rem"},attrs:{viewBox:"0 0 330.418 330.418",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M90.791,161c2.762,0,5-2.239,5-5v-7c0-2.761-2.238-5-5-5s-5,2.239-5,5v7C85.791,158.761,88.029,161,90.791,161z"}}),t._v(" "),r("path",{attrs:{d:"M239.627,82h-17.918V38c0-2.761-2.238-5-5-5s-5,2.239-5,5v44h-93V10h93v12c0,2.761,2.238,5,5,5s5-2.239,5-5V5 c0-2.761-2.238-5-5-5h-103c-2.762,0-5,2.239-5,5v77H90.791c-2.762,0-5,2.239-5,5v43c0,2.761,2.238,5,5,5s5-2.239,5-5V92h138.836 v159c0,38.277-31.141,69.418-69.418,69.418S95.791,289.277,95.791,251v-79c0-2.761-2.238-5-5-5s-5,2.239-5,5v79 c0,43.791,35.627,79.418,79.418,79.418s79.418-35.627,79.418-79.418V87C244.627,84.239,242.389,82,239.627,82z"}}),t._v(" "),r("path",{attrs:{d:"M132.709,48c-2.762,0-5,2.239-5,5s2.238,5,5,5h17.809c2.762,0,5-2.239,5-5s-2.238-5-5-5H132.709z"}}),t._v(" "),r("path",{attrs:{d:"M179.9,48c-2.762,0-5,2.239-5,5s2.238,5,5,5h17.809c2.762,0,5-2.239,5-5s-2.238-5-5-5H179.9z"}}),t._v(" "),r("path",{attrs:{d:"M190.709,241c2.762,0,5-2.239,5-5v-42.5c0-16.818-13.683-30.5-30.5-30.5s-30.5,13.682-30.5,30.5v52 c0,16.818,13.683,30.5,30.5,30.5c8.147,0,15.807-3.172,21.567-8.934c1.952-1.953,1.952-5.118-0.001-7.071 c-1.953-1.953-5.118-1.953-7.071,0c-3.871,3.872-9.019,6.004-14.495,6.004c-11.304,0-20.5-9.196-20.5-20.5v-52 c0-11.304,9.196-20.5,20.5-20.5s20.5,9.196,20.5,20.5V236C185.709,238.761,187.947,241,190.709,241z"}})]),t._v(" "),r("h1",{staticClass:"text-fade text-center more"},[t._v(t._s(t.$t("no_item_in_category")))])]),t._v(" "),r("div",{staticClass:"below-grid"},[r("div",{staticClass:"grid-search transparent"},[r("Input",{attrs:{search:"","element-id":"grid-search",placeholder:t.$t("search_item_ph")},on:{"on-search":t.searchGridItems,"on-focus":function(e){return t.showKeyboard(e,t.searchGridItems)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)])],1),t._v(" "),r("Sider",{ref:"order",staticClass:"order-items",attrs:{collapsible:"",width:401,"hide-trigger":"",breakpoint:"md","collapsed-width":0},on:{"on-collapse":t.onOrderCollapse},model:{value:t.isOrderCollapsed,callback:function(e){t.isOrderCollapsed=e},expression:"isOrderCollapsed"}},[r("pos-order-items-component",{attrs:{width:400,order:t.order,attributes:t.attributes}})],1)],1)],1)],1)],1),t._v(" "),r("Modal",{staticClass:"calculator-modal vertical-center-modal no-footer",attrs:{title:"Calculator",width:"350"},model:{value:t.calculator,callback:function(e){t.calculator=e},expression:"calculator"}},[r("div",{staticClass:"calculator"},[r("calculator-component")],1),t._v(" "),r("template",{slot:"footer"},[r("span",{staticClass:"calculator-footer"})])],2),t._v(" "),r("Modal",{attrs:{"footer-hide":!0,title:t.$t("open_order"),closable:t.openOrderClose,"mask-closable":t.openOrderClose,width:t.$store.getters.restaurant?600:400},on:{"on-visible-change":t.openOrderChange},model:{value:t.openOrder,callback:function(e){t.openOrder=e},expression:"openOrder"}},[t.$store.getters.restaurant?r("div",[t.halls&&t.halls.length?r("div",[r("div",{staticStyle:{"max-width":"400px",margin:"0 auto"}},[t.halls.length>1?r("Form",{attrs:{model:t.selected},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{label:""}},[r("Select",{attrs:{placeholder:"",size:"large"},model:{value:t.selected.hall,callback:function(e){t.$set(t.selected,"hall",e)},expression:"selected.hall"}},t._l(t.halls,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title)+" ("+t._s(e.code)+")")])})),1)],1)],1):t._e()],1),t._v(" "),t._l(t.halls,(function(e){return r("div",{key:"hall_"+e.id},[e.id==t.selected.hall?r("div",[e.tables&&e.tables.length?r("Row",t._l(e.tables,(function(n,o){return r("span",{key:"table_"+o},[r("Col",{attrs:{xs:24,sm:12,md:8}},[r("div",{staticStyle:{padding:"16px"}},[r("a",{on:{click:function(r){return t.openNewOrder(e.code,n.code)}}},[r("div",{staticClass:"table",class:{active:t.order_nos.includes(e.code+"-"+n.code)}},[r("div",{staticClass:"text-center"},[t._v(t._s(n.title)+" ("+t._s(n.code)+")")])])])])])],1)})),0):r("div",[r("h2",{staticClass:"text-center text-fade"},[t._v(t._s(t.$t("no_table_to_display")))])])],1):t.selected.hall?t._e():r("div",[r("h2",{staticClass:"text-center text-fade"},[t._v(t._s(t.$t("select_hall_to_load_tables")))])])])})),t._v(" "),r("Divider",[r("small",[t._v(t._s(t.$t("open_with_ref")))])])],2):t._e()]):t._e(),t._v(" "),r("div",{staticStyle:{"max-width":"580px",margin:"0 auto"}},[r("Form",{ref:"openOrder",attrs:{model:t.open,rules:t.openRules},nativeOn:{submit:function(e){return e.preventDefault(),t.openNewOrder.apply(null,arguments)}}},[r("FormItem",{staticClass:"apg",attrs:{label:t.$t("reference_table"),prop:"reference"}},[r("Input",{ref:"openOrderInput",attrs:{placeholder:t.$t("reference_table"),size:"large"},model:{value:t.open.reference,callback:function(e){t.$set(t.open,"reference",e)},expression:"open.reference"}},[r("Button",{attrs:{slot:"append"},on:{click:t.openNewOrder},slot:"append"},[t._v(t._s(t.$t("open")))])],1)],1)],1)],1),t._v(" "),r("div",{staticClass:"other-buttons"},[r("div",[t.$store.getters.register?r("Button",{attrs:{type:"primary",icon:"ios-cash-outline"},on:{click:function(e){return t.getRegisterDetails()}}},[t._v("\n            "+t._s(t.$t("x_details",{x:t.$tc("register")}))+"\n          ")]):t._e(),t._v(" "),t.$store.getters.last_pos_sale?r("Button",{attrs:{type:"primary",icon:"ios-print"},on:{click:t.printLastSale}},[t._v("\n            "+t._s(t.$t("print_x",{x:t.$tc("last_pos_sale")}))+"\n          ")]):t._e()],1),t._v(" "),t.openOrderClose?t._e():r("Button",{attrs:{icon:"md-home"},on:{click:function(e){return t.$router.replace("/")}}},[t._v("\n          "+t._s(t.$t("back_to_home"))+"\n        ")])],1)]),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{title:t.$t("register_details"),"mask-closable":!1,"footer-hide":!0},model:{value:t.register,callback:function(e){t.register=e},expression:"register"}},[t.rloading?r("div",[r("Loading"),t._v(" "),r("h1",[t._v(t._s(t.$t("register_details")))])],1):r("close-pos-register-component",{attrs:{record:t.registerDetails,close:t.closeRegister}})],1),t._v(" "),r("Modal",{attrs:{title:t.$t("alerts_title"),"mask-closable":!1,"footer-hide":!0},model:{value:t.alerts,callback:function(e){t.alerts=e},expression:"alerts"}},[r("alerts-component",{attrs:{alerts:t.alerts_data,close:function(){return t.alerts=!1}}})],1),t._v(" "),r("Modal",{attrs:{width:380,title:t.$t("shortcuts"),"footer-hide":!0},model:{value:t.keys,callback:function(e){t.keys=e},expression:"keys"}},[r("pos-shortcut-keys-component")],1),t._v(" "),r("Modal",{attrs:{scrollable:"","footer-hide":"",closable:!1,"mask-closable":!1},model:{value:t.isStoreOpen,callback:function(e){t.isStoreOpen=e},expression:"isStoreOpen"}},[r("select-location-component",{attrs:{pos:!0,loc:t.location}})],1),t._v(" "),r("Modal",{attrs:{width:400,"footer-hide":"","mask-closable":!1,title:t.$t("impersonate")},on:{"on-visible-change":t.impersonateModal},model:{value:t.impersonate,callback:function(e){t.impersonate=e},expression:"impersonate"}},[r("user-impersonate-component",{attrs:{u:t.impersonateCount},on:{close:t.closeImpersonateModal}})],1),t._v(" "),r("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,title:t.$t("select_x",{x:t.$tc("portion")+", "+t.$tc("modifier",2)+" & "+t.$tc("variant",2)})},model:{value:t.variantModal,callback:function(e){t.variantModal=e},expression:"variantModal"}},[r("select-variation-component",{ref:"selectVarMod",attrs:{item:t.item},on:{"on-submit":t.variationSubmitted}})],1),t._v(" "),1==t.$store.state.settings.onscreen_keyboard?[r("simple-keyboard",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{input:t.input,element:t.inputElement},on:{onClose:t.hideKeyboard,onAccept:t.onKeyboardAccept,onChange:t.onKeyboardChange}})]:t._e()]:t._e()],2)}),[],!1,null,"17a8978f",null).exports},14748:(t,e,r)=>{"use strict";r.d(e,{Z:()=>g});var n=r(23279),o=r.n(n),i=r(61402);const a={data:function(){return{saving:!1,countries:[],attributes:[],loading:!1,searching:!1,customer_groups:[],errors:{message:"",form:{}},states:[{value:"",label:this.$t("select_country")}],form:{id:"",name:"",email:"",phone:"",state:"",number:"",footer:"",address:"",country:"",show_tax:0,due_limit:null,show_discount:0,require_country:0,customer_group_id:"",opening_balance:null},rules:{name:[{required:!0,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("name")})}],phone:[{required:!1,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("phone")})}],email:[{required:!1,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("email")})}],address:[{required:!1,trigger:"blur",message:this.$t("field_is_required",{field:this.$t("address")})}],country:[{trigger:"change",required:this.$store.getters.require_country,message:this.$t("field_is_required",{field:this.$t("country")})}],state:[{trigger:"change",required:this.$store.getters.require_country,message:this.$t("field_is_required",{field:this.$t("state")})}],customer_group_id:[{required:!1,trigger:"change",message:this.$t("field_is_required",{field:this.$tc("customer_group")})}]}}},created:function(){var t=this;this.$http.get("app/customers/create").then((function(e){return t.attributes=e.data})).finally((function(){return t.loading=!1})),this.$http.get("app/countries").then((function(e){var r=e.data;return t.countries=r})),this.$http.get("app/customer_groups/search").then((function(e){var r=e.data;return t.customer_groups=r}))},methods:{submit:function(){var t=this;this.$refs.customer.validate((function(e){if(e){t.saving=!0;t.$http.post("app/pos/add_customer",t.form).then((function(e){e.data.success?(t.$Notice.destroy(),t.$Notice.success({title:t.$tc("customer")+" "+t.$t("added"),desc:t.$t("record_added")}),t.$emit("added",e.data.customer)):t.$Notice.error({title:t.$t("failed"),desc:t.$t("failed_error_text")})})).catch((function(e){return t.errors=e})).finally((function(){return t.saving=!1}))}}))},handleReset:function(){this.$refs.address.resetFields(),this.saving=!1},updateCF:function(t,e){var r=this;this.form[t]=e,setTimeout((function(){r.$refs[model].validateField(t)}),1e3)},countryChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t?(this.searching=!0,this.getStates(t,e),this.form.state=""):(this.form.state="",this.form.country="",this.states=[{value:"",label:this.$t("select_country")}])},getStates:function(t,e){var r=this;this.$http.get("app/states",{params:{country:t}}).then((function(t){r.states=t.data,e&&(r.form.state=r.states.find((function(t){return t.value==e})).value),r.searching=!1})).catch((function(t){return r.$event.fire("appError",t.response)}))}}};var s=r(51900);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const m={components:{CustomerFormComponent:(0,s.Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Form",{ref:"customer",staticClass:"form-responsive",attrs:{model:t.form,rules:t.rules,"label-width":150}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:24,lg:24}},[t.loading?r("Loading"):t._e(),t._v(" "),t.errors.message?r("Alert",{staticClass:"mb26",attrs:{type:"error","show-icon":""}},[r("div",{domProps:{innerHTML:t._s(t.errors.message)}})]):t._e(),t._v(" "),r("FormItem",{attrs:{label:t.$t("name"),prop:"name",error:t._f("a2s")(t.errors.form.name)}},[r("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("company"),prop:"company",error:t._f("a2s")(t.errors.form.company)}},[r("Input",{model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1),t._v(" "),t.form.id?t._e():r("FormItem",{attrs:{error:t._f("a2s")(t.errors.form.title),label:t.$t("opening_balance"),prop:"opening_balance"}},[r("InputNumber",{model:{value:t.form.opening_balance,callback:function(e){t.$set(t.form,"opening_balance",e)},expression:"form.opening_balance"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("phone"),prop:"phone",error:t._f("a2s")(t.errors.form.phone)}},[r("Input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("email"),prop:"email",error:t._f("a2s")(t.errors.form.email)}},[r("Input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("due_limit"),prop:"due_limit",error:t._f("a2s")(t.errors.form.due_limit)}},[r("InputNumber",{model:{value:t.form.due_limit,callback:function(e){t.$set(t.form,"due_limit",e)},expression:"form.due_limit"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("customer_group"),prop:"customer_group",error:t._f("a2s")(t.errors.form.customer_group)}},[r("Select",{attrs:{clearable:"",placeholder:t.$t("select_x",{x:t.$tc("customer_group")})},model:{value:t.form.customer_group_id,callback:function(e){t.$set(t.form,"customer_group_id",e)},expression:"form.customer_group_id"}},t._l(t.customer_groups,(function(e,n){return r("Option",{key:n,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("address"),prop:"address",error:t._f("a2s")(t.errors.form.address)}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("country"),prop:"country",error:t._f("a2s")(t.errors.form.country)}},[r("Select",{attrs:{placeholder:"",filterable:""},on:{"on-change":t.countryChange},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.countries,(function(e,n){return r("Option",{key:n,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("state"),prop:"state",error:t._f("a2s")(t.errors.form.state)}},[r("Select",{attrs:{placeholder:"",filterable:"",loading:t.searching},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.states,(function(e,n){return r("Option",{key:n,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("FormItem",{staticClass:"mb0"},[r("Button",{attrs:{type:"primary",loading:t.saving,disabled:t.saving},on:{click:function(e){return t.submit()}}},[t.saving?r("span",[t._v(t._s(t.$t("saving"))+"...")]):r("span",[t._v(t._s(t.$t("submit")))])]),t._v(" "),t.form.id?t._e():r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)],1)}),[],!1,null,null,null).exports},mixins:[(0,i.Z)("price","order",!0)],props:{attributes:{required:!0},order:{required:!0,twoWay:!0}},data:function(){var t=this;return{result:[],unsub:null,extra:!1,printData:{},updated:!1,loading:!1,payment:!1,printing:!1,edit_item:null,searching:!1,customer_id:null,printModal:!1,add_customer:!1,show_item_edit:!1,paymentFormFocus:!1,errors:{message:"",form:{},payment:{}},paymentForm:{amount:null,gateway:"cash"},paymentRules:{amount:[{type:"number",trigger:"blur",message:this.$t("field_is_required",{field:this.$t("amount")})}],gateway:[{message:this.$t("field_is_required",{field:this.$t("gateway")}),trigger:"change"}],cheque_number:[{required:!0,message:this.$t("field_is_required",{field:this.$t("cheque_number")}),trigger:"blur"}],gift_card_number:[{required:!0,message:this.$t("field_is_required",{field:this.$t("gift_card_number")}),trigger:"blur"},{validator:function(e,r,n){t.paymentForm.amount&&"gift_card"==t.paymentForm.gateway&&parseFloat(t.gift_card.balance)<t.paymentForm.amount?n(new Error(t.$t("gift_card_payment_error"))):n()},trigger:["change","blur"]}],card_holder:[{required:!0,message:this.$t("field_is_required",{field:this.$t("card_holder")}),trigger:"blur"}],card_number:[{required:!0,message:this.$t("field_is_required",{field:this.$t("card_number")}),trigger:"blur"}],expiry_date:[{required:!0,type:"date",message:this.$t("field_is_required",{field:this.$t("expiry_date")}),trigger:"blur"}],cvv:[{required:!0,message:this.$t("field_is_required",{field:this.$t("cvv")}),trigger:"blur"}]},rules:{discount:[{validator:function(e,r,n){r&&parseFloat(r)>parseFloat(t.$store.state.settings.max_discount)?n(new Error(t.$t("max_discount_error",{percent:parseFloat(t.$store.state.settings.max_discount)}))):n()},type:"number",trigger:["change","blur"]}],details:[{message:this.$t("field_is_required",{field:this.$t("details")}),trigger:"blur"}],customer_id:[{required:!0,message:this.$t("field_is_required",{field:this.$tc("customer")}),trigger:"change"}],date:[{required:!0,type:"date",message:this.$t("field_is_required",{field:this.$t("date")}),trigger:"change"}],type:[{required:!0,message:this.$t("field_is_required",{field:this.$t("type")}),trigger:"change"}]}}},computed:{customers:function(){return this.$store.state.customers?this.$store.state.customers:[]},customer:function(){var t=this;return this.$store.state.customers?this.$store.state.customers.find((function(e){return e.value==t.order.customer_id})):null},taxes:function(){return this.$store.state.taxes}},watch:{extra:function(t){!t&&this.updated&&(this.updated=!1,this.$event.fire("order:updated"))},"paymentForm.gateway":function(t,e){this.$refs.paymentForm.fields.map((function(t){"type"!=t.prop&&"amount"!=t.prop&&"gateway"!=t.prop&&"payment_details"!=t.prop&&t.resetField()}))},"paymentForm.swipe":function(t,e){var r=this;t&&"%"==t.charAt(0)?setTimeout((function(){var e=t.split("^"),n=e&&e[1]?e[1].split("/"):"",o=n?n[0].trim().split(".")[0]:"",i=n&&n[1]?n[1].trim():"",a=e&&e[2]?e[2].substring(2,4)+"/"+e[2].substring(0,2):"",s=e&&e[2]?e[2].split(";"):"",c=s&&s[1]?s[1].split("="):null,l=c&&c[1]?c[1].trim():null,u=l?l.substring(2,4)+"/"+l.substring(0,2):a;r.paymentForm.card_number=e[0].substring(2),r.paymentForm.expiry_date=u||a,r.paymentForm.card_holder="".concat(i," ").concat(o),r.$nextTick((function(){this.paymentForm.swipe="",document.querySelector("#cvv").focus()}))}),400):t?(this.errors.payment.swipe=this.$t("unknown_value"),document.querySelector("#swipe_holder").classList.add("ivu-form-item-error")):(this.errors.payment.swipe="",document.querySelector("#swipe_holder").classList.remove("ivu-form-item-error"))},"order.customer_id":function(t,e){var r=this;if(e){var n=this.customers.find((function(t){return t.value==e}));n&&n.customer_group&&n.customer_group.discount&&this.order.items.map((function(t){t.discount=parseFloat(t.discount)-parseFloat(n.customer_group.discount),r.$event.fire("pos:order:update",{item:t,qty:t.quantity,set:!0,force:!0,vCheck:!1})}))}this.saveOrder("customer_id",t),t&&this.checkCustomerGroup(t)},"order.reference":function(t,e){this.saveOrder("reference",t)},"order.details":function(t,e){this.saveOrder("details",t)},"order.date":function(t,e){this.saveOrder("date",t)},"order.type":function(t,e){this.saveOrder("type",t)},"order.taxes":function(t,e){this.saveOrder("taxes",t)},"order.discount_method":function(t,e){var r=this;"order"==this.order.discount_method?this.order.items=this.order.items.map((function(t){return t.discount=null,t.discount_amount=0,t})):this.order.items=this.order.items.map((function(t){return t.discount=r.order.discount?r.order.discount:null,t.discount_amount=r.order.discount?r.$options.filters.formatDecimal(t.price*t.discount/100,r.$store.state.settings.decimals):0,t})),this.saveOrder("discount_method",t)},"order.discount":o()((function(t,e){var r=this;(t=t?parseFloat(t):0)<=parseFloat(this.$store.state.settings.max_discount)&&("items"==this.order.discount_method&&(this.order.items=this.order.items.map((function(e){return e.discount=t,e.discount_amount=t?r.$options.filters.formatDecimal(e.price*e.discount/100,r.$store.state.settings.decimals):0,e}))),this.saveOrder("discount",t))}),500)},created:function(){var t=this;this.$event.listen("pos:makePayment",this.finalize),this.$event.listen("pos:deleteOrder",this.cancelOrder),this.$event.listen("pos:printBill",(function(){return t.print("bill")})),this.$event.listen("pos:printOrder",(function(){return t.print("order")})),this.$event.listen("pos:printReceipt",(function(){return t.print("receipt")})),this.$event.listen("pos:updateInfo",(function(){return t.extra=!0})),this.$event.listen("order:change",(function(){t.result=d(t.customers)})),this.$event.listen("order:show",(function(){window&&document.documentElement.clientWidth<=768&&t.$nextTick((function(){t.$refs.orderItems&&setTimeout((function(){return t.$refs.orderItems.scrollTop=t.$refs.orderItems.scrollHeight}),200)}))})),this.$event.listen("order:scroll",(function(){t.$nextTick((function(){t.$refs.orderItems&&(t.$refs.orderItems.scrollTop=t.$refs.orderItems.scrollHeight)}))})),this.attributes.map((function(e){t.cfRule(e),t.$watch("order."+e.slug,(function(t,r){this.saveOrder(e.slug,t)}))}))},methods:{addCustomer:function(){this.add_customer=!0},customerAdded:function(t){var e=this;t={value:t.id,label:t.name,points:t.points,state:t.state,country:t.country,customer_group:t.customer_group},this.$store.commit("addCustomer",t),this.$nextTick((function(){e.result=[].concat(d(e.result),[t]),e.saveOrder("customer_id",t.value),setTimeout((function(){e.order.customer_id=t.value}),300)})),this.add_customer=!1},cash:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.paymentForm.amount=e?t:parseFloat(this.paymentForm.amount?parseFloat(this.paymentForm.amount)+t:t),document.querySelector("#paymentFormAmount").focus()},clearCash:function(){this.paymentForm.amount=null},updatePaymentFormFocus:function(){var t=this;"cash"!=this.paymentForm.gateway&&(this.paymentForm.amount=this.orderTotalAmount),setTimeout((function(){return document.querySelector("#"+t.paymentForm.gateway)?document.querySelector("#"+t.paymentForm.gateway).focus():""}),100)},finalize:function(){var t=this;this.order&&this.order.items.length>0?this.$refs.orderForm.validate().then((function(e){e?(t.extra=!1,t.paymentForm.gateway||(t.paymentForm.gateway="cash"),t.paymentForm.amount=t.orderPayableAmount,t.payment=!0):(t.extra=!0,t.$Notice.destroy(),t.$Notice.error({title:t.$t("invalid_form"),desc:t.$t("invalid_form_error"),duration:5}))})).catch((function(t){return console.log(t)})):(this.$Notice.destroy(),this.$Notice.error({title:this.$t("empty_order"),desc:this.$t("empty_order_error"),duration:5}))},print:function(t){var e=this;if(this.printing)return!1;this.printing=!0,setTimeout((function(){return e.printing=!1}),1e3);var r=this.order;if("receipt"==t){var n=this.$store.getters.last_pos_sale;n?r=l(l({},n),{},{items:n.items.map((function(t){return l(l({},t),{},{selected:{portions:n.portions||[],modifiers:n.modifiers||[],variations:n.variations||[]}})}))}):(r=null,console.error("There is no sale recorded yet, please print from list sales page."))}if(r)if(1==this.$store.state.settings.pos_server){var o=null,i=null,a=null,s=null,c=null,u=null,d={},p=r.user?r.user:this.$store.getters.user,m=r.location?r.location:this.$store.getters.location;d.name=m.name||m.label;var f=[[this.$t("order_id"),r.orderId],[this.$t("reference"),"receipt"==t?r.reference:this.$store.getters.current],[this.$t("date"),this.date(r.date)],[this.$t("created_by"),p.name+"("+p.username+")"],[this.$t("created_at"),this.datetime(r.created_at)],[this.$t("printed_at"),this.datetime(new Date)]];if(o="receipt"==t?r.items.map((function(t){var r=["feed"],n=t.code+"\n"+t.name+(t.alt_name?"\n"+t.alt_name:"")+(t.comment?"\n"+t.comment:"");return t.variations&&t.variations.length?(r.push({type:"text",text:n}),t.variations.map((function(t){r.push({type:"item",name:" "+e.metaString(t.meta,!0,!0),price:e.formatNumber(parseFloat(t.pivot.net_price)+parseFloat(t.pivot.tax_amount)),qty:e.formatQuantity(t.pivot.quantity),subtotal:e.formatNumber(t.pivot.total)})}))):t.portions&&t.portions.length?(r.push({type:"text",text:n}),t.portions.map((function(t){r.push("feed"),r.push({type:"item",name:e.$tc("portion")+": "+e.$tc(t.name),price:e.formatNumber(parseFloat(t.pivot.price)-parseFloat(t.pivot.discount_amount)),qty:e.formatQuantity(t.pivot.quantity),subtotal:e.formatNumber(t.pivot.total)}),t.portion_items&&t.portion_items.length&&t.portion_items.map((function(n){r.push({type:"item",name:" "+n.item.name+(n.meta?"\n("+e.metaString(n.meta,!0,!0)+")":""),price:" ",qty:e.formatQuantity(parseFloat(n.quantity)*parseFloat(t.pivot.quantity)),subtotal:" "})})),t.essentials&&t.essentials.length&&t.essentials.map((function(n){r.push({type:"item",name:" "+n.item.name+(n.meta?"\n("+e.metaString(n.meta,!0,!0)+")":""),price:" ",qty:e.formatQuantity(parseFloat(n.quantity)*parseFloat(t.pivot.quantity)),subtotal:" "})})),t.choosables&&t.choosables.length&&t.choosables.map((function(n){n.items.map((function(o){t.pivot.choosables.find((function(t){return t.id==n.id&&o.item_id==t.item_id}))&&(r.push({type:"text",text:n.name}),r.push({type:"item",name:" "+o.item.name+(n.meta?"\n("+e.metaString(n.meta,!0,!0)+")":""),price:" ",qty:e.formatQuantity(parseFloat(o.quantity)*parseFloat(t.pivot.quantity)),subtotal:" "}))}))}))}))):r.push({name:n,type:"item",price:e.formatNumber(t.unit_price),qty:e.formatQuantity(t.quantity),subtotal:e.formatNumber(t.subtotal)}),t.modifier_options&&t.modifier_options.length&&t.modifier_options.map((function(t){r.push({type:"text",text:t.modifier.title}),r.push({type:"item",name:" "+t.item.name,price:e.formatNumber(parseFloat(t.pivot.net_price)+parseFloat(t.pivot.tax_amount)),qty:e.formatQuantity(t.pivot.quantity),subtotal:e.formatNumber(t.pivot.total)})})),r})):r.items.map((function(t){var r=["feed"],n=t.code+"\n"+t.name+(t.alt_name?"\n"+t.alt_name:"")+(t.comment?"\n"+t.comment:"");return t.selected.variations&&t.selected.variations.length?(r.push({type:"text",text:n}),t.selected.variations.map((function(t){r.push({type:"item",name:" "+e.metaString(t.meta,!0,!0),price:e.formatNumber(parseFloat(t.price-t.discount_amount)+e.calcItemTax(t)),qty:e.formatQuantity(t.quantity),subtotal:e.formatNumber((t.price-t.discount_amount+e.calcItemTax(t))*t.quantity)})}))):t.selected.portions&&t.selected.portions.length?(r.push({type:"text",text:n}),t.selected.portions.map((function(n){var o=t.portions.find((function(t){return t.id==n.id}));r.push("feed"),r.push({type:"item",name:e.$tc("portion")+": "+e.$t(o.name),price:e.formatNumber(n.price-n.discount_amount+e.calcItemTax(n)),qty:e.formatQuantity(n.quantity),subtotal:e.formatNumber((n.price-n.discount_amount+e.calcItemTax(n))*n.quantity)}),o.portion_items&&o.portion_items.length&&o.portion_items.map((function(t){r.push({type:"item",name:" "+t.item.name+(t.meta?"\n("+e.metaString(t.meta,!0,!0)+")":""),price:" ",qty:e.formatQuantity(t.quantity*n.quantity),subtotal:" "})})),o.essentials&&o.essentials.length&&o.essentials.map((function(t){r.push({type:"item",name:" "+t.item.name+(t.meta?"\n("+e.metaString(t.meta,!0,!0)+")":""),price:" ",qty:e.formatQuantity(parseFloat(t.quantity)*parseFloat(n.quantity)),subtotal:" "})})),o.choosables&&o.choosables.length&&o.choosables.map((function(t){t.items.map((function(o){e.getPortionChoosable(n,t.id,o.item_id)&&(r.push({type:"text",text:t.name}),r.push({type:"item",name:" "+o.item.name+(t.meta?"\n("+e.metaString(t.meta,!0,!0)+")":""),price:" ",qty:e.formatQuantity(parseFloat(o.quantity)*parseFloat(n.quantity)),subtotal:" "}))}))}))}))):r.push({name:n,type:"item",price:e.formatNumber(t.price-t.discount_amount+e.calcItemTax(t)),qty:e.formatQuantity(t.quantity),subtotal:e.formatNumber(e.calcRowTotal(t))}),t.selected.modifiers&&t.selected.modifiers.length&&t.selected.modifiers.map((function(t){r.push({type:"text",text:t.title}),r.push({type:"item",name:" "+t.option,price:e.formatNumber(t.price-t.discount_amount+e.calcItemTax(t)),qty:e.formatQuantity(t.quantity),subtotal:e.formatNumber((t.price-t.discount_amount+e.calcItemTax(t))*t.quantity)})})),r})),"order"==t)u=[this.$t("name"),this.$t("qty")];else{if(a=[this.$store.state.settings.header,m.header],d.email=m.email,d.phone=m.phone,d.company=m.company,d.address=m.address,d.state=m.state_name,d.country=m.country_name,"bill"==t){var h=r.customer?r.customer:this.customers.find((function(t){return t.value==r.customer_id}));f.push([this.$tc("customer"),h.name+(h.company?" ("+h.company+")":"")]),i=[{label:this.$t("payable_amount"),value:this.formatNumber(this.orderPayableAmount)}],c=this.$t("only_for_company_record")}else{f.unshift([this.$tc("id"),r.id]),f.push([this.$tc("customer"),r.customer.name+(r.customer.company?" ("+r.customer.company+")":"")+(r.customer.email?" "+r.customer.email:"")+(r.customer.phone?" "+r.customer.phone:"")]),i=[{label:this.$t("total"),value:this.formatNumber(r.total)}],r.order_discount_amount&&i.push({label:this.$t("order_discount"),value:this.formatNumber(r.order_discount_amount)}),i.push({label:this.$t("tax_amount"),value:this.formatNumber(r.total_tax_amount)}),i.push({label:this.$t("grand_total"),value:this.formatNumber(r.grand_total)});var v=r&&r.payments?r.payments.reduce((function(t,e){return t+parseFloat(e.amount)}),0):0;i.push({label:this.$t("paid"),value:this.formatNumber(v)}),i.push({label:this.$t("balance_due"),value:this.formatNumber(parseFloat(r.grand_total)-v)}),c=this.$t("order_cgd")}u=[{label:this.$t("name")},{label:this.$t("price")},{label:this.$t("qty")},{label:this.$t("subtotal")}],s=[this.$store.state.settings.footer,m.footer]}var _={logo:m.logo||this.$store.state.settings.default_logo,heading:this.$store.state.settings.name,store_heading:this.$tc("location"),store_details:d,type:this.$tc(t),headers:a,info:f,table_headers:u,items:o,totals:i,footers:s,notice:c};this.$event.fire("pos:print",{type:"print-json-"+t,data:_})}else this.printData={},this.printData.type=t,this.printData.order=r,this.printData.order.oId=this.$store.getters.current,this.printData.customer=this.customers.find((function(t){return t.value==r.customer_id})),this.printData.order.location=r.location?r.location:this.$store.getters.location,this.printData.order.location.name=this.printData.order.location.name||this.printData.order.location.label,"receipt"==t&&(this.printData.order.items=this.printData.order.items.map((function(t){return t.selected={portions:[],variations:[],modifiers:[]},t.selected.portions=t.portions,t.selected.variations=t.variations,t.selected.modifiers=t.modifier_options,t}))),this.$Modal.confirm({width:365,closable:!0,scrollable:!0,render:function(t){return t("print-component",{props:{print:e.printData,vm:e}})},okText:this.$root.$t("print"),onOk:function(){window.print()},onCancel:function(){setTimeout((function(){return e.printData={}}),200)}})},saveOrder:function(t,e){this.updated=!0,this.$store.commit("updateOrder",{key:t,value:e,oId:this.$store.getters.current})},deleteOrder:function(){var t=this;this.$Modal.confirm({title:this.$t("deleting")+" "+this.$tc("order")+" "+this.$store.getters.current,content:this.$t("delete_confirm")+"<br><br><strong>"+this.$t("r_u_sure")+"</strong>",okText:this.$t("yes"),cancelText:this.$t("cancel"),onOk:function(){t.$event.fire("order:delete")}})},cancelOrder:function(){var t=this;if(this.$store.getters.superAdmin||this.can("delete-orders"))this.deleteOrder();else{var e=null;this.$Modal.confirm({width:260,okText:this.$t("ok"),cancelText:this.$t("cancel"),title:this.$t("pin_required"),render:function(r){return r("Input",{props:{value:e,autofocus:!0,placeholder:t.$t("type_pin")},on:{input:function(t){return e=t}}})},onOk:function(){t.$Message.info(e),t.deleteOrder()}})}},customerChanged:function(t){var e=this;if(t){var r=this.result.find((function(e){return e&&e.value==t}));this.$store.commit("addCustomer",r),this.$nextTick((function(){e.result=d(e.customers),e.saveOrder("customer_id",t)}))}},getCustomer:function(t){var e=this;if(t&&this.order){var r=this.customers.find((function(e){return e.value==t}));r?this.$nextTick((function(){e.order.customer_id=r.value})):this.$http.get("app/customers/".concat(t)).then((function(t){var r=t.data;e.$store.commit("addCustomer",{value:r.id,label:r.name}),e.$nextTick((function(){e.order.customer_id=r.id,e.result=d(e.customers)}))}))}},searchCustomers:function(t){this.result.find((function(e){return e.value==t||e.label==t}))||this.getCustomers(t,this)},getCustomers:o()((function(t,e){e.searching=!0;e.$store.getters.search_delay;e.$http.get("app/customers/search?q="+t).then((function(t){return e.result=t.data})).finally((function(){return e.searching=!1}))}),search_delay||250),cfRule:function(t){var e;return e="number"==t.type?[{type:"number",name:t.slug,trigger:"change",required:1==t.required,message:this.$t("field_is_required",{field:t.name})}]:"checkbox"==t.type?[{min:1,type:"array",name:t.slug,trigger:"change",required:1==t.required,message:this.$t("field_is_required",{field:t.name})}]:[{name:t.slug,trigger:"change",required:1==t.required,message:this.$t("field_is_required",{field:t.name})}],this.rules[t.slug]=e,e},handleSubmit:function(t){var e=this;this.$refs.paymentForm.validate().then((function(t){if(t){if("gift_card"==e.paymentForm.gateway&&parseFloat(e.gift_card.balance)<e.paymentForm.amount)return e.errors.payment.amount=e.$t("gift_card_payment_error"),void e.$Notice.error({title:e.$t("invalid_form"),desc:e.$t("gift_card_payment_error"),duration:10});e.loading=!0,e.submit()}else e.$Notice.error({title:e.$t("invalid_form"),desc:e.$t("invalid_form_error"),duration:10})}))},submit:function(){var t=this,e="app/sales?with=items",r="added",n="record_added";if(this.order.id&&""!=this.order.id&&(r="updated",n="record_updated",this.order._method="PUT",e=e+"/"+this.order.id),this.attributes.length>0){var o=this.attributes.map((function(e){var r={};return r[e.slug]=t.order[e.slug],r}));this.order.extra_attributes=Object.assign.apply(Object,d(o))}var i=d(this.order.items);i=i.map((function(t){var e={id:t.id,name:t.name,code:t.code,cost:t.cost,price:t.price,item_id:t.item_id,quantity:t.quantity,net_cost:t.net_cost,net_price:t.net_price,tax_amount:t.tax_amount,unit_cost:t.unit_cost,unit_price:t.unit_price,tax_included:t.tax_included,taxes:t.taxes,allTaxes:t.allTaxes,categories:t.categories,promotions:t.promotions,allPromotions:t.allPromotions,item_promotions:t.allPromotions,discount_amount:t.discount_amount,discount:t.discount?t.discount:0,selected:{modifiers:[],variations:[],portions:[]}};return t.selected.modifiers.length&&(e.selected.modifiers=t.selected.modifiers.map((function(t){return{id:t.mId,selected:t.id,price:t.price,quantity:t.quantity}}))),t.selected.variations.length&&(e.selected.variations=t.selected.variations.map((function(t){return{id:t.id,price:t.price,quantity:t.quantity}}))),t.selected.portions.length&&(e.selected.portions=t.selected.portions.map((function(t){return{id:t.id,cost:t.cost,price:t.price,quantity:t.quantity,essentials:t.essentials.map((function(t){return{id:t.id,item_id:t.item_id,variation_id:t.variation_id}})),choosables:t.choosables.map((function(t){return{id:t.id,selected:t.selected,variation_id:t.variation_id}})),portion_items:t.portion_items.map((function(t){return{id:t.id,item_id:t.item_id,variation_id:t.variation_id}}))}}))),e.promotions&&e.promotions.length&&(e.promotions=e.allPromotions.filter((function(t){return e.promotions.includes(t.id)}))),e.categories&&e.categories.length&&(e.categories=e.categories.map((function(t){return{id:t.id,promotions:t.promotions&&t.promotions.length?t.promotions.map((function(t){return t.id})):[]}}))),e.selected.variations.length&&(e.selected.variations=e.selected.variations.map((function(t){return t.taxes=t.taxes?t.taxes.map((function(t){return t.id})):[],t.allTaxes=t.item_taxes=t.allTaxes?t.allTaxes.map((function(t){return t.id})):[],t}))),e.selected.serials=t.selected.serials,e.taxes=e.taxes?e.taxes.map((function(t){return t.id})):[],e.allTaxes=e.item_taxes=e.allTaxes?e.allTaxes.map((function(t){return t.id})):[],e.promotions=t.promotions&&t.promotions.length?t.promotions.map((function(t){return t.id})):[],e.allPromotions=e.item_promotions=t.allPromotions&&t.allPromotions.length?t.allPromotions.map((function(t){return t.id})):[],e}));var a=l(l({},this.order),{},{items:i,oId:this.$store.getters.current});delete a.user,delete a.customer,delete a.location,a.pos=1,a.register_record_id=this.$store.getters.register.id,a.register_id=this.$store.getters.register.register_id,a.date=this.$moment(this.order.date).format(this.$moment.HTML5_FMT.DATE);var s=l(l({},a),{},{payment:this.paymentForm}),c=this.$form(s);this.$http.post(e,c).then((function(e){e.data.success?(t.$Notice.destroy(),t.$store.commit("UpdateLastPOSSale",e.data.data),t.$Notice.success({title:t.$tc("sale")+" "+t.$t(r),desc:t.$t(n)}),t.extra=t.payment=!1,t.$event.fire("order:delete",!0),1==t.$store.getters.settings.print_dialog&&t.$event.fire("pos:printReceipt")):t.$Notice.error({title:t.$tc("failed"),desc:t.$t("failed_error_text"),duration:120})})).catch((function(e){e.payment||(e.payment={}),t.errors=e})).finally((function(){return t.loading=!1}))},updateCF:function(t,e){var r=this;this.order[t]=e,setTimeout((function(){r.$refs.orderForm.validateField(t)}),1e3)}}};var f=r(93379),h=r.n(f),v=r(59501),_={insert:"head",singleton:!1};h()(v.Z,_);v.Z.locals;const g=(0,s.Z)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.$store.getters.current&&t.order?r("div",{staticClass:"pos-order",attrs:{id:"pos-order"}},[r("div",[r("div",{staticClass:"above-order-items"},[r("div",{staticClass:"order-info"},[r("Button",{staticStyle:{margin:"4px 0",padding:"4px",height:"auto"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.addCustomer()}}},[r("Icon",{staticStyle:{"margin-top":"2px"},attrs:{type:"ios-add-circle",size:"18",color:"#19be6b"}})],1),t._v(" "),r("span",{staticClass:"details customer_selection",staticStyle:{"margin-right":"20px","margin-left":"8px"}},[r("Select",{attrs:{remote:"",filterable:"",clearable:!0,loading:t.searching,"remote-method":t.searchCustomers,placeholder:t.$t("type_to_search_x",{x:t.$tc("customer")})},on:{"on-change":t.customerChanged},model:{value:t.order.customer_id,callback:function(e){t.$set(t.order,"customer_id",e)},expression:"order.customer_id"}},t._l(t.result,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("span",{staticClass:"other"},[t._v("\n          "+t._s(t.$t("ref_tab"))+": "),r("strong",[t._v(t._s(this.$store.getters.current))])])],1),t._v(" "),r("div",{staticClass:"order-sub-details"},[t.order.user?r("span",{staticClass:"details"},[t._v("\n          "+t._s(t.$t("served_by"))+": "),r("strong",[t._v(t._s(t.order.user.name))])]):r("span",{staticClass:"details"},[t._v("\n          "+t._s(t.$t("served_by"))+":\n          "),r("strong",[t._v(t._s(t.$store.getters.user&&t.$store.getters.user.acting_user?t.$store.getters.user.acting_user.name:t.$store.getters.user.name))])]),t._v(" "),r("span",{staticClass:"other"},[r("strong",[t._v(t._s(t.orderTotalItems))]),t._v(" "+t._s(t.$tc("item",t.orderTotalItems))+" "),r("strong",[t._v(t._s(t.orderTotalQuantity))]),t._v("\n          "+t._s(t.$t("quantity"))+"\n        ")])])]),t._v(" "),t.order&&t.order.items.length>0?[r("div",{staticClass:"pos-order-items"},[r("div",{staticClass:"order-items"},[r("div",{staticClass:"header"},[r("span",{staticClass:"index"},[t._v("#")]),t._v(" "),r("span",{staticClass:"details"},[t._v(t._s(t.$t("decs")))]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(t._s(t.$t("qty")))]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(t._s(t.$t("subtotal")))])]),t._v(" "),r("div",{ref:"orderItems",staticClass:"pos-order-scroll scroll-x"},t._l(t.order.items,(function(e,n){return r("div",{key:n+"_"+e.id,staticClass:"order-item"},[r("span",{staticClass:"item"},[r("span",{staticClass:"index"},[t._v("\n                  #"+t._s(n+1)+"\n                  "),t._v(" "),e.selected.variations&&e.selected.portions&&!e.selected.portions.length&&!e.selected.variations.length?r("span",[r("br"),t._v(" "),r("Icon",{staticClass:"pointer",attrs:{type:"md-close",size:"16",color:"#ed4014"},on:{click:function(r){return t.remove(e)}}})],1):t._e()]),t._v(" "),r("span",{staticClass:"details pointer",on:{click:function(e){return t.editItem(n)}}},[r("strong",[t._v(t._s(e.name))]),t._v(" "),r("br"),t._v(" "),r("span",[t.customer&&t.customer.customer_group?r("span",{domProps:{innerHTML:t._s(t.customer.customer_group.name+" (<small>"+t.$t("discount")+": "+t.customer.customer_group.discount+"%</small>)<br />")}}):t._e(),t._v(" "),e.selected.variations&&e.selected.portions&&!e.selected.portions.length&&!e.selected.variations.length?r("span",[0==e.discount_amount?r("span",[t._v("\n                        @"+t._s(t._f("formatNumber")(e.price,t.$store.state.settings.decimals))+"\n                        "),t.calcItemTax(e)>0?[1==e.tax_included?[t._v("\n                            ("+t._s(t._f("formatNumber")(t.calcItemTax(e),t.$store.state.settings.decimals))+")\n                          ")]:[t._v(" + "+t._s(t._f("formatNumber")(t.calcItemTax(e),t.$store.state.settings.decimals))+" ")]]:t._e()],2):r("span",[t._v("\n                        @"),r("del",[t._v(t._s(t._f("formatNumber")(e.price,t.$store.state.settings.decimals)))]),t._v("\n                        "+t._s(t._f("formatNumber")(e.price-e.discount_amount,t.$store.state.settings.decimals))+"\n                        "),t.calcItemTax(e)>0?[1==e.tax_included?[t._v("\n                            ("+t._s(t._f("formatNumber")(t.calcItemTax(e),t.$store.state.settings.decimals))+")\n                          ")]:[t._v(" + "+t._s(t._f("formatNumber")(t.calcItemTax(e),t.$store.state.settings.decimals))+" ")]]:t._e()],2)]):t._e()])]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{attrs:{readonly:!!e.selected.variations.length||!!e.selected.portions.length,size:e.selected.variations.length||e.selected.portions.length?"small":"default"},on:{"on-change":function(e){return t.itemQuantityChanged(t.order.items[n])}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"row.quantity"}})],1),t._v(" "),r("span",{staticClass:"subtotal"},[e.selected.portions&&!e.selected.portions.length?r("span",[t._v("\n                    "+t._s(t._f("formatNumber")(t.calcRowTotal(e),t.$store.state.settings.decimals))+"\n                  ")]):t._e()])]),t._v(" "),e.selected.variations&&e.selected.variations.length?t._l(e.selected.variations,(function(o,i){return r("div",{key:"svi_"+i,staticClass:"combo-item variation"},[r("span",{staticClass:"index"},[r("Icon",{staticClass:"pointer",attrs:{size:"16",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.remove(e,"Variation",o)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[r("small",[t._v("#"+t._s(i+1))]),t._v(" "),r("span",{domProps:{innerHTML:t._s(t.metaString(o.meta))}}),t._v(" "),r("br"),t._v(" "),0==o.discount_amount?r("span",[t._v("\n                      @"+t._s(t._f("formatNumber")(o.price,t.$store.state.settings.decimals))+"\n                      "),t.calcItemTax(o)>0?[1==e.tax_included?[t._v("\n                          ("+t._s(t._f("formatNumber")(t.calcItemTax(o),t.$store.state.settings.decimals))+")\n                        ")]:[t._v(" + "+t._s(t._f("formatNumber")(t.calcItemTax(o),t.$store.state.settings.decimals))+" ")]]:t._e()],2):r("span",[t._v("\n                      @"),r("del",[t._v(t._s(t._f("formatNumber")(o.price,t.$store.state.settings.decimals)))]),t._v("\n                      "+t._s(t._f("formatNumber")(o.price-o.discount_amount,t.$store.state.settings.decimals))+"\n                      "),t.calcItemTax(o)>0?[1==e.tax_included?[t._v("\n                          ("+t._s(t._f("formatNumber")(t.calcItemTax(o),t.$store.state.settings.decimals))+")\n                        ")]:[t._v(" + "+t._s(t._f("formatNumber")(t.calcItemTax(o),t.$store.state.settings.decimals))+" ")]]:t._e()],2)]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemVariationQuantityChanged(t.order.items[n])}},model:{value:o.quantity,callback:function(e){t.$set(o,"quantity",e)},expression:"sv.quantity"}})],1),t._v(" "),r("span",{staticClass:"subtotal"})])})):t._e(),t._v(" "),e.selected.portions.length?t._l(e.selected.portions,(function(o,i){return r("div",{key:"spi_"+i,staticClass:"combo"},t._l(e.portions.filter((function(t){return t.id==o.id})),(function(a){return r("div",{key:"pi_"+a.id,staticClass:"combo"},[r("div",{staticClass:"combo-item variation"},[r("span",{staticClass:"index"},[r("Icon",{staticClass:"pointer",attrs:{size:"16",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.remove(e,"Portion",o,i)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[r("p",[t._v("\n                          "+t._s(i+1)+". "+t._s(t.$tc("portion"))+":\n                          "),r("strong",[t._v(t._s("regular"==a.name?t.$t("regular"):a.name))]),t._v(" "),r("br"),t._v(" "),0==o.discount_amount?[t._v("\n                            @"+t._s(t._f("formatNumber")(o.price,t.$store.state.settings.decimals))+"\n                            "),t.calcItemTax(o)>0?[1==e.tax_included?[t._v("\n                                ("+t._s(t._f("formatNumber")(t.calcItemTax(o),t.$store.state.settings.decimals))+")\n                              ")]:[t._v(" + "+t._s(t._f("formatNumber")(t.calcItemTax(o),t.$store.state.settings.decimals))+" ")]]:t._e()]:[t._v("\n                            @"),r("del",[t._v(t._s(t._f("formatNumber")(o.price,t.$store.state.settings.decimals)))]),t._v("\n                            "+t._s(t._f("formatNumber")(o.price-o.discount_amount,t.$store.state.settings.decimals))+"\n                            "),t.calcItemTax(o)>0?[1==e.tax_included?[t._v("\n                                ("+t._s(t._f("formatNumber")(t.calcItemTax(o),t.$store.state.settings.decimals))+")\n                              ")]:[t._v(" + "+t._s(t._f("formatNumber")(t.calcItemTax(o),t.$store.state.settings.decimals))+" ")]]:t._e()]],2)]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemPortionQuantityChanged(t.order.items[n])}},model:{value:o.quantity,callback:function(e){t.$set(o,"quantity",e)},expression:"sp.quantity"}})],1),t._v(" "),r("span",{staticClass:"subtotal"},[t._v("\n                        "+t._s(t.formatNumber((o.price-o.discount_amount+o.total_tax_amount)*o.quantity))+"\n                      ")])]),t._v(" "),t._l(a.essentials,(function(e,n){return r("div",{key:"ei_"+n,staticClass:"combo-item bt0",staticStyle:{"padding-top":"1px"}},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details"},[t._v("\n                        #"+t._s(n+1)+" "+t._s(e.item.name)+"\n                        "),e.variation_id?r("div",{staticStyle:{"line-height":"1","margin-bottom":"5px"}},[t._v("\n                          ("),r("span",{domProps:{innerHTML:t._s(t.metaString(e.item.variations.find((function(t){return t.id==e.variation_id})).meta))}}),t._v(")\n                        ")]):t._e()]),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n                        "+t._s(parseFloat(e.quantity*o.quantity))+"\n                      ")]),t._v(" "),r("span",{staticClass:"subtotal"})])})),t._v(" "),t._l(a.choosables,(function(e,n){return t._l(e.items,(function(i,s){return r("div",{key:"gii_"+s+"_"+n,staticClass:"combo-item bt0"},[t.getPortionChoosable(o,e.id,i.item_id)?[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details"},[t._v("\n                            #"+t._s(n+1+a.essentials.length)+"\n                            "+t._s(i.item.name)+"\n                            "),i.variation_id?r("div",{staticStyle:{"line-height":"1","margin-bottom":"5px"}},[t._v("\n                              ("),r("span",{domProps:{innerHTML:t._s(t.metaString(i.item.variations.find((function(t){return t.id==i.variation_id})).meta))}}),t._v(")\n                            ")]):t._e()]),t._v(" "),r("span",{staticClass:"quantity input"},[t._v("\n                            "+t._s(parseFloat(i.quantity*o.quantity))+"\n                          ")]),t._v(" "),r("span",{staticClass:"subtotal"})]:t._e()],2)}))}))],2)})),0)})):t._e(),t._v(" "),e.selected.modifiers.length?[r("div",{staticClass:"combo-item bg"},[r("span",{staticClass:"index"}),t._v(" "),r("span",{staticClass:"details"},[r("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.$tc("modifier",2)))])]),t._v(" "),r("span",{staticClass:"quantity"},[t._v(" ")]),t._v(" "),r("span",{staticClass:"subtotal"},[t._v(" ")])]),t._v(" "),t._l(e.selected.modifiers,(function(o,i){return r("div",{key:"mi_"+i,attrs:{sm:24,md:12,lg:12}},[r("div",{staticClass:"combo-item",staticStyle:{"padding-top":"5px"}},[r("span",{staticClass:"index"},[r("Icon",{staticClass:"pointer",attrs:{size:"16",color:"#ed4014",type:"md-close"},on:{click:function(r){return t.remove(e,"Modifier",o,i)}}})],1),t._v(" "),r("span",{staticClass:"details leading-medium"},[t._v("\n                      "+t._s(i+1)+". "),r("strong",[t._v(t._s(o.option))]),t._v(" "),r("br"),t._v("\n                      "+t._s(o.title)+"\n                      @"+t._s(t.formatNumber(o.price-o.discount_amount+t.calcItemTax(o)))+"\n                    ")]),t._v(" "),r("span",{staticClass:"quantity"},[r("InputNumber",{on:{"on-change":function(e){return t.itemModifierQuantityChanged(t.order.items[n])}},model:{value:o.quantity,callback:function(e){t.$set(o,"quantity",e)},expression:"m.quantity"}})],1),t._v(" "),r("span",{staticClass:"subtotal"})])])}))]:t._e()],2)})),0)])]),t._v(" "),r("div",{staticClass:"below-order-items"},[r("div",{staticClass:"order-total"},[r("h3",{directives:[{name:"show",rawName:"v-show",value:0!=t.orderTotalItems,expression:"orderTotalItems != 0"}],staticClass:"total"},[t._v("\n            "+t._s(t.$t("payable_amount"))+"\n            "),r("span",{staticClass:"amount"},[t.orderOriginalTotal!=t.orderPayableAmount?r("span",[r("del",[t._v("\n                  "+t._s(t._f("formatNumber")(t.orderOriginalTotal,t.$store.state.settings.decimals))+"\n                ")])]):t._e(),t._v(" "),r("span",[t.orderDiscount?r("span",[r("span",{staticStyle:{"font-weight":"normal"}},[t._v("\n                    ("+t._s(t._f("formatNumber")(t.orderTotalAmount,t.$store.state.settings.decimals))+" -\n                    "+t._s(t._f("formatNumber")(t.orderDiscount,t.$store.state.settings.decimals))+")\n                  ")]),t._v("\n                  "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                ")]):r("span",[t._v("\n                  "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                ")])])])])])]),t._v(" "),r("div",{staticClass:"pos-order-actions"},[r("ButtonGroup",[t.$store.getters.last_pos_sale?r("Tooltip",{staticClass:"btn",attrs:{content:t.$tc("last_pos_sale"),placement:"top"}},[r("Button",{attrs:{size:"large",type:"text"},on:{click:function(e){return t.print("receipt")}}},[r("Icon",{attrs:{type:"ios-print",size:"18"}})],1)],1):t._e(),t._v(" "),r("Tooltip",{staticClass:"btn btn-left",attrs:{content:t.$tc("order"),placement:"top"}},[r("Button",{attrs:{size:"large",type:"info"},on:{click:function(e){t.extra=!0}}},[r("Icon",{attrs:{type:"ios-information-circle-outline",size:"18"}})],1)],1),t._v(" "),r("Tooltip",{staticClass:"btn",attrs:{content:t.$tc("delete"),placement:"top"}},[r("Button",{attrs:{size:"large",type:"error"},on:{click:function(e){return t.cancelOrder()}}},[r("Icon",{attrs:{type:"ios-trash",size:"18"}})],1)],1),t._v(" "),r("Tooltip",{staticClass:"btn",attrs:{content:t.$tc("order"),placement:"top"}},[r("Button",{attrs:{size:"large",type:"warning"},on:{click:function(e){return t.print("order")}}},[r("Icon",{attrs:{type:"ios-print",size:"18"}})],1)],1),t._v(" "),r("Tooltip",{staticClass:"btn btn-print",attrs:{content:t.$tc("bill"),placement:"top"}},[r("Button",{attrs:{size:"large",type:"primary"},on:{click:function(e){return t.print("bill")}}},[r("Icon",{attrs:{type:"ios-print",size:"18"}})],1)],1),t._v(" "),r("Button",{staticClass:"btn btn-payment",attrs:{size:"large",type:"success"},on:{click:function(e){return t.finalize()}}},[t._v(t._s(t.$tc("payment")))])],1)],1)]:[r("Card",{staticStyle:{margin:"40px auto"},attrs:{"dis-hover":"",bordered:!1}},[r("div",{staticStyle:{"text-align":"center"}},[r("Icon",{attrs:{size:"36",type:"ios-cube-outline"}}),t._v(" "),r("h3",{staticStyle:{color:"#808695",margin:"10px 0 20px 0"}},[t._v("Please add items to order")]),t._v(" "),t.$store.getters.last_pos_sale?r("Button",{staticClass:"mb16",attrs:{type:"primary"},on:{click:function(e){return t.print("receipt")}}},[r("Icon",{attrs:{type:"ios-print",size:"18"}}),t._v(" "+t._s(t.$t("print_x",{x:t.$tc("last_pos_sale")}))+"\n          ")],1):t._e(),t._v(" "),r("br"),r("Button",{attrs:{type:"error"},on:{click:function(e){return t.cancelOrder()}}},[r("Icon",{attrs:{type:"ios-trash",size:"18"}}),t._v(" "+t._s(t.$t("delete_x",{x:t.$tc("order")}))+"\n          ")],1)],1)])]],2),t._v(" "),r("Modal",{attrs:{scrollable:"",fullscreen:"","mask-closable":!1,title:t.$t("order_form")+" ("+t.$tc("ref_tab")+": "+t.$store.getters.current+")"},model:{value:t.extra,callback:function(e){t.extra=e},expression:"extra"}},[r("Form",{ref:"orderForm",attrs:{model:t.order,rules:t.rules,"label-width":140}},[r("div",{staticClass:"drawer-content",staticStyle:{height:"calc(100vh - 112px) !important",margin:"-16px",padding:"16px"}},[r("div",{staticStyle:{width:"90%","max-width":"1200px",margin:"0 auto"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("type"),prop:"type",error:t._f("a2s")(t.errors.form.type)}},[r("Select",{attrs:{placeholder:""},model:{value:t.order.type,callback:function(e){t.$set(t.order,"type",e)},expression:"order.type"}},[r("Option",{attrs:{value:"nett"}},[t._v(t._s(t.$t("nett")))]),t._v(" "),r("Option",{attrs:{value:"layaway"}},[t._v(t._s(t.$t("layaway")))]),t._v(" "),r("Option",{attrs:{value:"on_account"}},[t._v(t._s(t.$t("on_account")))])],1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("date"),prop:"date",error:t._f("a2s")(t.errors.form.date)}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:t.order.date,callback:function(e){t.$set(t.order,"date",e)},expression:"order.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$tc("customer"),prop:"customer_id",error:t._f("a2s")(t.errors.form.customer_id)}},[r("Select",{attrs:{remote:"",filterable:"",clearable:!0,loading:t.searching,"remote-method":t.searchCustomers,placeholder:t.$t("type_to_search_x",{x:t.$tc("customer")})},on:{"on-change":t.customerChanged},model:{value:t.order.customer_id,callback:function(e){t.$set(t.order,"customer_id",e)},expression:"order.customer_id"}},t._l(t.result,(function(e,n){return r("Option",{key:n+e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("reference"),prop:"reference",error:t._f("a2s")(t.errors.form.reference)}},[r("Input",{model:{value:t.order.reference,callback:function(e){t.$set(t.order,"reference",e)},expression:"order.reference"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$t("order_taxes"),prop:"order_taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.order.taxes,callback:function(e){t.$set(t.order,"taxes",e)},expression:"order.taxes"}},t._l(t.$store.getters.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n                    "+t._s(e.name)+"\n                  ")])})),1)],1),t._v(" "),t.$store.state.settings.max_discount>0?r("span",[r("FormItem",{attrs:{label:t.$t("discount"),prop:"discount",error:t._f("a2s")(t.errors.form.discount)}},[r("InputNumber",{attrs:{formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")}},model:{value:t.order.discount,callback:function(e){t.$set(t.order,"discount",e)},expression:"order.discount"}})],1),t._v(" "),r("FormItem",[r("RadioGroup",{attrs:{vertical:""},model:{value:t.order.discount_method,callback:function(e){t.$set(t.order,"discount_method",e)},expression:"order.discount_method"}},[r("Radio",{attrs:{label:"order"}},[t._v(t._s(t.$t("apply_to_order_amount")))]),t._v(" "),r("Radio",{attrs:{label:"items"}},[t._v(t._s(t.$t("apply_to_order_items")))])],1)],1)],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[r("form-custom-fields",{attrs:{attributes:t.attributes},on:{update:t.updateCF},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}}),t._v(" "),r("FormItem",{attrs:{label:t.$t("details"),prop:"details"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.order.details,callback:function(e){t.$set(t.order,"details",e)},expression:"order.details"}})],1)],1)],1)],1)])]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{staticStyle:{float:"left"},attrs:{size:"large",type:"info"},on:{click:function(e){return t.addCustomer()}}},[t._v(t._s(t.$t("add_x",{x:t.$tc("customer")})))]),t._v(" "),r("Button",{attrs:{size:"large",type:"text"},on:{click:function(e){t.extra=!1}}},[t._v(t._s(t.$t("close")))]),t._v(" "),r("Button",{staticClass:"total",attrs:{size:"large",type:"success"},on:{click:function(e){return t.finalize()}}},[t._v(t._s(t.$tc("payment")))])],1)],1),t._v(" "),r("Drawer",{staticClass:"drawer-fixed",attrs:{title:t.$tc("payment"),width:"400",closable:!t.loading,"mask-closable":!1},model:{value:t.payment,callback:function(e){t.payment=e},expression:"payment"}},[r("Form",{ref:"paymentForm",attrs:{model:t.paymentForm,rules:t.paymentRules}},[r("div",{staticClass:"drawer-content"},[r("div",{staticClass:"fixed-top"},[r("FormItem",[r("div",{staticClass:"table-wrapper payment-table"},[r("div",{staticClass:"table"},[r("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[r("tbody",{staticClass:"ivu-table-tbody"},[r("tr",{staticClass:"ivu-table-row bg-info white"},[r("td",{},[r("div",{staticClass:"ivu-table-cell"},[t._v(t._s(t.$t("payable_amount"))+":")])]),t._v(" "),r("td",[r("div",{staticClass:"ivu-table-cell text-right"},[t._v("\n                          "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                        ")])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row bg-success white"},[r("td",{},[r("div",{staticClass:"ivu-table-cell"},[t._v(t._s(t.$t("paid"))+":")])]),t._v(" "),r("td",[r("div",{staticClass:"ivu-table-cell text-right"},[t._v("\n                          "+t._s(t._f("formatNumber")(t.paymentForm.amount,t.$store.state.settings.decimals))+"\n                        ")])])]),t._v(" "),r("tr",{staticClass:"ivu-table-row bg-warning white"},[r("td",{},[r("div",{staticClass:"ivu-table-cell"},[t._v(t._s(t.$t("change"))+":")])]),t._v(" "),r("td",[r("div",{staticClass:"ivu-table-cell text-right"},[t._v("\n                          "+t._s(t._f("formatNumber")(t.paymentChange,t.$store.state.settings.decimals))+"\n                        ")])])])])])])])])],1),t._v(" "),r("transition",{attrs:{name:"slide-fade"}},["cash"==t.paymentForm.gateway?r("span",[r("FormItem",{staticStyle:{"margin-bottom":"8px"}},[r("ButtonGroup",{staticClass:"quick-cash"},t._l(t.$store.state.settings.quick_cash.split("|").sort((function(t,e){return t-e})),(function(e,n){return r("Button",{key:e+"_"+n,on:{click:function(r){t.cash(parseFloat(e))}}},[t._v("\n                  "+t._s(e)+"\n                ")])})),1)],1),t._v(" "),r("FormItem",[r("ButtonGroup",{staticClass:"quick-cash"},[r("Button",{staticClass:"total",attrs:{type:"info"},on:{click:function(e){return t.cash(t.orderPayableAmount,!0)}}},[t._v("\n                  "+t._s(t._f("formatNumber")(t.orderPayableAmount,t.$store.state.settings.decimals))+"\n                ")]),t._v(" "),r("Button",{attrs:{type:"error"},on:{click:function(e){return t.clearCash()}}},[t._v(t._s(t.$t("clear")))])],1)],1)],1):t._e()]),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{sm:12}},[r("FormItem",{attrs:{label:t.$t("paying_amount"),prop:"amount",error:t.errors.payment.amount}},[r("InputNumber",{attrs:{"element-id":"paymentFormAmount"},model:{value:t.paymentForm.amount,callback:function(e){t.$set(t.paymentForm,"amount",e)},expression:"paymentForm.amount"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:12}},[r("FormItem",{attrs:{label:t.$t("gateway"),prop:"gateway",error:t.errors.payment.gateway}},[r("Select",{attrs:{placeholder:""},on:{"on-change":function(e){return t.updatePaymentFormFocus()}},model:{value:t.paymentForm.gateway,callback:function(e){t.$set(t.paymentForm,"gateway",e)},expression:"paymentForm.gateway"}},[r("Option",{attrs:{value:"cash"}},[t._v(t._s(t.$t("cash")))]),t._v(" "),r("Option",{attrs:{value:"cheque"}},[t._v(t._s(t.$t("cheque")))]),t._v(" "),r("Option",{attrs:{value:"gift_card"}},[t._v(t._s(t.$tc("gift_card")))]),t._v(" "),r("Option",{attrs:{value:"credit_card"}},[t._v(t._s(t.$t("credit_card")))]),t._v(" "),r("Option",{attrs:{value:"other"}},[t._v(t._s(t.$t("other")))])],1)],1)],1)],1),t._v(" "),"credit_card"==t.paymentForm.gateway?r("span",[r("FormItem",{attrs:{error:t.errors.payment.swipe,id:"swipe_holder"}},[r("Input",{attrs:{placeholder:t.$t("swipe_card_text"),"element-id":"credit_card"},model:{value:t.paymentForm.swipe,callback:function(e){t.$set(t.paymentForm,"swipe",e)},expression:"paymentForm.swipe"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("card_holder"),prop:"card_holder",error:t.errors.payment.card_holder}},[r("Input",{model:{value:t.paymentForm.card_holder,callback:function(e){t.$set(t.paymentForm,"card_holder",e)},expression:"paymentForm.card_holder"}})],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:t.$t("card_number"),prop:"card_number",error:t.errors.payment.card_number}},[r("Input",{model:{value:t.paymentForm.card_number,callback:function(e){t.$set(t.paymentForm,"card_number",e)},expression:"paymentForm.card_number"}})],1)],1),t._v(" "),r("Col",{attrs:{span:"1"}},[t._v(" ")]),t._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:t.$t("expiry_date"),prop:"expiry_date",error:t.errors.payment.expiry_date}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"month",format:"MM/yy"},model:{value:t.paymentForm.expiry_date,callback:function(e){t.$set(t.paymentForm,"expiry_date",e)},expression:"paymentForm.expiry_date"}})],1)],1),t._v(" "),r("Col",{attrs:{span:"1"}},[t._v(" ")]),t._v(" "),r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{label:t.$t("cvv"),prop:"cvv",error:t.errors.payment.cvv}},[r("Input",{attrs:{"element-id":"cvv"},model:{value:t.paymentForm.cvv,callback:function(e){t.$set(t.paymentForm,"cvv",e)},expression:"paymentForm.cvv"}})],1)],1)],1)],1):t._e(),t._v(" "),"gift_card"==t.paymentForm.gateway?r("span",[r("FormItem",{attrs:{label:t.$t("gift_card_number"),prop:"gift_card_number",error:t.errors.payment.gift_card_number}},[r("AutoComplete",{staticStyle:{width:"100%"},attrs:{icon:"ios-search","element-id":"gift_card"},on:{"on-search":t.searchGiftCard,"on-select":t.giftCardSelected},model:{value:t.paymentForm.gift_card_number,callback:function(e){t.$set(t.paymentForm,"gift_card_number",e)},expression:"paymentForm.gift_card_number"}},t._l(t.gift_cards,(function(e,n){return r("Option",{key:"gift_card_"+n,attrs:{value:e.number}},[t._v(t._s(e.number))])})),1),t._v(" "),t.gift_card&&t.gift_card.number?r("span",[t._v("\n              "+t._s(t.$t("balance"))+": "+t._s(t._f("formatNumber")(t.gift_card.balance,t.$store.state.settings.decimals))+"\n            ")]):t._e()],1)],1):"cheque"==t.paymentForm.gateway?r("span",[r("FormItem",{attrs:{label:t.$t("cheque_number"),prop:"cheque_number",error:t.errors.payment.cheque_number}},[r("Input",{attrs:{"element-id":"cheque"},model:{value:t.paymentForm.cheque_number,callback:function(e){t.$set(t.paymentForm,"cheque_number",e)},expression:"paymentForm.cheque_number"}})],1)],1):t._e(),t._v(" "),r("FormItem",{attrs:{label:t.$t("payment_details"),prop:"payment_details",error:t.errors.payment.payment_details}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.paymentForm.payment_details,callback:function(e){t.$set(t.paymentForm,"payment_details",e)},expression:"paymentForm.payment_details"}})],1)],1),t._v(" "),r("div",{staticClass:"drawer-footer",staticStyle:{padding:"6px"}},[r("ButtonGroup",{staticClass:"quick-cash"},[r("Button",{attrs:{size:"large",disabled:t.loading},on:{click:function(e){t.payment=!1}}},[t._v(t._s(t.$t("cancel")))]),t._v(" "),r("Button",{staticClass:"total",attrs:{size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("\n            "+t._s(t.$t("submit"))+"\n          ")])],1)],1)])],1),t._v(" "),r("Modal",{attrs:{width:600,"footer-hide":!0,title:t.edit_item?t.$t("edit")+" - "+t.edit_item.name:""},model:{value:t.show_item_edit,callback:function(e){t.show_item_edit=e},expression:"show_item_edit"}},[t.edit_item?r("div",[r("Form",{ref:"editItemForm",attrs:{model:t.edit_item,"label-position":"top"}},[r("Row",{attrs:{gutter:16}},[t.edit_item.portions.length||t.edit_item.has_variants?t._e():r("Col",{attrs:{sm:24,md:24,lg:24}},[r("FormItem",{staticClass:"text-center",attrs:{prop:"quantity",label:t.$t("quantity"),rules:{min:.01,type:"number",required:!0,trigger:"change",message:t.$t("field_is_required",{field:t.$t("quantity")})}}},[r("InputNumber",{attrs:{step:.1,min:.01,size:"large"},model:{value:t.edit_item.quantity,callback:function(e){t.$set(t.edit_item,"quantity",e)},expression:"edit_item.quantity"}})],1)],1),t._v(" "),t.edit_item.portions&&t.edit_item.portions.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},t._l(t.edit_item.selected.portions,(function(e,n){return r("span",{key:"eispi_"+n},t._l(t.edit_item.portions.filter((function(t){return t.id==e.id})),(function(o){return r("span",{key:"pi_"+o.id},[r("Card",{staticClass:"cardp",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-option"}}),t._v("\n                      "+t._s(n+1)+". "+t._s(t.$tc("portion"))+": ("+t._s("regular"==o.name?t.$t("regular"):o.name)+")\n                    ")],1),t._v(" "),!n&&t.edit_item.portions.length>1?r("Button",{attrs:{slot:"extra",type:"primary",size:"small"},on:{click:function(e){return t.addPortionToEditItem()}},slot:"extra"},[t._v("\n                      "+t._s(t.$t("add_x",{x:t.$tc("portion")}))+"\n                    ")]):t._e(),t._v(" "),r("Row",{attrs:{gutter:16}},[r("Col",{staticClass:"mb16",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("portion")}},[r("Select",{attrs:{value:e.id},on:{"on-change":function(e){return t.changeSelectedPortion(e,n)}}},t._l(t.edit_item.portions,(function(e,n){return r("Option",{key:"pi_"+n,attrs:{value:e.id}},[t._v("\n                              "+t._s("regular"==e.name?t.$t("regular"):e.name)+"\n                            ")])})),1)],1)],1),t._v(" "),r("Col",{staticClass:"mb16",attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("quantity")}},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"eisp.quantity"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}},[o.portion_items&&o.portion_items.length?[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                              "+t._s(t.$tc("item",o.portion_items.length))+"\n                            ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                            "+t._s(o.portion_items.map((function(t){return t.item.name})).join(", "))+"\n                          ")])]:t._e(),t._v(" "),o.essentials&&o.essentials.length?[r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                              "+t._s(t.$t("essential_items"))+"\n                            ")])]),t._v(" "),r("p",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[t._v("\n                            "+t._s(o.essentials.map((function(t){return t.item.name})).join(", "))+"\n                          ")])]:t._e(),t._v(" "),o.choosables&&o.choosables.length?[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                              "+t._s(t.$t("choosable_items"))+"\n                            ")])]),t._v(" "),r("Row",{attrs:{gutter:16}},t._l(o.choosables,(function(o,i){return r("Col",{key:"gi_"+i,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:o.name,prop:"selected.portions."+n+".choosables."+i+".selected",rules:{required:!0,trigger:"change",message:t.$t("select_x",{x:t.$tc("item")})}}},[r("Select",{model:{value:e.choosables[i].selected,callback:function(r){t.$set(e.choosables[i],"selected",r)},expression:"eisp.choosables[gi].selected"}},t._l(o.items,(function(e,n){return r("Option",{key:"gii_"+n,attrs:{value:e.item_id}},[t._v("\n                                    "+t._s(e.item.name)+"\n                                  ")])})),1)],1)],1)})),1)]:t._e(),t._v(" "),o.portion_items&&o.portion_items.length?t._l(o.portion_items,(function(o,i){return r("div",{key:"eiv_"+i},[o.item.variants&&o.item.variants.length?[r("div",{key:"t_"+i,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(o.item.name)+" ("+t._s(t.$tc("variation"))+")")])]),t._v(" "),r("Row",{key:"r_"+i,attrs:{gutter:16}},t._l(o.item.variants,(function(o,a){return r("Col",{key:"pcsv_"+a,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+o.id,attrs:{label:o.name}},[r("Select",{on:{"on-change":function(e){return t.selectPortionItemVariant(n,i)}},model:{value:e.portion_items[i].meta[o.name],callback:function(r){t.$set(e.portion_items[i].meta,o.name,r)},expression:"eisp.portion_items[ei].meta[v.name]"}},t._l(o.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()],2)})):t._e(),t._v(" "),o.essentials&&o.essentials.length?t._l(o.essentials,(function(o,i){return r("div",{key:"eiv_"+i},[o.item.variants&&o.item.variants.length?[r("div",{key:"t_"+i,staticClass:"mb16"},[r("span",{staticClass:"bold"},[t._v(t._s(o.item.name)+" ("+t._s(t.$tc("variation"))+")")])]),t._v(" "),r("Row",{key:"r_"+i,attrs:{gutter:16}},t._l(o.item.variants,(function(o,a){return r("Col",{key:"pcsv_"+a,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+o.id,attrs:{label:o.name}},[r("Select",{on:{"on-change":function(e){return t.selectEssentialVariant(n,i)}},model:{value:e.essentials[i].meta[o.name],callback:function(r){t.$set(e.essentials[i].meta,o.name,r)},expression:"eisp.essentials[ei].meta[v.name]"}},t._l(o.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)})),1)]:t._e()],2)})):t._e(),t._v(" "),o.choosables&&o.choosables.length?t._l(o.choosables,(function(o,i){return r("div",{key:"giv_"+i},[t._l(o.items,(function(a){return[e.choosables[i].selected&&e.choosables[i].selected==a.item.id&&a.item.variants&&a.item.variants.length?[r("Row",{key:"r_"+i,attrs:{gutter:16}},[r("Col",{key:"t_"+i,staticClass:"mb16",attrs:{lg:24}},[r("span",{staticClass:"bold"},[t._v(t._s(o.name))]),t._v(": "+t._s(a.item.name)+" ("+t._s(t.$tc("variation"))+")\n                                  ")]),t._v(" "),t._l(a.item.variants,(function(o,a){return r("Col",{key:"pcsv_"+a,attrs:{xs:24,sm:12}},[r("FormItem",{key:"pcsvf_"+o.id,attrs:{label:o.name}},[r("Select",{on:{"on-change":function(e){return t.selectChoosableVariant(n,i)}},model:{value:e.choosables[i].meta[o.name],callback:function(r){t.$set(e.choosables[i].meta,o.name,r)},expression:"eisp.choosables[gi].meta[v.name]"}},t._l(o.options,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)}))],2)]:t._e()]}))],2)})):t._e()],2)],1)],1)],1)})),0)})),0),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),t.edit_item.variants&&t.edit_item.variants.length?[t._l(t.edit_item.selected.variations,(function(e,n){return r("span",{key:"sv_meta_"+n},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("span",{staticStyle:{color:"#515a6e"},domProps:{innerHTML:t._s(t.metaString(e.meta))}})]),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:t.$tc("quantity"),prop:"selected.variations."+n+".quantity",rules:{required:!0,type:"number",trigger:"change",max:parseFloat(e.available),message:t.$t("only_x_quantity_available",{x:parseFloat(e.available)})}}},[r("InputNumber",{model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"eisv.quantity"}})],1)],1),t._v(" "),r("Col",{staticClass:"text-primary",staticStyle:{"padding-top":"2.5em"},attrs:{sm:24,md:12,lg:12}},[t._v("\n                "+t._s(t.$t("available_x",{x:t.$t("quantity")}))+":\n                "),r("strong",[t._v(t._s(e.available))])])],1)})),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),t.edit_item.modifiers&&t.edit_item.modifiers.length?[r("Col",{attrs:{sm:24,md:24,lg:24}},[r("Divider",{attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n                  "+t._s(t.$tc("modifier",2))+"\n                ")])])],1),t._v(" "),t._l(t.edit_item.modifiers,(function(e,n){return r("Col",{key:"mi_"+n,attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{label:e.title,prop:"modifiers"}},["radio"==e.show_as?r("span",[r("RadioGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"checkbox"==e.show_as?r("span",[r("CheckboxGroup",{attrs:{vertical:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select"==e.show_as?r("span",[r("Select",{model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):"select_multiple"==e.show_as?r("span",[r("Select",{attrs:{multiple:""},model:{value:e.selected,callback:function(r){t.$set(e,"selected",r)},expression:"m.selected"}},t._l(e.options,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(t.modOptLabel(e)))])})),1)],1):t._e()])],1)})),t._v(" "),r("Col",{attrs:{sm:24,md:24,lg:24}})]:t._e(),t._v(" "),r("Divider",{staticStyle:{"margin-top":"0"},attrs:{dashed:"",orientation:"left"}},[r("small",{staticStyle:{color:"#aaa"}},[t._v("\n              "+t._s(t.$t("general"))+"\n            ")])]),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allUnits&&t.edit_item.allUnits.length>0?r("FormItem",{attrs:{label:t.$tc("unit")}},[r("Select",{staticStyle:{width:"100%"},on:{"on-change":t.itemUnitChanged},model:{value:t.edit_item.unit_id,callback:function(e){t.$set(t.edit_item,"unit_id",e)},expression:"edit_item.unit_id"}},t._l(t.edit_item.allUnits,(function(e,n){return r("Option",{key:"unit_"+n+"_"+e.id,attrs:{value:e.id}},[t._v("\n                  "+t._s(e.name)+"\n                ")])})),1)],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.changeable?r("FormItem",{attrs:{prop:"price",label:t.$t("price"),rules:[{required:!0,type:"number",message:t.$t("field_is_required",{field:t.$t("price")}),trigger:["change","blur"]},{validator:t.itemPrice,trigger:["change","blur"]}]}},[r("InputNumber",{model:{value:t.edit_item.price,callback:function(e){t.$set(t.edit_item,"price",e)},expression:"edit_item.price"}})],1):t._e()],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[r("FormItem",{attrs:{prop:"discount",label:t.$t("discount_"),rules:{validator:t.itemDiscount,trigger:["change","blur"]}}},[r("InputNumber",{model:{value:t.edit_item.discount,callback:function(e){t.$set(t.edit_item,"discount",e)},expression:"edit_item.discount"}})],1)],1),t._v(" "),r("Col",{attrs:{sm:24,md:12,lg:12}},[t.edit_item.allPromotions&&t.edit_item.allPromotions.length>0?r("FormItem",{attrs:{label:t.$tc("promo",2)}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.promotions,callback:function(e){t.$set(t.edit_item,"promotions",e)},expression:"edit_item.promotions"}},t._l(t.edit_item.allPromotions,(function(e,n){return r("Option",{key:"tax_"+n+"_"+e.id,attrs:{value:e.id}},[t._v("\n                  "+t._s(e.name)+"\n                ")])})),1)],1):t._e()],1)],2),t._v(" "),t.edit_item.changeable?r("FormItem",{attrs:{label:t.$tc("tax",2),prop:"taxes"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.edit_item.allTaxes,callback:function(e){t.$set(t.edit_item,"allTaxes",e)},expression:"edit_item.allTaxes"}},t._l(this.taxes,(function(e){return r("Option",{key:"tax_"+e.id,attrs:{value:e.id}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),1)],1):t._e(),t._v(" "),r("FormItem",[r("Button",{attrs:{long:"",type:"primary"},on:{click:function(e){return t.updateItem()}}},[t._v(t._s(t.$t("update")))])],1)],1),t._v(" "),r("Button",{attrs:{long:"",type:"error"},on:{click:function(e){return t.remove(t.edit_item)}}},[t._v(t._s(t.$t("remove_from_order")))])],1):t._e()]),t._v(" "),r("Modal",{staticClass:"np-header-footer",attrs:{width:"550","footer-hide":"","mask-closable":!1,title:t.$t("add_x",{x:t.$tc("customer")})},model:{value:t.add_customer,callback:function(e){t.add_customer=e},expression:"add_customer"}},[r("customer-form-component",{on:{added:t.customerAdded}})],1)],1):t._e()}),[],!1,null,"48adf80b",null).exports}}]);